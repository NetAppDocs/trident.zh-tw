<?xml version="1.0" encoding="UTF-8"?>
<blocks>
  <block id="2358ca3eef46b0e25466e80dbea7ea4b" category="summary">請參閱Astra Trident組態的可用組態選項。</block>
  <block id="34e1f7eb303c0a150cd440611b3b5e24" category="doc">儲存組態選項</block>
  <block id="51f834b47bcd78a0f4f40fd8ca40446f" category="section-title">全域組態選項</block>
  <block id="b22d82aea9557ba6aa7b915d40309d9b" category="paragraph">這些組態選項適用於所有Astra Trident組態、無論使用何種儲存平台。</block>
  <block id="054b4f3ea543c990f6b125f41af6ebf7" category="cell">選項</block>
  <block id="b5a7adde1af5c87d7fd797b6245c2a39" category="cell">說明</block>
  <block id="0a52730597fb4ffa01fc117d9e71e3a9" category="cell">範例</block>
  <block id="7877022c956918624cc0373ff564cad4" category="cell">「分度」</block>
  <block id="d41d8cd98f00b204e9800998ecf8427e" category="doc"></block>
  <block id="63b276a6c28274ed5e553d4ce3fe7eb1" category="paragraph">組態檔版本編號</block>
  <block id="c4ca4238a0b923820dcc509a6f75849b" category="paragraph">1.</block>
  <block id="868dff7060d78b6417dc8e065eca8374" category="cell">「torageDriverName」</block>
  <block id="ac5eb8fcbd1ed9c85a98d91e10e26a38" category="paragraph">儲存驅動程式名稱</block>
  <block id="23901d5a815c5a1c2f5ce4e4863e4fb6" category="paragraph">"ONTAP-NAS"、"ONTAP-san、"ONTAP-NAS-經濟"、"ONTAP-NAS- Flexgroup、"Poolidfire - san、 "azure-NetApp-fils"或"GCP-CVS"</block>
  <block id="c08068da3c5d19547544c4bd424a6b76" category="cell">「toragePrefix」</block>
  <block id="3f2b20ce3aa5e39b0dbfe20326747a7b" category="paragraph">Volume名稱的選用首碼。預設值：「netappdvp_」。</block>
  <block id="46fa46eed970046d03e2dedc95cdc83b" category="paragraph">接移_</block>
  <block id="91590ee78f1b4751284f4f9ea80cfe86" category="cell">《限制Volume大小》</block>
  <block id="fcf783284187f1e80e772eacd9266ee1" category="paragraph">Volume大小的選擇性限制。預設值：「」（未強制執行）</block>
  <block id="75da9d6de91e782eca4fa00341367135" category="paragraph">10g</block>
  <block id="3eed2a7dac1f2329f3a9574a68e5e1c4" category="admonition">請勿將「儲存前置詞」（包括預設值）用於元素後端。缺省情況下，"Poolidfire－san "驅動程序將忽略此設置而不使用前綴。我們建議使用特定的TenantId進行Docker Volume對應、或是使用Docker版本、驅動程式資訊和原始名稱填入的屬性資料、以便在可能使用任何名稱標示的情況下使用。</block>
  <block id="0863f9e97e159e3ea1ce46bdb49b1254" category="paragraph">您可以使用預設選項、避免在每個建立的Volume上指定這些選項。「最小化」選項適用於所有控制器類型。如ONTAP 需如何設定預設Volume大小的範例、請參閱「功能區組態」一節。</block>
  <block id="a48a8458539e489328f4d6d3fc0ee288" category="cell">《大小》</block>
  <block id="41ad23e0468b5a035cae097ac8b28bb9" category="paragraph">新磁碟區的選用預設大小。預設值：「1G」</block>
  <block id="08aa1584c9a5791fb64b0f7f1453f9eb" category="paragraph">10g</block>
  <block id="0353522b39b87d54d40d3f09ec668851" category="section-title">組態ONTAP</block>
  <block id="cd536bce1bed61366e8d17a85fe6678a" category="paragraph">除了上述全域組態值之外、使用ONTAP 時還提供下列頂層選項。</block>
  <block id="07c54fe26be1e43601e99cd9d4fbe262" category="cell">《馬納格門達利》</block>
  <block id="464779f3491153dd1e79ddbd8a81e3f0" category="paragraph">IP位址ONTAP ：您可以指定完整網域名稱（FQDN）。</block>
  <block id="190dafab69706a67221c1226360de7dc" category="paragraph">10.0.0.1</block>
  <block id="bd81db53971fda3e688447b28c747d1a" category="cell">「DataLIF」</block>
  <block id="bfdeb0e1ca992a3dcb6853265e453e21" category="paragraph">傳輸協定LIF的IP位址；如果未指定、則會衍生出來。對於「ONTAP-NAS」驅動程式*僅*、您可以指定FQDN、在這種情況下、FQDN將用於NFS掛載作業。對於「ONTAP-san」驅動程式、預設為使用SVM的所有資料LIF IP、並使用iSCSI多重路徑。為「ONTAP-san」驅動程式指定「dataLIF」的IP位址、會強制驅動程式停用多重路徑、並只使用指定的位址。</block>
  <block id="98a2cd7efa1ba950d42e42af495c4248" category="paragraph">10.0.0.2</block>
  <block id="afc423de2be5ca5ab3a6ae9548bbfcf3" category="cell">《虛擬機器》</block>
  <block id="11053eb2b6ac6e8802c67c054cf55ad9" category="paragraph">要使用的儲存虛擬機器（如果管理LIF是叢集LIF、則為必要）</block>
  <block id="b26399fddd6473c150b4e7528fb04fdc" category="paragraph">SVM_NFS</block>
  <block id="6d77646a2fd9ab65f8e3344d7dce661a" category="cell">《使用者名稱》</block>
  <block id="723a179bbb9fc3c4f12cf296a8841b27" category="paragraph">連線至儲存設備的使用者名稱</block>
  <block id="6173aa5206484b5224450952747c7148" category="paragraph">vsadmin</block>
  <block id="6aa91a7fbb8c9edcf4aa5f9411aec19c" category="cell">密碼</block>
  <block id="8cf10281cf3b9290d5988c57a7d19693" category="paragraph">連線至儲存設備的密碼</block>
  <block id="5ebe2294ecd0e0f08eab7690d2a6ee69" category="paragraph">秘密</block>
  <block id="7e6d207f2b120c6cc9caa98510aa51c6" category="cell">《Aggregate》</block>
  <block id="ac53191a99c328660eafa4696375dbfb" category="paragraph">用於資源配置的Aggregate（選用；如果已設定、則必須指派給SVM）。對於「ONTAP-NAS-flexgroup」驅動程式、此選項會被忽略。指派給SVM的所有集合體均可用來配置FlexGroup 一個SVolume。</block>
  <block id="70d2c7701d2837552c0a38c02a326592" category="paragraph">Aggr1.</block>
  <block id="12d2394af47293b12d6b5f411f99a6d1" category="cell">「限制Aggregateusage」</block>
  <block id="925060a0c0a15f99ef1bee43f1660ea4" category="paragraph">如果使用率高於此百分比、則可選用、失敗的資源配置</block>
  <block id="f819de81247be4a5428dc0e169de28b8" category="paragraph">75%</block>
  <block id="2b45af5c768d7b2495ef631c991ecd78" category="cell">「nfsMountOptions」</block>
  <block id="876885770cf58d20ef5672cc5594e85d" category="inline-link">請參閱此處的NFS主機組態資訊</block>
  <block id="0a19ca3d1db7e5bc24b58f73b91c3f49" category="paragraph">精細控制NFS掛載選項；預設為「-o nfsver=3」。*僅適用於「ONTAP-NAS」和「ONTAP-NAS-經濟」驅動程式*。<block ref="71f7a3f48cfd3876cffba401813b7db0" category="inline-link-rx"></block>。</block>
  <block id="301c869c551e12d862ab0291837102a0" category="paragraph">-o nfsves=4.</block>
  <block id="3b890f58db76bb3003ada171cd18c4db" category="cell">「igroupName」</block>
  <block id="00d72747af4eb1f0bab120935efe88fe" category="paragraph">外掛程式使用的igroup；預設為「netappdvp」。*僅適用於「ONTAP-San’driver」*。</block>
  <block id="79e762988462f6f8da9becfbfd789755" category="paragraph">myigroup</block>
  <block id="5c5adadf8175fd69d4af9bfdb608c42c" category="paragraph">可申請的Volume大小上限和qtree父Volume大小上限。*對於「ONTAP-NAS經濟」驅動程式、此選項會進一步限制其所建立的FlexVols大小*。</block>
  <block id="f07e606cfe25ac6fb07d9c4af941d9a2" category="paragraph">300克</block>
  <block id="07f6b23cad3d6da54012935ff972affe" category="cell">"qtreesPerFlexvol"</block>
  <block id="981ba910eb0ffc42f42059de056624b4" category="paragraph">每FlexVol 個邊區最多qtree數、範圍必須為[50、300]、預設值為200。*對於「ONTAP-NAS-P節約」驅動程式、此選項可自訂每FlexVol 個版本的qtree數量上限*。</block>
  <block id="94f6d7e04a4d452035300f18b984988c" category="paragraph">300</block>
  <block id="3890063556e337d458019437f027030b" category="paragraph">您可以使用預設選項、避免在您建立的每個Volume上指定這些選項：</block>
  <block id="a6bddf19eed00dbe2199864dee8454ce" category="cell">《保護區》</block>
  <block id="887ba6a0090fff5ace8889efb3b766af" category="paragraph">空間保留模式；「無」（精簡配置）或「Volume」（完整配置）</block>
  <block id="334c4a4c42fdb79d7ebc3e73b517e6f8" category="paragraph">無</block>
  <block id="0ec3875cf79264e4689a646be2f704b6" category="cell">「快照原則」</block>
  <block id="b614ecafc9c9bbcd0206b519e5481f8d" category="paragraph">要使用的Snapshot原則、預設為「無」</block>
  <block id="7556d5a1b0c5f68b7cb5aedaa3156008" category="cell">「快照保留區」</block>
  <block id="e35ead0e9e7038a6c58695bfa4741686" category="paragraph">Snapshot保留百分比、預設值為「」以接受ONTAP的預設值</block>
  <block id="d3d9446802a44259755d38e6d163e820" category="paragraph">10.</block>
  <block id="4be01095ce6e500084fc427e5dec61ac" category="cell">「PlitOnClone」</block>
  <block id="eb28cb6308c229ba4561cf02d78b9a07" category="paragraph">建立複本時從其父實體分割複本、預設為「假」</block>
  <block id="68934a3e9455fa72420237eb05902327" category="paragraph">錯</block>
  <block id="b091cbafedf94db98f17823d044434bd" category="cell">加密</block>
  <block id="988726bbf32c455be56acbfb0da3aad0" category="paragraph">啟用NetApp Volume Encryption、預設為「假」</block>
  <block id="b326b5062b2f0e69046810717534cb09" category="paragraph">是的</block>
  <block id="ce46e8f3fc6eaddbe03115e0d62090ac" category="cell">「unixPermissions」</block>
  <block id="a3b703e23c8d0caf2b2fb4f46057013b" category="paragraph">NAS選項適用於已配置的NFS磁碟區、預設為「777」</block>
  <block id="f1c1592588411002af340cbaedd6fc33" category="paragraph">777</block>
  <block id="ce8f82152151ae2aadaec166eca744a9" category="cell">「napshotDir</block>
  <block id="525eba0ced0a1c122a9112c4d10fbdc2" category="paragraph">NAS選項用於存取「.snapshot」目錄、預設為「假」</block>
  <block id="e59001176f4360988f5d774a8405b4b9" category="cell">「匯出政策」</block>
  <block id="b60dd25e9d373b87424c30a74da2703f" category="paragraph">NFS匯出原則使用NAS選項、預設為「預設」</block>
  <block id="c21f969b5f03d33d43e04f8f136e7682" category="paragraph">預設</block>
  <block id="a463baaf6666da7178b6fc6a3c8a3fee" category="cell">《生態樣式》</block>
  <block id="af6bd5b29a0589f7c6a47f47fae230c7" category="paragraph">NAS選項用於存取已配置的NFS Volume、預設為「UNIX」</block>
  <block id="1d770934d44de09b0d24f04fd01708ba" category="paragraph">混合</block>
  <block id="3184b1a9846944fabb00496c4b6b613a" category="cell">「fileSystemType」</block>
  <block id="79c6531f572824f3178c8b1fb0f35d26" category="paragraph">SAN選項可選擇檔案系統類型、預設為「ext4」</block>
  <block id="310201b6353c5f38bc039e0e51b079d3" category="paragraph">XFS</block>
  <block id="31aa018945eb62580d68d360cba8ba54" category="cell">「分層政策」</block>
  <block id="3cec6d01b4f10a61939982ecfb47fc7f" category="paragraph">要使用的分層原則、預設為「無」；ONTAP 9.5之前的SVM-DR組態為「純快照」</block>
  <block id="90adf331b7868c7af46ad6e035e93844" category="section-title">擴充選項</block>
  <block id="493a6606c4789fad3c7317b99cb563d0" category="paragraph">「ONTAP-NAS」和「ONTAP-SAN」驅動程式可為ONTAP FlexVol 每個Docker Volume建立一個支援功能。支援每個叢集節點最多1000個FlexVols、叢集最多12、000個FlexVols。ONTAP如果您的Docker Volume需求符合上述限制、則「ONTAP-NAS」驅動程式是首選的NAS解決方案、因為FlexVols提供的其他功能、例如Docker Volume精細快照和複製。</block>
  <block id="b8f30e4086b754ccaf7bd5d01d8df137" category="paragraph">如果您需要的Docker磁碟區數量超過FlexVol 了《支援》的範圍、請選擇「ONTAP - NAS經濟」或「ONTAP - SAN經濟」驅動程式。</block>
  <block id="50710f3a4715e3f874848944b6b54e28" category="paragraph">「ONTAP-NAS經濟」驅動程式會在ONTAP 自動管理的FlexVols資源池中、將Docker磁碟區建立為還原樹狀結構。qtree的擴充能力大幅提升、每個叢集節點最多可達100、000個、每個叢集最多可達2、400、000個、而犧牲了部分功能。「ONTAP-NAS-節約」驅動程式不支援Docker Volume精細快照或複製。</block>
  <block id="0c8b91c6c2ba9c892f3eea2cd9c86cd1" category="admonition">Docker swarm目前不支援「ONTAP-NAS-節約」驅動程式、因為swarm不會協調多個節點之間的磁碟區建立。</block>
  <block id="5849dbe631db5b1e1b365f9f2f84ff60" category="paragraph">「ONTAP-san經濟」驅動程式會在ONTAP 自動管理的FlexVols共用集區內、將Docker Volume建立為還原LUN。如此FlexVol 一來、每個支援不只侷限於一個LUN、而且能為SAN工作負載提供更好的擴充性。根據儲存陣列的不同、ONTAP 每個叢集最多可支援16384個LUN。由於磁碟區是下方的LUN、因此此驅動程式支援Docker磁碟區精細快照和複製。</block>
  <block id="65e92c8f7fa9750b795cc1046328cf06" category="paragraph">選擇「ONTAP-NAS-flexgroup」驅動程式、即可將平行處理能力提升至單一磁碟區、以數十億個檔案擴充至PB範圍。FlexGroups的一些理想使用案例包括AI / ML / DL、Big Data和分析、軟體建置、串流、檔案儲存庫等。Trident在配置FlexGroup 完一套SVM時、會使用指派給SVM的所有集合體。支援Trident也有下列考量：FlexGroup</block>
  <block id="9d83b6d2e2b099e63bf8e2fc8c870893" category="list-text">需要ONTAP 9.2版或更新版本。</block>
  <block id="e7c74973b26ad51b9db42a9c347a8cd4" category="list-text">截至本文撰寫時、FlexGroups僅支援NFS v3。</block>
  <block id="02a100b04add3b90fddef64499e825a2" category="list-text">建議啟用SVM的64位元NFSv3識別碼。</block>
  <block id="496f8625569b787269edab0f3de973da" category="list-text">建議FlexGroup 的最小內存區大小為100GB。</block>
  <block id="db78b2a7acf43fa03cd95fb3a77c82f9" category="list-text">不支援FlexGroup 將複製複製用於實體磁碟區。</block>
  <block id="f5ac1e3c252855373c7f660dbd89699d" category="inline-link">NetApp FlexGroup 《NetApp》《最佳實務做法與實作指南》</block>
  <block id="df1a7e79743809601db1d20d6a33ae52" category="paragraph">如需適用於FlexGroups的FlexGroups與工作負載相關資訊、請參閱<block ref="b8a99695d7979127a1cab07b42e22743" category="inline-link-rx"></block>。</block>
  <block id="b30b6b60171d85877ea91897bdd6faed" category="paragraph">若要在同一個環境中獲得進階功能和龐大規模、您可以執行多個Docker Volume外掛程式執行個體、其中一個使用「ONTAP-NAS」、另一個使用「ONTAP-NAS-經濟」。</block>
  <block id="0c0f6724044ed44fb85d2ce3193cb7c3" category="section-title">範例ONTAP ：功能組態檔</block>
  <block id="9420b5e8ed08a163eeafb1d5026f74be" category="paragraph">*「ONTAP-NAS」驅動程式*的NFS範例</block>
  <block id="c26e7b2e60e156979940cd72ed83d0b9" category="paragraph">*「ONTAP-NAA-flexgroup」驅動程式*的NFS範例</block>
  <block id="3a57e82fd5f9855754a03019c433aff7" category="paragraph">* ONTAP NAS經濟驅動程式*的NFS範例</block>
  <block id="2bfad97b56e71c619e45f6d4c2e4c2e2" category="paragraph">* iSCSI的「ONTAP-san」驅動程式*範例</block>
  <block id="98f803effb81ad687bcd941b70439aaa" category="paragraph">*「ONTAP-san經濟」驅動程式*的NFS範例</block>
  <block id="ffe54c343031d16e77db73e2d950e277" category="section-title">元件軟體組態</block>
  <block id="3afcd136a7bffa20fc39ba6581412cd2" category="paragraph">除了全域組態值之外、使用Element軟體（NetApp HCI / SolidFire）時、也可使用這些選項。</block>
  <block id="06981b2729b4b522b21d903c7738a2ca" category="cell">端點</block>
  <block id="6f8cfcd7221d73b0e27985966dfd6e1f" category="paragraph"><block ref="608956a9224818c204ba64e5dd4b5f0c" category="inline-link-rx"></block></block>
  <block id="501aa777bd36217575e7547e7fed62cb" category="paragraph"><block ref="501aa777bd36217575e7547e7fed62cb" category="inline-link-rx"></block></block>
  <block id="955f5caa2495689258902533d1a6cd44" category="cell">《VIP》</block>
  <block id="c61f15977fe4efa0866eea87fb740cda" category="paragraph">iSCSI IP位址和連接埠</block>
  <block id="6a6b63874c664c103982f6d422c6384e" category="paragraph">10.0.0.7：3260</block>
  <block id="4e25fe4a614b527d9b3d89ee6abe5d35" category="cell">《天王名稱》</block>
  <block id="72deb2676231ab8e068ef60dd89edd4c" category="paragraph">要使用的SolidFireF租戶（如果找不到、請建立）</block>
  <block id="5eda5112bf8affeb1d2cd8eea6302076" category="paragraph">「Docker」</block>
  <block id="f016e2c01f2bafa45e6b537d49f0f9da" category="cell">《初始器IFACE》</block>
  <block id="d2672389886b173aef703433f7e4b89b" category="paragraph">將iSCSI流量限制為非預設介面時、請指定介面</block>
  <block id="6522432847a0e6902318a976e5533f62" category="paragraph">「預設」</block>
  <block id="26194deaf50c44db6eb5983237bdaf25" category="cell">《類型》</block>
  <block id="ee1aea1de97320ad8e98436f68b01b4a" category="paragraph">QoS規格</block>
  <block id="5935dcd024929bc7086bb230802bf576" category="paragraph">請參閱以下範例</block>
  <block id="5e9bf55f849ccc5a31a50d1fa784d28c" category="cell">"LegacyNamePrefix（名前置詞）"</block>
  <block id="db7adc3775b0b56c59ce4263fbd79fbf" category="paragraph">升級版Trident安裝的首碼。如果您使用1.3.2版之前的Trident版本、並使用現有磁碟區執行升級、則必須設定此值、才能存取透過Volume名稱方法對應的舊磁碟區。</block>
  <block id="8d3aa50a0f9c3c059677927a3fbbfcda" category="paragraph">「netappdvp-」</block>
  <block id="36f9c7b615268efec7f4c56c387a55bb" category="paragraph">「Poolidfire - san」驅動程式不支援Docker swarm。</block>
  <block id="1059bb8540c48e6b455e802384bad65d" category="section-title">元素軟體組態檔範例</block>
  <block id="4c4a4e3967b80166b1c89a42bb702c5c" category="section-title">GCP組態上的資訊（CVS）Cloud Volumes Service</block>
  <block id="c731f72e1d22a7c5e01a7cb789a8885e" category="inline-link">GCP</block>
  <block id="16aba044aae8d4a1f104875fadfa8b7a" category="paragraph">Trident現在支援使用預設CVS服務類型的較小磁碟區<block ref="ba449b67e05ccd893d094c64611dfdac" category="inline-link-rx"></block>。對於以「儲存類別=軟體」建立的後端、現在磁碟區的資源配置大小最小為300 GiB。* NetApp建議客戶使用低於1TiB的磁碟區來處理非正式作業工作負載*。CVS目前在「管制可用度」下提供此功能、並不提供技術支援。</block>
  <block id="6c92285fa6d3e827b198d120ea3ac674" category="inline-link">請按這裡</block>
  <block id="6d43083e1ac79c6ae1d612b064c50415" category="admonition">註冊以存取低於1TiB的磁碟區<block ref="daab940ca038632df7b3bcdb2ce67b4b" category="inline-link-rx"></block>。</block>
  <block id="4525f6e1d5124cd80f38341d78e8a67d" category="inline-link">這份表格</block>
  <block id="13c75fbfea8d654533aa97741ee726eb" category="admonition">使用預設CVS服務類型「儲存類別=軟體」部署後端時、您應該取得GCP上的子1TiB Volume功能、以取得有關專案編號和專案ID的存取權。這是Trident配置子1TiB磁碟區所需的功能。如果沒有、則對於小於600 GiB的PVCs、Volume建立*將會失敗*。使用取得對低於1TiB磁碟區的存取權<block ref="d5347d47b24e3303f1c7b0ae61e08dc7" category="inline-link-rx"></block>。</block>
  <block id="8a5a1d824b8678ed57f0b091512af961" category="paragraph">Trident針對預設CVS服務層級所建立的磁碟區將會配置如下：</block>
  <block id="17e388f76e4ab809d67d7da3f508f16e" category="list-text">小於300 GiB的PVCS會導致Trident建立300 GiB CVS Volume。</block>
  <block id="c12c279867b9062aac25467988994298" category="list-text">在300 GiB到600 GiB之間的PVCS會導致Trident建立一個所需大小的CVS Volume。</block>
  <block id="4ff78214fe676a45289036b058361170" category="list-text">在600 GiB和1 TiB之間的PVCS會導致Trident建立1TiB CVS Volume。</block>
  <block id="de59c7ff95f1d72edb04ee0b3b70de27" category="list-text">大於1 TiB的PVCS會導致Trident建立所要求大小的CVS Volume。</block>
  <block id="49821db5dac692677dc0f49801db61dd" category="paragraph">除了全域組態值、在GCP上使用CVS時、也可使用這些選項。</block>
  <block id="2086191016950a784040f7d22ab27f60" category="cell">《apiRegion》</block>
  <block id="2ecba853d55bf844defef38593bfeddd" category="paragraph">CVS帳戶區域（必填）。為GCP區域、此後端將在其中配置磁碟區。</block>
  <block id="91730af327707bec713a5f18f6d8df6a" category="paragraph">「美國西部2」</block>
  <block id="c96383270cbab23de47b4f0961f64929" category="cell">「ProjectNumber」</block>
  <block id="44242a2deef719f96982e82f0be8fc65" category="paragraph">GCP專案編號（必填）。您可在GCP入口網站的主畫面中找到。</block>
  <block id="d4445a55440abc4ee9235c02b46555b3" category="paragraph">「123456789012」</block>
  <block id="1a269fb3ec0496720ca75e984d8de40e" category="cell">「hostProjectNumber」</block>
  <block id="e34e53c32d906addf366532becb0dcd1" category="paragraph">GCP共享VPC主機專案編號（使用共享VPC時需要）</block>
  <block id="efd711f7b98e2f0003cbf70aa18a14c0" category="paragraph">「098765432109」</block>
  <block id="a34d72a685d5e27eb6bc18f54a7bab1d" category="cell">「apiKey」</block>
  <block id="2c3fb314d5e72bbcae6b7a25d5b8edaa" category="paragraph">具有CVS管理員角色的GCP服務帳戶API金鑰（必填）。是GCP服務帳戶的私密金鑰檔（逐字複製到後端組態檔）的JSON-格式內容。服務帳戶必須具有netappcloudVolumes.admin角色。</block>
  <block id="6a17ea7b1fdab79ffd3eddf255aaf46d" category="paragraph">（私密金鑰檔案的內容）</block>
  <block id="9a5b66949f53f92871d3e1a8aae0cc19" category="cell">「ecretKey」</block>
  <block id="49df949d63ad2fe5a679bea21beb739f" category="paragraph">CVS帳戶秘密金鑰（必填）。可在CVS入口網站的「帳戶設定」&gt;「API存取」中找到。</block>
  <block id="af18429250667f805769a7755a008c1f" category="cell">"proxyurl"</block>
  <block id="eccfbdf9565fdb1f0b53121d07c0ca4d" category="paragraph">Proxy URL（如果需要Proxy伺服器才能連線至CVS帳戶）。Proxy伺服器可以是HTTP Proxy或HTTPS Proxy。若為HTTPS Proxy、則會跳過憑證驗證、以允許在Proxy伺服器中使用自我簽署的憑證。*不支援啟用驗證的Proxy伺服器*。</block>
  <block id="58b40a255bdd79778c81b51b0189d3bc" category="paragraph">「http://proxy-server-hostname/”</block>
  <block id="1fc4f89077ac8f740a8209cb13dad780" category="paragraph">NFS掛載選項；預設為「-o nfsver=3」</block>
  <block id="c0c057b1fbdbb4b3fbff5af024800013" category="paragraph">「nfsves=3、proto=tcp、timeo=600」</block>
  <block id="0322003a3502f221fdb74b059dfff46e" category="cell">《服務層級》</block>
  <block id="989640232ebd1cee1600241dcaf3092b" category="paragraph">效能等級（標準、高級、極致）、預設為「標準」</block>
  <block id="6dc6830d3f5eeef9925e20cb2872face" category="paragraph">「優質」</block>
  <block id="1631dca111b8c1a922c7f29d48eb7121" category="cell">網路</block>
  <block id="bbf068b3542ca7b12963602ea10acbfa" category="paragraph">用於CVS磁碟區的GCP網路、預設為「預設」</block>
  <block id="69cd8c867e8af214f6e9c04138d56ff5" category="admonition">如果使用共享VPC網路、您應該同時指定「ProjectNumber」和「hostProjectNumber」。在這種情況下、「專案編號」是服務專案、「主機專案編號」則是主機專案。</block>
  <block id="ac4650c60f6238dc7461aa20cf40d081" category="admonition">NetApp Cloud Volumes Service 適用於GCP的支援不支援大小小於100 GiB的CVS效能磁碟區、或大小小於300 GiB的CVS磁碟區。為了讓部署應用程式更輕鬆、Trident會在要求太小的磁碟區時、自動建立大小最小的磁碟區。</block>
  <block id="0075471554ab0900a2a82a3481e9d1a2" category="paragraph">在GCP上使用CVS時、可使用這些預設的Volume選項設定。</block>
  <block id="9c64942fe493cb70c474ff447429d8a4" category="cell">「匯出規則」</block>
  <block id="0b4473f186b60c3a658cb10df719e6e7" category="paragraph">NFS存取清單（位址和/或CIDR子網路）、預設為「0.00.0.0/0」</block>
  <block id="4fd06576654815d69b61384ef4f9e084" category="paragraph">「10.0.1.0/24、10.0.2.100」</block>
  <block id="2907de5eba980e910513008165ea2c2b" category="paragraph">控制「.snapshot」目錄的可見度</block>
  <block id="19b4c847405d74614976bd1228f59c9f" category="paragraph">「假」</block>
  <block id="6cac9fafaf62c70b75f827e614328121" category="paragraph">Snapshot保留百分比、預設值為「」、接受CVS預設值為0</block>
  <block id="c669350437225628cf4fcc3d0ec9d8f6" category="paragraph">「10」</block>
  <block id="7946d615645dcc579e9f7d0ea1ab5dce" category="paragraph">Volume大小、預設為「100GiB」</block>
  <block id="6dd08dbe0437571ae84c751c0d9e7db2" category="paragraph">「10T」</block>
  <block id="14d7cea065a37d05840128a2193e5d0b" category="section-title">GCP組態檔上的CVS範例</block>
  <block id="e303017ec184887efb9bebcc178d78c5" category="section-title">組態Azure NetApp Files</block>
  <block id="7450cfde7058dc5e1f7909d0280fd7ae" category="inline-link">Azure NetApp Files</block>
  <block id="83e44b4ce45c0f8e6a65a21d4dd12587" category="paragraph">若要設定及使用<block ref="24a785881ff1cdf191a2239811dc9597" category="inline-link-rx"></block> 後端、您將需要下列項目：</block>
  <block id="3f72ed4087b557a1841662fa1eec0927" category="list-text">Azure訂閱提供的「SubscriptionID」Azure NetApp Files （含功能不支援的功能）</block>
  <block id="b12fb354025b3dfa01277964eb72c060" category="inline-link">應用程式註冊</block>
  <block id="8f2cfe6996e4a915299313c85a777630" category="list-text">來自於的「TenantId」、「clientID」和「clientSecret」<block ref="8cf7d0e47908a64c9538530ae13f3b17" category="inline-link-rx"></block> 在Azure Active Directory中、具備Azure NetApp Files 充分的權限執行此功能</block>
  <block id="f494e4df0fff53e809d6563f8ec1782f" category="inline-link">委派的子網路</block>
  <block id="761f4d4786b8e1a6c65bf01f90ff17cd" category="list-text">Azure位置、至少包含一個<block ref="c5f14b2142014dc234282a513132bad4" category="inline-link-rx"></block></block>
  <block id="4a836a0efc98ecae9af9c3407923eefe" category="inline-link">快速入門指南</block>
  <block id="dc2194d6594556ab2ec2b961b22b55a9" category="admonition">如果Azure NetApp Files 您是第一次使用或是在新的位置使用、則需要進行一些初始組態設定<block ref="03c0e2c26eabaafc3ff886c9295f214c" category="inline-link-rx"></block> 將帶您逐步完成。</block>
  <block id="0b0b881d3a43e5782867f1e6ea7ae219" category="admonition">Astra Trident 21.04.0及更早版本不支援手動QoS容量資源池。</block>
  <block id="7a1920d61156abc05a60135aefe8bc67" category="cell">預設</block>
  <block id="40e27006e7b709772172391a3d17b331" category="paragraph">永遠為1</block>
  <block id="9fc00ac6b0164174fe95b39347777acf" category="paragraph">「azure-NetApp-Files」</block>
  <block id="f5b55596d3f53b1857a4980dac9db979" category="cell">「後端名稱」</block>
  <block id="150fed11d160cf3a20a84935a6da6b2f" category="paragraph">儲存後端的自訂名稱</block>
  <block id="8c6cd78048829f0726a268945284d717" category="paragraph">驅動程式名稱+「_」+隨機字元</block>
  <block id="665120e71659a6a32f990a3181688d1b" category="cell">《訂閱ID》</block>
  <block id="b2ad290b003ccdce2a538f49a795f281" category="paragraph">Azure訂閱的訂閱ID</block>
  <block id="e07778d10cef90430253876cba7157e4" category="cell">「TenantId」</block>
  <block id="2975d48342e428a3b18123f85ed0ecb5" category="paragraph">應用程式註冊的租戶ID</block>
  <block id="949ba1045db0d48bd189044e672d8097" category="cell">"clientID"</block>
  <block id="2c07e9234f0df0d4c8887a04f7e641fe" category="paragraph">應用程式註冊的用戶端ID</block>
  <block id="56ef18e84ab36c2bdc4546e6a2756673" category="cell">「客戶機密」</block>
  <block id="85f484f0892a96287b6224ddd3c5fbb2" category="paragraph">應用程式註冊的用戶端機密</block>
  <block id="f68b03078b004c148f3382adb3803512" category="paragraph">「標準」、「優質」或「超高」之一</block>
  <block id="48483edc045345a516ed748c1964e3bf" category="paragraph">「」（隨機）</block>
  <block id="fc7dd5b65d21ee7272a067c9404a8498" category="cell">位置</block>
  <block id="544e534f1aa0d97c48ccedd92fe2ba3d" category="paragraph">Azure位置的名稱將會在中建立新的Volume</block>
  <block id="32ef1af5ccda7c2f6d85e55f5034f105" category="cell">「虛擬化網路」</block>
  <block id="10afd0959cfa4a53bce9c8d395c40c48" category="paragraph">具有委派子網路的虛擬網路名稱</block>
  <block id="ec045173f4df65e5e8951c3ca9579945" category="cell">《Subnet》</block>
  <block id="0b8deda0ecc5080e8c0ed0b475e983ba" category="paragraph">委派給「icrosoft.Netapp/volumes`」的子網路名稱</block>
  <block id="64984096fbf22f0a2b49f000ac843834" category="paragraph">精細控制NFS掛載選項</block>
  <block id="c9266840071171609b858a86983e5cbc" category="paragraph">「-o nfsves=3」</block>
  <block id="18320b2a705a7bed37a6bc0af4aee093" category="paragraph">如果要求的磁碟區大小高於此值、則資源配置失敗</block>
  <block id="7962423206a6704e20fa94085d19b517" category="paragraph">「」（預設不強制執行）</block>
  <block id="bb7d88b29e22a86389e711d24d78d8b0" category="admonition">支援大小不低於100 GB的磁碟區的支援服務。Azure NetApp Files為了讓應用程式更容易部署、Trident會在要求較小的磁碟區時自動建立100 GB磁碟區。</block>
  <block id="c73b8a061778625d86923a1ee3b2b65a" category="paragraph">您可以在組態的特定區段中、使用這些選項來控制預設配置每個Volume的方式。</block>
  <block id="9aef9232b6d23ad9af140b946025a2e9" category="paragraph">新磁碟區的匯出規則。必須是以逗號分隔的清單、以CIDR表示法列出所有的IPv4位址或IPv4子網路組合。</block>
  <block id="5b080068f6b7a62124d4bbe75e0ccebe" category="paragraph">「0.00.0.0/0」</block>
  <block id="e5ac299cc3b14e1fac29518569ca9bb1" category="paragraph">新磁碟區的預設大小</block>
  <block id="cf4ad5c346075cb763a78a1eeb590f67" category="paragraph">「100公克」</block>
  <block id="c26659d1a1cc7dd886f591fd462c9b91" category="section-title">範例Azure NetApp Files</block>
  <block id="b735d2db48e665b21117295550615ff3" category="paragraph">*範例1：azure-NetApp-files*的最小後端組態</block>
  <block id="c9ed1200ddf4fe7e1e4120cb35885310" category="paragraph">這是絕對最低的後端組態。有了這項組態、Trident將會探索您在全球各地委派給ANF的所有NetApp帳戶、容量資源池和子網路、並隨機將新磁碟區放在其中一個上。</block>
  <block id="c31e8cd6c5230f025186373673347b9c" category="paragraph">當您剛開始使用ANF和試用產品時、此組態非常實用。 但實際上、您想要為您所配置的磁碟區提供額外的範圍、以確保它們具有您想要的特性、並最終建立在接近使用該磁碟區之運算的網路上。如需詳細資料、請參閱後續範例。</block>
  <block id="189a6649956b03bce537a5eb6247fc83" category="paragraph">*範例2：azure-NetApp-files*的單一位置和特定服務層級</block>
  <block id="0f10d4c5e31fffa777f19dd757816f93" category="paragraph">此後端組態可將磁碟區放置在Azure的「東向」位置、位於「優質」容量資源池中。Trident會自動探索委派給該位置ANF的所有子網路、並隨機在其中一個子網路上放置新磁碟區。</block>
  <block id="418698e54dde6b45a123af5be774679e" category="paragraph">*範例3：azure-NetApp-files*的進階組態</block>
  <block id="a83f4a534ccef7ac1d209fb0015cd907" category="paragraph">此後端組態可進一步將磁碟區放置範圍縮小至單一子網路、並修改部分Volume資源配置預設值。</block>
  <block id="75f9eb2b518c3ec9d39a7c1f8b4b94a9" category="paragraph">*範例4：使用azure-NetApp-fil等 檔案的虛擬儲存資源池*</block>
  <block id="e0b432486549d4404054c64e947ef84e" category="inline-link-macro">儲存資源池</block>
  <block id="b0e0c2dae5878f7a113284ddd0f3c6c2" category="paragraph">此後端組態定義多個 <block ref="a2da53ffe8493aa084053197c8de9b91" category="inline-link-macro-rx"></block> 在單一檔案中。當您有多個容量集區支援不同的服務層級、而且想要在Kubernetes中建立代表這些層級的儲存類別時、這很有用。</block>
  <block id="8b4e612e7ec021b91bdf46a69c393a75" category="paragraph">這只是在虛擬儲存資源池及其標籤的威力表面留下一層痕跡。</block>
  <block id="82720d84ad009f069fd0b2cfaf6c3dac" category="summary">適用於Docker的Astra Trident可直接整合適用於NetApp儲存平台的Docker生態系統。它支援從儲存平台到Docker主機的儲存資源資源配置與管理、並提供架構、可在未來新增更多平台。</block>
  <block id="486632f7d2196e772b742db4a4a0ad7c" category="doc">部署Astra Trident</block>
  <block id="d2eb05d1990246a079aeb2f56e3a4237" category="paragraph">多個Astra Trident執行個體可同時在同一個主機上執行。這可同時連線至多個儲存系統和儲存類型、並可自訂Docker磁碟區所使用的儲存設備。</block>
  <block id="89bcbd8e4ba49b7310e9fa748e878c4b" category="inline-link-macro">部署的先決條件</block>
  <block id="d1e7215d070e62d3e82e915d703ceaa9" category="paragraph">請參閱 <block ref="a51fda4654690ac4414966ed4956599c" category="inline-link-macro-rx"></block>。在您確定已符合先決條件之後、就可以開始部署Astra Trident。</block>
  <block id="88f0ab229fa9d759d74fcf6ab7cc17b1" category="section-title">Docker託管外掛程式方法（1.1/17.03版及更新版本）</block>
  <block id="135b308ed83c53f1516b7c754566d1c4" category="admonition-title">開始之前</block>
  <block id="070ecb002d71e4e7618a4b46a5ba690f" category="admonition">如果您在傳統精靈方法中使用Astra Trident preer Docker 1.3/17.03、請務必先停止Astra Trident程序、然後重新啟動Docker精靈、再使用託管外掛方法。</block>
  <block id="7bf1ee8f4e093050c1cdf1842931af7d" category="list-text">停止所有執行中的執行個體：</block>
  <block id="47b9ec5c8c4439980c63f4188bad5324" category="list-text">重新啟動Docker。</block>
  <block id="5311ac4d72d5c91dcaa39b896d3b8027" category="list-text">請確定您已安裝Docker Engine 17.03（全新1.13）或更新版本。</block>
  <block id="07d6db5e99a0aa19fe76f15efed30ecf" category="inline-link">安裝或更新安裝</block>
  <block id="2c3bc9d0632e0cccc05fdd3c42467df9" category="paragraph">如果您的版本過時、<block ref="ddebe10ca17c0276898872fa2632e8fb" category="inline-link-rx"></block>。</block>
  <block id="f3a29486bed19a90f2da6d007818b427" category="list-title">步驟</block>
  <block id="48afbcf494fc19ee409f5aff48ae32c3" category="list-text">建立組態檔並指定下列選項：</block>
  <block id="9314e9bcd24c80b255fc3e9e697a2ada" category="list-text">「config」：預設檔案名稱為「config.json」、但您可以使用任何名稱、只要在檔案名稱中指定「config」選項即可。組態檔必須位於主機系統的「/etc/netappdvp」目錄中。</block>
  <block id="8798dc2a3b5e61873054923c9f170ac7" category="list-text">記錄層級：指定記錄層級（「debug」、「info」、「warn」、「f誤差」、「fatal」）。預設值為「資訊」。</block>
  <block id="45ed67026a1141006588fcc698646141" category="list-text">「Debug」：指定是否啟用偵錯記錄。預設值為假。如果為true、則會置換記錄層級。</block>
  <block id="3bed6f89999b483af7f55024d9e7c02a" category="list-text">建立組態檔的位置：</block>
  <block id="28156615c51d4bad2ee47d0a9f43f404" category="list-text">建立組態檔：</block>
  <block id="4e2deef4eda7b7593f1e94279c96a31d" category="list-text">使用託管外掛系統啟動Astra Trident。</block>
  <block id="a4574d19d34a14aa0accde782f35318b" category="list-text">開始使用Astra Trident來消耗已設定系統的儲存空間。</block>
  <block id="a9c521f25a3bacb94ad1dd4705b3585f" category="list-text">建立名為「firstVolume」的Volume：</block>
  <block id="4fbca4f67cbe96bc7d7a16691d2912c2" category="list-text">在容器啟動時建立預設Volume：</block>
  <block id="b8e88709dbc4f2f80a96f53f83862704" category="list-text">移除Volume「firstVolume」：</block>
  <block id="0e68ac1d84bfedf203365a9fb37db9ed" category="section-title">傳統方法（1.12版或更早版本）</block>
  <block id="2c1107bda4c1ae7904ab1835c35973b7" category="list-text">請確定您擁有Docker 1.10版或更新版本。</block>
  <block id="b6fdfa2eab3e357687eba5ddec2bea0c" category="paragraph">如果您的版本已過時、請更新安裝。</block>
  <block id="45c61654258cfd16ceec15df7df02138" category="inline-link">請依照您的經銷指示進行</block>
  <block id="07dff22faeb910f375341cfcbd4899fd" category="paragraph">或者、<block ref="9ce989a7f7f995616a47f5dd291ed229" category="inline-link-rx"></block>。</block>
  <block id="588d2fe1c60271cde75dbeba32e0b25b" category="list-text">確保已為您的系統設定NFS和/或iSCSI。</block>
  <block id="03fe5b0d58270efa87041677cac72ad7" category="list-text">安裝及設定NetApp Docker Volume外掛程式：</block>
  <block id="f45f5a64dae951d3e37c9bd382201b06" category="list-text">下載並解壓縮應用程式：</block>
  <block id="b255d9e06a4ca8e9f5bc31c9198426ad" category="list-text">移至Bin路徑中的位置：</block>
  <block id="ca8a5486f4257b2aef35a8e769fc51d9" category="list-text">放置二進位檔並建立組態檔之後、請使用所需的組態檔來啟動Trident精靈。</block>
  <block id="d3fa61f14ead6cf1cf1d584cf0b6c4e1" category="admonition">除非指定、否則Volume驅動程式的預設名稱為「NetApp」。</block>
  <block id="9ad37c975c341297c49c69353516a727" category="paragraph">精靈啟動後、您可以使用Docker CLI介面來建立及管理磁碟區</block>
  <block id="e3dec3f86b9a3b1be209ab63855ce432" category="list-text">建立Volume：</block>
  <block id="5ff2e3e853922fdb84ef21b85ffdac2e" category="list-text">在啟動容器時配置Docker Volume：</block>
  <block id="8f6a91f5f21d0478e3fd89095fc28ab9" category="list-text">移除Docker Volume：</block>
  <block id="e63e2a2b9c9184e703ff8d93bb92508b" category="section-title">在系統啟動時啟動Astra Trident</block>
  <block id="34f4e076aba0519cebd8bb63617b2f7e" category="paragraph">可在Git repo的「contrib / trident.service.example`」中找到系統型系統的單元檔案範例。若要搭配CentOS/RHEL使用檔案、請執行下列步驟：</block>
  <block id="5b51496da86e5a2073e0c618390c3d2a" category="list-text">將檔案複製到正確的位置。</block>
  <block id="44103de0a164f687d305ad91e919d8ee" category="paragraph">如果執行多個執行個體、則應使用單元檔案的唯一名稱。</block>
  <block id="3223aadc84a3ccb4a3473ba01c895184" category="list-text">編輯檔案、變更說明（第2行）以符合驅動程式名稱和組態檔案路徑（第9行）、以反映您的環境。</block>
  <block id="1edae3931401a32d7dd7dd6e0a2ad563" category="list-text">重新載入系統d以擷取變更：</block>
  <block id="db38a93e27eba57d507611d002ad612f" category="list-text">啟用服務。</block>
  <block id="c7e0a4deeebe264aa7d5f7f3ca3ef77f" category="paragraph">此名稱會根據您在「/r/lib/systemd/system]目錄中命名的檔案而有所不同。</block>
  <block id="baa04490a79e9e8de7fa4cd44e2c6fbb" category="list-text">啟動服務。</block>
  <block id="93c7574cf83c1f01b04891cf2d826cea" category="list-text">檢視狀態。</block>
  <block id="f4f15418284ae7a01b27fccc1af0463a" category="admonition">每當您修改單元檔案時、請執行「stystemctl daem-reload」命令、以瞭解變更內容。</block>
  <block id="0e9e734e557a02db30a20e5ac259cfb9" category="summary">每個儲存驅動程式都有一組不同的選項、您可以在建立磁碟區時指定、以自訂結果。請參閱下方、以瞭解適用於您所設定儲存系統的選項。</block>
  <block id="11e1b165c1d718d825f4bb9aaf0b884e" category="doc">驅動程式專屬的Volume選項</block>
  <block id="bca0712c590c8d3c228bf1044aed730b" category="paragraph">在磁碟區建立作業期間使用這些選項非常簡單。在CLI操作期間、使用「-o」運算子來提供選項和值。這會覆寫Json組態檔中的任何等效值。</block>
  <block id="6021d91bdededf94b8ae37c30e820118" category="section-title">選購的選購配備ONTAP</block>
  <block id="16dc9caa069072a49db7ea7c81a7cf66" category="paragraph">NFS和iSCSI的Volume建立選項包括：</block>
  <block id="d3a07c97b6050b305c7dda0aea1657be" category="paragraph">Volume的大小、預設為1 GiB。</block>
  <block id="69e8c7b4f73d39cea9948875813f7ddd" category="paragraph">精簡或完整配置磁碟區、預設為精簡。有效值為「NONE」（精簡配置）和「Volume」（完整配置）。</block>
  <block id="91853d7e2338a1395280185fc93d4650" category="paragraph">這會將快照原則設定為所需的值。預設值為「無」、表示不會自動建立磁碟區的快照。除非您的儲存管理員加以修改、否則ONTAP 所有的各種系統都會有一個名為「預設」的原則、用來建立並保留六個每小時、每天兩個和每週兩個快照。快照中保留的資料可透過瀏覽至磁碟區任何目錄中的「.snapshot」目錄來還原。</block>
  <block id="b8a0fde33bd7662b7b9cb4158f04ef52" category="paragraph">這會將快照保留設定為所需的百分比。預設值為無值、表示ONTAP 如果您已選取snapshotPolicy、將選取snapshotReserve（通常為5%）、如果snapshotPolicy為無、則選取0%。您可以在組態檔中為所有ONTAP 的支援項目設定預設的snapshotReserve值、也可以將其用作所有ONTAP 不支援ONTAP-NAS-經濟功能的支援項目、作為所有支援項目的磁碟區建立選項。</block>
  <block id="0625856b9dc58db03a6e2c49b1f029e3" category="paragraph">當複製Volume時、ONTAP 這會導致停止實體複本、立即將其從父複本分割開來。預設值為「假」。部分複製磁碟區的使用案例、最好是在建立時立即將複本從父複本分割出來、因為不太可能有提高儲存效率的機會。例如，複製空白資料庫可節省大量時間，但儲存空間卻很少，因此最好立即分割實體複本。</block>
  <block id="be94792f601f829d9b2be22553c6bf31" category="paragraph">這將在新磁碟區上啟用NetApp Volume Encryption（NVE）、預設為「假」。必須在叢集上授權並啟用NVE、才能使用此選項。</block>
  <block id="23038d88eea805ac06a26959fc129ca5" category="admonition">Trident目前不支援NetApp Aggregate Encryption（NAE）。</block>
  <block id="cdaf246fba737b75127faa65456baa30" category="paragraph">設定要用於磁碟區的分層原則。這會決定資料在非作用中（冷）時是否移至雲端層。</block>
  <block id="1c46d85ab16f6b373409ad15260b1b0a" category="paragraph">下列其他選項適用於NFS * Only *：</block>
  <block id="b145a4acc7a577d843f538580013776b" category="paragraph">這會控制Volume本身的權限設定。依預設、權限會設為「-rwxr-x-x'」、或是以數字表示法0755、而「root」則是擁有者。文字或數字格式皆可運作。</block>
  <block id="76a4004d727b54162f2e0542094a89a3" category="paragraph">如果將此目錄設為「true」、則會讓存取磁碟區的用戶端看到「.snapshot」目錄。預設值為「假」、表示預設會停用「.snapshot」目錄的可見度。某些影像（例如官方MySQL映像）在出現「.snapshot」目錄時無法如預期般運作。</block>
  <block id="700d608597316c75fc869190f51cff49" category="paragraph">設定要用於磁碟區的匯出原則。預設值為「預設」。</block>
  <block id="6b068a846d408b1d9ccd2c7220326b9d" category="paragraph">設定用於存取磁碟區的安全樣式。預設值為「UNIX」。有效值為「UNIX」和「mixed」。</block>
  <block id="842aac52866a44b40a5733ce352cf6df" category="paragraph">下列其他選項僅適用於iSCSI *：</block>
  <block id="56efcdcb9168adcb146b4d86bf55e99d" category="cell">設定用於設定iSCSI磁碟區格式的檔案系統。預設值為「ext4」。有效值包括「ext3」、「ext4」和「xfs」。</block>
  <block id="a0ee23c5b4cbd6a28a4143933891f927" category="cell">"paceAllocate（配置）"</block>
  <block id="79686ba706c992e7385f0c5b28be8294" category="cell">如果將此值設為「假」、將會關閉LUN的空間分配功能。預設值為「true」、表示ONTAP 當磁碟區空間不足、且磁碟區中的LUN無法接受寫入時、功能區會通知主機。此選項也可讓ONTAP 支援功能在主機刪除資料時自動回收空間。</block>
  <block id="ff7c0fcd6a31e735a61c001f75426961" category="section-title">範例</block>
  <block id="9e6d454a094b92b0132e48d2369debf5" category="paragraph">請參閱下列範例：</block>
  <block id="be1e1c94a5fc3bb66c2ae9425eeefbdb" category="list-text">建立10GiB Volume：</block>
  <block id="a6490f19f59ecd8e4ed8634990ea366c" category="list-text">使用快照建立100GiB磁碟區：</block>
  <block id="297d0d2fcc555e5037c8d251daf5a620" category="list-text">建立已啟用setuid位元的磁碟區：</block>
  <block id="6e31a0481f4f7e423abcde0bf31025c8" category="paragraph">最小Volume大小為20MiB。</block>
  <block id="a65684b0a191599ad968126dd65f2e9d" category="paragraph">如果未指定快照保留、且快照原則為「無」、Trident將使用快照保留0%。</block>
  <block id="8c05fd71822bf85c290cef86db959f68" category="list-text">建立沒有快照原則且無快照保留的磁碟區：</block>
  <block id="d15d662af6e4417b0b7c134a84ed577c" category="list-text">建立不含快照原則的磁碟區、以及自訂快照保留10%的磁碟區：</block>
  <block id="52a56a468f11c3298931c8e32c938e15" category="list-text">建立具有快照原則和10%自訂快照保留的磁碟區：</block>
  <block id="0a77fdb1c16069c98ebe6510137af9d2" category="list-text">使用快照原則建立磁碟區、並接受ONTAP的預設快照保留（通常為5%）：</block>
  <block id="f6f813eaaff2b296a27b6bf051485d2b" category="section-title">Element軟體Volume選項</block>
  <block id="a514753df071ac540af065b659d1c65c" category="paragraph">元素軟體選項會顯示與磁碟區相關的服務品質（QoS）原則大小和品質。建立磁碟區時、會使用「-o type =service_level」命名法來指定與其相關的QoS原則。</block>
  <block id="f201e088f13d93e3d12b3c0ef78dece3" category="paragraph">使用元素驅動程式定義QoS服務層級的第一步、是建立至少一種類型、並在組態檔中指定與名稱相關的最小、最大和尖峰IOPS。</block>
  <block id="5cb7e4a4b6a51af0b5b09cb230b83422" category="paragraph">其他元素軟體磁碟區建立選項包括：</block>
  <block id="8730c4572b866ffc01a4aefebc896555" category="paragraph">磁碟區大小、預設為1GiB或組態項目... 「預設值」：｛"Size"："5G"｝。</block>
  <block id="d52146098b8ecd83b888289a86e26d19" category="cell">「區塊大小」</block>
  <block id="348ef18ccca06aa29547bd9ad87beebe" category="paragraph">使用512或4096、預設為512或組態項目預設BlockSizes。</block>
  <block id="1daf1c12549d6d3ae75c4d8d5f59d532" category="paragraph">請參閱下列QoS定義範例組態檔：</block>
  <block id="7afe0c73e341cee7c90b4d4dda4600d9" category="paragraph">在上述組態中、我們有三種原則定義：銅級、銀級和金級。這些名稱為任意名稱。</block>
  <block id="cb5b68dacb07bd02a5152bf4ad1de8c6" category="list-text">建立10GiB Gold Volume：</block>
  <block id="89014c611c13195dc852587ef9d2bb16" category="list-text">建立100GiB銅級磁碟區：</block>
  <block id="c3fa12e6fe179aa6330774fb658371a5" category="section-title">在GCP磁碟區選項上使用CVS</block>
  <block id="c112845976cf3ccb7ec927bea467b805" category="paragraph">GCP驅動程式上的CVS磁碟區建立選項包括：</block>
  <block id="3d9999cfb7d197cd40ffb0d665cf46a6" category="paragraph">磁碟區大小、CVS效能磁碟區的預設值為100 GiB、CVS磁碟區的預設值為300 GiB。</block>
  <block id="326ea14a491277cac4032c7b6413a545" category="paragraph">Volume的CVS服務層級預設為標準。有效值包括標準、高級和極高。</block>
  <block id="256a798c267200d8cfa583eecaa2cc31" category="paragraph">這會將快照保留設定為所需的百分比。預設值為無值、表示CVS會選取快照保留（通常為0%）。</block>
  <block id="4e984a8dd0f1e9f166c162b4c01da5d2" category="list-text">建立2TiB Volume：</block>
  <block id="39407360e3929c32bb19c04cf3549d2e" category="list-text">建立5TiB優質Volume：</block>
  <block id="077eacce80395f222c5785ca68ffe958" category="paragraph">CVS效能磁碟區的最小Volume大小為100 GiB、CVS磁碟區的最小Volume大小為300 GiB。</block>
  <block id="05891dbb3b7306197f5cd0da8f1768ef" category="section-title">選購的選購配備Azure NetApp Files</block>
  <block id="bda1cf59d924de8c8c73a8b619aace9c" category="paragraph">適用於此驅動程式的Volume Create選項Azure NetApp Files 包括：</block>
  <block id="742a301c15fea3569e5059520217090e" category="paragraph">磁碟區大小、預設為100 GB。</block>
  <block id="fe0bb617c9579d2f1d51ca5a627839fb" category="list-text">建立200GiB Volume：</block>
  <block id="84e002f675928fb7347e346a6214eefc" category="paragraph">最小Volume大小為100 GB。</block>
  <block id="fc96768681dcf6770119445ffe2537cd" category="summary">若要建立磁碟區、請使用標準的「docker volume」命令、並在需要時指定Astra Trident驅動程式名稱。</block>
  <block id="feabbbf9b5afb31194daf0d8e3ff75dc" category="doc">使用Volume</block>
  <block id="00e5ed77f92b42f144be7dfb7106bf10" category="paragraph">您可以使用標準的「磁碟區」命令、並在需要時指定Astra Trident驅動程式名稱、輕鬆建立、複製及移除磁碟區。</block>
  <block id="dc88dce8ec264777b2f90ec0af744f43" category="section-title">建立Volume</block>
  <block id="a32b09b1335e0afbb640a9412690680d" category="list-text">使用預設名稱建立具有驅動程式的磁碟區：</block>
  <block id="8b5708fe1297b9ca8b3be5b99bf29407" category="list-text">建立具有特定Astra Trident執行個體的Volume：</block>
  <block id="93da65a9fd0004d9477aeac024e08e15" category="inline-link-macro">選項</block>
  <block id="593e5c95e1adc19e8d81719c16b57bc1" category="admonition">如果您未指定任何 <block ref="3a0a40f90bfa29e0eb23418c553e5ef5" category="inline-link-macro-rx"></block>，將使用驅動程式的預設值。</block>
  <block id="1e1e2461d5dfd51f1ebd0eadcba142f4" category="list-text">覆寫預設的Volume大小。請參閱下列範例、以使用驅動程式建立20GiB磁碟區：</block>
  <block id="5149eec9d959a54cf392efaa710541d1" category="admonition">Volume大小以包含整數值的字串表示、並提供選用單位（例如：10g、20GB、3TiB）。如果未指定單位、則預設值為G大小單位可以表示為2（B、KiB、mib、GiB、TiB）或10（B、KB、MB、GB、TB）的冪。簡寫單元使用2（G = GiB、T = TiB、…）的權力。</block>
  <block id="9bc129eac7adf7ea5d8ed1c021fab2dc" category="section-title">移除Volume</block>
  <block id="281a0f40363a276c6ec125244c784112" category="list-text">移除Volume就像移除任何其他Docker Volume一樣：</block>
  <block id="7959e3701f7a7fba7713c7530d496324" category="admonition">使用「Poolidfire - san」驅動程式時、上述範例會刪除及清除磁碟區。</block>
  <block id="5a1345d94751fc14bedf8f6f5e77a0ff" category="paragraph">執行下列步驟以升級適用於Docker的Astra Trident。</block>
  <block id="d50044469c0bf9ab38eff9cf7243fb25" category="section-title">複製磁碟區</block>
  <block id="6798a0701cedf1202e1d70210a3a9a83" category="paragraph">使用「ONTAP-NAS」、「ONTAP-SAN」、「Poolidfire - SAN」和「GCP - CVS儲存驅動程式」時、Astra Trident可以複製磁碟區。使用「ONTAP-NAS-flexgroup」或「ONTAP-NAS-節約」驅動程式時、不支援複製。從現有磁碟區建立新磁碟區、將會產生新的快照。</block>
  <block id="9374b766b9dd78063440afd69afabf38" category="list-text">檢查磁碟區以列舉快照：</block>
  <block id="2747096689037792fa87de7a0e8440e2" category="list-text">從現有的Volume建立新的Volume。這將會產生新的快照：</block>
  <block id="31d9b5ed201aa44dbeae6d17d38c0c6f" category="list-text">從磁碟區上現有的快照建立新磁碟區。這不會建立新的快照：</block>
  <block id="516b30a46da41c6969cb7249d6567905" category="section-title">存取外部建立的磁碟區</block>
  <block id="d8c20bb137be94fec8295c3fc5175b54" category="paragraph">如果容器沒有分割區、而且Astra Trident支援其檔案系統、則您可以使用Trident * Only *來存取外部建立的區塊裝置（或其複製）（例如：無法透過Astra Trident存取「ext4」格式的「dev/sdc1」）。</block>
  <block id="27dce2b92c5c5b89e353888e6cb24dea" category="summary">您可以安全地升級適用於Docker的Astra Trident、而不會對使用中的磁碟區造成任何影響。在升級過程中、針對外掛程式的「docker volume」命令將會短暫失敗、而在外掛程式再次執行之前、應用程式將無法掛載磁碟區。在大多數情況下、這是幾秒鐘的事。</block>
  <block id="0350c5473efd300324aaaadeecc676d2" category="doc">升級或解除安裝Astra Trident</block>
  <block id="f683581d3e75f05f9d9215f9b4696cef" category="section-title">升級</block>
  <block id="ed279061e829314cb0dc7a1708ca5e5b" category="list-text">列出現有的磁碟區：</block>
  <block id="7c256ad076320e18e087b238e9063f3f" category="list-text">停用外掛程式：</block>
  <block id="f4ea3e4191f5bda0b91e08059bf9842a" category="list-text">升級外掛程式：</block>
  <block id="b2449107a206e37587b47513f76a7b27" category="admonition">18.01版的Astra Trident取代了nDVP。您應該直接從「NetApp/ndvp-plugin」映像升級至「NetApp/triident外掛程式」映像。</block>
  <block id="824ba648551a27da6c43705bcd663830" category="list-text">啟用外掛程式：</block>
  <block id="e4c48899ce42f4eb019f54a1a8e66560" category="list-text">確認外掛程式已啟用：</block>
  <block id="c4d884c606b57bb6cb43864e3499d5a2" category="list-text">確認磁碟區可見：</block>
  <block id="558ab0bef1894a7a726109d36632d09d" category="inline-link-macro">已知問題</block>
  <block id="103e515a078c6f2419abc4c84554d67c" category="admonition">如果您要從舊版的Astra Trident（20.10之前版本）升級至Astra Trident 20.10或更新版本、可能會發生錯誤。如需詳細資訊、請參閱 <block ref="6d21ff1c2708107ac3f4ed1a6e27b449" category="inline-link-macro-rx"></block>。如果您遇到錯誤、請先停用外掛程式、然後移除外掛程式、再傳遞額外的組態參數來安裝所需的Astra Trident版本：「Docker外掛程式安裝NetApp/Trident外掛程式：20.10 -別名NetApp --贈與All權限config=config.json」</block>
  <block id="a27dfe771799a09fd55fea73286eb6ab" category="section-title">解除安裝</block>
  <block id="7578be09dc225364649898a30619a336" category="paragraph">執行下列步驟以解除安裝適用於Docker的Astra Trident。</block>
  <block id="867d93c3d1de0e8e75fa408cfadcbba5" category="list-text">移除外掛程式所建立的任何磁碟區。</block>
  <block id="4a28a108f39c07ac09218644ca6e9bb0" category="list-text">移除外掛程式：</block>
  <block id="23c9c608b55b9071002aeddfd6c5563c" category="summary">您必須先在主機上安裝並設定必要的傳輸協定先決條件、才能部署Astra Trident。</block>
  <block id="782bd8949cb40c80fd3f3126eccab35a" category="doc">部署的先決條件</block>
  <block id="b4851e92b19af0c5c82447fc0937709d" category="inline-link-macro">需求</block>
  <block id="33446a91021b76dfabfca4afe312824a" category="list-text">確認您的部署符合所有的 <block ref="bc54c30334f793aa90542f3d86da0da6" category="inline-link-macro-rx"></block>。</block>
  <block id="d46ecc35447a8c17ef014ff6daf07bba" category="inline-link">安裝或更新</block>
  <block id="1035fa0ac2c3ed19f6ba56cafe7e121f" category="list-text">確認您安裝的Docker版本受支援。如果您的Docker版本過時、<block ref="0b011811ae105895ca4da9769d7e6f99" category="inline-link-rx"></block>。</block>
  <block id="7760c52227ccba10f5bc395571ca7a60" category="list-text">確認已在您的主機上安裝及設定通訊協定先決條件：</block>
  <block id="888a77f5ac0748b6c8001822417df8b6" category="cell">傳輸協定</block>
  <block id="696c660ff8d9323e55146a6dbd4e4088" category="cell">作業系統</block>
  <block id="c441ee50c88f6e5e3a7c69fc69dad8b8" category="cell">命令</block>
  <block id="1d1a594959ec615f56516f5d0f5e8ddb" category="cell">NFS</block>
  <block id="3fb1c9901f28248a22f47bd3917b5dc9" category="paragraph">RHEL/CentOS</block>
  <block id="e0b19bed1baf46134f4079471e193b01" category="paragraph">「Udo yum install -y ns-utils」</block>
  <block id="7eaf289636bc8d4f8b29b333a0f32dc2" category="paragraph">Ubuntu / DEBIAN</block>
  <block id="1054b270f1635a3dd940e995cbc7ed78" category="paragraph">「Udo apt-Get install -y nfs通用」</block>
  <block id="e4e1c13bb0b14f6cb7608cbecea948ef" category="cell">iSCSI</block>
  <block id="8cd5b262d8d9950185128d052d55f7c8" category="list-text">安裝下列系統套件：</block>
  <block id="6bbf3284462dc8b9b90cb1adcd1c0ff4" category="paragraph">「Udo yum install -y lsscsi iscsi-initiator－utils sg3_utils device-mapper-multipath'</block>
  <block id="7f50d5e5825124658e17cc8cfaa7f823" category="list-text">啟動多重路徑精靈：</block>
  <block id="87772a853423d643181e2b56bcb4b17f" category="paragraph">「Udo mpathconf --enable --with _docathd y」</block>
  <block id="43ce2a55c085b27f271203155d2745e1" category="list-text">確保已啟用並執行「iscsid」和「multipathd」：</block>
  <block id="04c298ec3fc67bce1115cddcc2b3b829" category="paragraph">「Udo systemctl enable iscsid multipathd」「show systemcl start iscsid multipathd」</block>
  <block id="2cfaa468af4e9de7ba9933d9e0081572" category="list-text">探索iSCSI目標：</block>
  <block id="f0c700b766cfcc86bc21496513c58391" category="paragraph">「Udo iscsiadm -m flexdb -t -p &lt;data_lif_ip&gt;--fiscose'」</block>
  <block id="18124bf28831e04dabc4dc81d1d4e69f" category="list-text">登入探索到的iSCSI目標：</block>
  <block id="ba64ec4efdc69990967a75a918b83635" category="paragraph">「Udo iscsiadm -m nodes -p &lt;data_Lif_ip&gt;--login'</block>
  <block id="8018f5d6ddc4e67678d1659757828deb" category="list-text">啟用並啟動「iSCSI」：</block>
  <block id="8bd830b1ea0595874b57cfd34c877123" category="paragraph">「Udo systemctl enable iscsi」、「show systemcl start iscsi」</block>
  <block id="28ea88befb3a7f6a8e98e7ea7a4fd35f" category="paragraph">「Udo apt-Get install -y open-iscsi sg3-utils multipath-tools scsitols」</block>
  <block id="d0b02d407fd5c75d0e7eac549a852191" category="list-text">啟用多重路徑：</block>
  <block id="e6693412ed2252a87ece3f264fb334ed" category="paragraph">「Udo tee /etc/multipath.conf」&lt;-'EOF'預設值｛user_fusive_names yes focs_multipaths yes｝EOF Sudo服務多重路徑工具重新啟動。</block>
  <block id="8bec0eea71974a9138ccfa96983ddcfc" category="list-text">確保運行的是"iscsid"和"multipathd"：</block>
  <block id="0d29eaa34aa7badaae0d49b35a2a0d12" category="paragraph">「Udo服務open-iSCSI start Sudo服務multipath-ttools start」</block>
  <block id="4cfa22b281cbd36e1a275d61ec23a9b4" category="summary">您可以收集記錄以協助疑難排解。收集記錄的方法會因執行Docker外掛程式的方式而有所不同。</block>
  <block id="fe1786b49549e8e06a89b9c57d7fc514" category="doc">收集記錄</block>
  <block id="83f4d02d2dd31f09291e098bf4ae502b" category="list-text">如果您使用建議的託管外掛程式方法執行Astra Trident（亦即使用「docker plugin」命令）、請依照下列方式檢視：</block>
  <block id="17c40798131b12188d43b1a90dabfc69" category="paragraph">標準記錄層級應可讓您診斷大多數問題。如果您發現這還不夠、可以啟用偵錯記錄。</block>
  <block id="c28722abec5c1daefa02916119bbff91" category="list-text">若要啟用除錯記錄、請安裝已啟用除錯記錄的外掛程式：</block>
  <block id="b142025dd533fb27bf7df1a93c55e311" category="paragraph">或者、當外掛程式已安裝時、請啟用偵錯記錄功能：</block>
  <block id="98e6888e14bd8bcd734870a8331ca6ea" category="list-text">如果您在主機上執行二進位檔本身、則記錄檔可在主機的「/var/log/netappdvp」目錄中使用。若要啟用偵錯記錄、請在執行外掛程式時指定「-DEBUG」。</block>
  <block id="2aa0797ce5da04d1c6f027c9b3276483" category="section-title">一般疑難排解秘訣</block>
  <block id="94d799ff06bdb0aedb7b64151dac73d7" category="list-text">新使用者最常遇到的問題是組態錯誤、導致外掛程式無法初始化。發生這種情況時、當您嘗試安裝或啟用外掛程式時、可能會看到如下訊息：</block>
  <block id="fe6b4529e706ebc0f7e3668d3230d029" category="paragraph">「精靈的錯誤回應：請撥打UNIX /run / dock/plugins/&lt;id&gt;/NetApp.sock：Connect：沒有這類檔案或目錄」</block>
  <block id="3d924bd43304301ed127cbbd303a4fa6" category="paragraph">這表示外掛程式無法啟動。幸運的是、外掛程式是以全方位的記錄功能打造而成、可協助您診斷大部分可能遇到的問題。</block>
  <block id="79c820c2d64495c47651e58e73f97294" category="list-text">如果將PV掛載到容器時發生問題、請確定已安裝並執行「rpcbind」。使用主機作業系統所需的套件管理程式、檢查「rpcbind」是否正在執行。您可以執行「stystemctl狀態rpcbind」或其等效項目來檢查rpcbind服務的狀態。</block>
  <block id="c2bccf4258de19dd1e03e25f66d80f98" category="summary">尋找使用Astra Trident搭配Docker時已知問題的相關資訊。</block>
  <block id="3a3b7ac2e39541ea05707ccd6eb054d4" category="doc">已知問題與限制</block>
  <block id="ba6bb78ba304725781af9e773f1957e2" category="paragraph">尋找使用Astra Trident搭配Docker時已知問題和限制的相關資訊。</block>
  <block id="8bb35988eac5a841d2af092365f1aa42" category="section-title">從舊版升級Trident Docker Volume外掛程式至20.10及更新版本、會導致升級失敗、且不會發生此類檔案或目錄錯誤。</block>
  <block id="7aebfa1e2291377e040de92d7f7f335f" category="list-title">因應措施</block>
  <block id="f49f11bc5398ac13e500d16eac424e77" category="list-text">停用外掛程式。</block>
  <block id="cc3dae6dd6670606c41c62b10273605e" category="list-text">移除外掛程式。</block>
  <block id="6010901b5c4bb6ad671e6f07fcc038d8" category="list-text">提供額外的「config」參數、重新安裝外掛程式。</block>
  <block id="e527ab8c1c51767e38a3603d51d2d6e5" category="section-title">Volume名稱長度必須至少2個字元。</block>
  <block id="45c9df594d13c8a5e5472503d5f14b01" category="inline-link">請參閱錯誤25773</block>
  <block id="c167efd138e06a8ee59885983c5ddf69" category="admonition">這是Docker用戶端的限制。用戶端會將單一字元名稱解譯為Windows路徑。<block ref="f082f49b923960d888c1d98a1e9f4fcb" category="inline-link-rx"></block>。</block>
  <block id="3c4f022a33d4aace82350c9966fa238b" category="section-title">Docker swarm具有某些行為、可防止Astra Trident在每個儲存設備和驅動程式組合中支援它。</block>
  <block id="a7c3ff464b1ef4364de4df03d66bee5e" category="list-text">Docker swarm目前使用Volume名稱、而非Volume ID做為其唯一的Volume識別碼。</block>
  <block id="61ab6f5cff8de89cba95d9e3bbc4ff71" category="list-text">Volume要求會同時傳送至swarm叢集中的每個節點。</block>
  <block id="521e51548c3f7c96e72d432edf4af42d" category="list-text">Volume外掛程式（包括Astra Trident）必須在swarm叢集中的每個節點上獨立執行。由於功能不一、ONTAP 「ONTAP-NAS」和「ONTAP-SAN」驅動程式的運作方式、因此它們是唯一能夠在這些限制範圍內運作的驅動程式。</block>
  <block id="69418caf7b92279073f695612c68de99" category="paragraph">其餘的驅動程式可能會受到競爭狀況等問題的影響、導致在單一要求中建立大量磁碟區、而不需要明確的「贏家」；例如、Element的功能可讓磁碟區擁有相同名稱但不同ID。</block>
  <block id="48cbf13b390ff021b130d5f372147af5" category="paragraph">NetApp已向Docker團隊提供意見回饋、但沒有任何未來追索的跡象。</block>
  <block id="29cff148f43bc689eb14447b333f6f83" category="section-title">如果配置的是某個功能區、則如果第二個功能區的一個或多個集合體與要配置的功能區相同、則不提供第二個功能區。FlexGroup ONTAP FlexGroup FlexGroup FlexGroup</block>
  <block id="c412f3b9b270250331aa1ef4102ef8c1" category="summary">如果您想要同時使用多個儲存組態、則需要使用多個Astra Trident執行個體。多個執行個體的關鍵是在主機上具現化Trident時、使用容器化外掛程式的-alias選項、或是-volume驅動程式選項、為它們指定不同的名稱。</block>
  <block id="4f07a71d2e33da91dec1396b7a204a40" category="doc">管理多個Astra Trident執行個體</block>
  <block id="8f327f2ceda84404290184a7454160ed" category="paragraph">當您想要同時使用多個儲存組態時、需要多個Trident執行個體。多個執行個體的關鍵是在主機上具現化Trident時、使用容器化外掛程式的「-alias」選項或「-volume驅動程式」選項、為它們指定不同的名稱。</block>
  <block id="52ef1c6ffefaba3249f208369424635d" category="section-title">Docker託管外掛程式（1.3/17.03版或更新版本）的步驟</block>
  <block id="547c4a5f7c863aad85f5265c03ed72ea" category="list-text">啟動第一個指定別名和組態檔的執行個體。</block>
  <block id="991ac134f22efa2bb955362d95827ae5" category="list-text">啟動第二個執行個體、指定不同的別名和組態檔。</block>
  <block id="aa0dc0ac69e69c434317798e1aa9842b" category="list-text">建立磁碟區、將別名指定為驅動程式名稱。</block>
  <block id="5ae25a45ab76de161f87fc41a84f746d" category="paragraph">例如、黃金Volume：</block>
  <block id="6dab7c53f6e3de2eae52e928dfe5b861" category="paragraph">例如、對於銀級Volume：</block>
  <block id="67754cb209925946943e297b3a8be344" category="section-title">傳統的步驟（1.12版或更早版本）</block>
  <block id="cbd128765e82966ed5e454a99b22e688" category="list-text">使用自訂驅動程式ID以NFS組態啟動外掛程式：</block>
  <block id="51c923daa4caf6aea6d24201b73871b6" category="list-text">使用自訂驅動程式ID以iSCSI組態啟動外掛程式：</block>
  <block id="dd72ade865d731ba8f6a6fc4c8ccd86f" category="list-text">為每個驅動程式執行個體配置Docker磁碟區：</block>
  <block id="8e2044cc9d4e8f515ad4809a68d75465" category="paragraph">例如、對於NFS：</block>
  <block id="d39eb6e4299503c5d451d19b9645be42" category="paragraph">例如、對於iSCSI：</block>
  <block id="ea3d51fb2b16acb7cb260f25bc8965b1" category="summary">Astra Trident是由NetApp維護的開放原始碼儲存資源配置程式和Orchestrator。它可讓您為Docker和Kubernetes所管理的容器化應用程式建立儲存磁碟區。</block>
  <block id="65b584d1b3cd0ab857283c862b5ddc53" category="doc">Astra Trident 22.04文件</block>
  <block id="30d965eef5ba25c6b9998ae38270b43e" category="doc">法律聲明</block>
  <block id="e9c44bbfd795a5d63d74c6a77afee70d" category="paragraph">法律聲明提供版權聲明、商標、專利等存取權限。</block>
  <block id="6016a2b341113bf496b719905398ecd2" category="section-title">版權</block>
  <block id="09e95b77ffe81fe465a83ba99efad5c8" category="paragraph"><block ref="09e95b77ffe81fe465a83ba99efad5c8" category="inline-link-rx"></block></block>
  <block id="126a02652da6de02962cf1b654fd6376" category="section-title">商標</block>
  <block id="c4ce4761e466527d26b3e3d5ed1006fd" category="paragraph">NetApp 、 NetApp 標誌及 NetApp 商標頁面上列出的標章均為 NetApp 、 Inc. 的商標。其他公司與產品名稱可能為其各自所有者的商標。</block>
  <block id="7aa531e9acfe2b98e34d2c92fe9846ff" category="paragraph"><block ref="7aa531e9acfe2b98e34d2c92fe9846ff" category="inline-link-rx"></block></block>
  <block id="be89498d2f8a22ce47c02ba9795fe2af" category="section-title">專利</block>
  <block id="d0b19d36be2c5f16e9aef46c8a452d3d" category="paragraph">如需最新的 NetApp 擁有專利清單、請參閱：</block>
  <block id="d7f1fbcf9ce4e42f705add574d262b2c" category="paragraph"><block ref="d7f1fbcf9ce4e42f705add574d262b2c" category="inline-link-rx"></block></block>
  <block id="56c34c6410dd45c5cec44149ad0ce037" category="section-title">隱私權政策</block>
  <block id="fc248f74f5e36542f7f5627b8610e9a3" category="paragraph"><block ref="fc248f74f5e36542f7f5627b8610e9a3" category="inline-link-rx"></block></block>
  <block id="c0227cef6f07a8cd2ac72f2945b031aa" category="section-title">開放原始碼</block>
  <block id="0172b29a9f5d94dc62ee592a98183f3b" category="paragraph">您可以在每個版本的通知檔案中檢閱NetApp軟體中用於Astra Trident的協力廠商版權與授權、網址為<block ref="4a3c8c5a408c6db1c44c04391a8a0a2f" category="inline-link-rx"></block>。</block>
  <block id="02030c8e07c049062fbbba9a32b01067" category="summary">虛擬儲存資源池可在Astra Trident的儲存後端與Kubernetes的StorageClass之間提供抽象層。管理員可透過通用的後端不受後端限制的方式、定義各個層級的位置、效能及保護、而無需使用StorageClass來指定要用於符合所需條件的實體後端、後端集區或後端類型。</block>
  <block id="9f802733184b3e0fb080eddcf9ffeaef" category="doc">虛擬儲存資源池</block>
  <block id="9f4406586d4a2343f2a5289e16131b3e" category="paragraph">虛擬儲存資源池可在Astra Trident的儲存後端與Kubernetes的「torageClass」之間提供抽象層。系統管理員可透過通用的後端不受後端限制的方式、定義位置、效能及每個後端的保護等層面、而無需設定「儲存類別」、以指定要使用何種實體後端、後端集區或後端類型來滿足所需的條件。</block>
  <block id="a4ff8f21d8d1ba289de3b08d19afbeab" category="paragraph">儲存管理員可在Json或Yaml定義檔案的任何Astra Trident後端上定義虛擬儲存池。</block>
  <block id="1c65ff50dcc9738f0ae4169e4f66589c" category="image-alt">顯示虛擬儲存資源池的概念性圖表。</block>
  <block id="2a778cf7220cdde142651975e1bcd90f" category="paragraph">在虛擬資源池清單之外指定的任何層面、都會對後端進行全域設定、並套用至所有虛擬資源池、而每個虛擬資源池則可個別指定一個或多個層面（覆寫任何後端全域層面）。</block>
  <block id="6aefc2a02fa1ec1f6ac8e9dbd5104efe" category="admonition">定義虛擬儲存集區時、請勿嘗試重新排列後端定義中現有虛擬集區的順序。此外、建議您不要編輯/修改現有虛擬資源池的屬性、改為定義新的虛擬資源池。</block>
  <block id="5a53576f0ba98311e845ad0243bed6b7" category="paragraph">大部分方面都是以後端特定的詞彙來指定。最重要的是、高寬比值不會暴露在後端驅動程式之外、也無法在「儲存類別」中進行比對。而是由系統管理員為每個虛擬資源池定義一或多個標籤。每個標籤都是「金鑰：值配對」、而且標籤可能在獨特的後端之間通用。如同個別層面、標籤可依資源池指定、也可全域指定至後端。不同於具有預先定義名稱和值的各個層面、系統管理員有充分的判斷權、可視需要定義標籤金鑰和值。</block>
  <block id="a4d6bfb65b6541e04772c0d5180e726e" category="paragraph">「torageClass」會參照選取元參數中的標籤、來識別要使用的虛擬資源池。虛擬資源池選取器支援六個運算子：</block>
  <block id="e1b3ec89ead7f83a9245ed5c9cacfdbf" category="cell">營運者</block>
  <block id="499badcb6f450c7f46c51d873eb84286" category="cell">`='</block>
  <block id="354653142ec321459dfd6d71444e992e" category="cell">效能=優異</block>
  <block id="d2c49c25d96d87e40bc641b9d5302b36" category="cell">資源池的標籤值必須相符</block>
  <block id="5a5292b0a0d0379f0f1b12801b09b266" category="cell">！！=</block>
  <block id="eccde6822783bd75209c9b6a2d357f6c" category="cell">效能！=極致</block>
  <block id="2944853a5f146abd2671adbecd5c25a3" category="cell">集區的標籤值不得相符</block>
  <block id="ae2bef277194f73d24a36a78009aac1e" category="cell">《in》</block>
  <block id="f8cf8c23afb5459dbf7c24b685caf85b" category="cell">位置（東部、西部）</block>
  <block id="26aac934d614b1b3e5db46d8fc664ec6" category="cell">集區的標籤值必須位於一組值中</block>
  <block id="1a031eecbce49366e550273b9321b909" category="cell">《不」</block>
  <block id="b5585f3f9b45f391fee5dd15e6516450" category="cell">效能附註（銀、銅）</block>
  <block id="499fec8ad2646f2de982559111e26a4c" category="cell">集區的標籤值不得為b</block>
  <block id="4d5445eb6c70cdab8d3ad5e71367f42a" category="summary">深入瞭解Astra Trident如何為其驅動程式建立磁碟區快照。</block>
  <block id="e9c3828cd06711f9036bb4ce862a32c5" category="doc">Volume快照</block>
  <block id="a264f15eaddf1d50155847119366be6b" category="list-text">對於「ONTAP-NAS」、「ONTAP-SAN」、「GCP-CVS」和「azure-NetApp-files'」等驅動程式、每個「持續Volume（PV）」都會對應FlexVol 到一個版本。因此、磁碟區快照會建立為NetApp快照。NetApp的Snapshot技術提供比競爭快照技術更高的穩定性、擴充性、可恢復性和效能。這些Snapshot複本無論在建立所需的時間、還是在儲存空間中、都能發揮極高的效率。</block>
  <block id="cf282b9c05ab0f84b1690e644cd3f68e" category="list-text">對於「ONTAP-NAS-flexgroup」驅動程式、每個「持續Volume」（PV）都會對應FlexGroup 到一個VMware。因此、磁碟區快照會建立為NetApp FlexGroup 的「資訊快照」。NetApp的Snapshot技術提供比競爭快照技術更高的穩定性、擴充性、可恢復性和效能。這些Snapshot複本無論在建立所需的時間、還是在儲存空間中、都能發揮極高的效率。</block>
  <block id="98c670ffe759cc20cd8a31d49bd0b4fc" category="list-text">對於「ontap-san經濟」驅動程式、PV會對應至在共享FlexVols上建立的LUN。PV的Volume Snapshot是透過執行相關LUN的FlexClones來達成的。ONTAP的FlexClone技術幾乎可以即時建立最大資料集的複本。複本會與其父實體共用資料區塊、除了中繼資料所需的儲存空間外、不需要使用任何儲存設備。</block>
  <block id="9dbabbadda024bb7b1d0db43ab31b45f" category="list-text">對於「Poolidfire - san」驅動程式、每個PV對應至NetApp Element 在該軟體/NetApp HCI叢集上建立的LUN。Volume Snapshot以基礎LUN的元素快照來表示。這些快照是時間點複本、只佔用少量系統資源和空間。</block>
  <block id="34f731018ae783f70901b14b4950c3a7" category="list-text">使用「ONTAP-NAS」和「ONTAP-SAN」驅動程式時、ONTAP 不只是FlexVol 指時間點的複本、還會佔用FlexVol 整個過程中的空間。這可能會產生磁碟區中的可寫入空間量、以便在建立/排程快照時縮短時間。解決此問題的一種簡單方法、就是透過Kubernetes調整大小來擴充磁碟區。另一個選項是刪除不再需要的快照。當透過Kubernetes建立的Volume Snapshot被刪除時、Astra Trident會刪除相關的ONTAP 功能快照。不透過Kubernetes建立的支援快照也可以刪除。ONTAP</block>
  <block id="1eb824f8d9b30b3f4e089938e719fefe" category="paragraph">有了Astra Trident、您可以使用Volume Snapshot來建立新的PV。使用FlexClone技術建立這些快照的PV、以支援ONTAP 支援的支援的支援功能和CVS後端。從快照建立PV時、備份磁碟區是Snapshot父磁碟區的FlexClone。「Poolidfire - san」驅動程式使用Element軟體磁碟區複製、從快照建立PV。在此、它會從元素快照建立複本。</block>
  <block id="ae8e28c37a725c4bb4a74663ac8615ea" category="summary">深入瞭解Astra Trident如何使用Volume存取群組。</block>
  <block id="b4621305109716b02eed0cf25fabab13" category="doc">Volume存取群組</block>
  <block id="33911b1eec54b4b5a7fbc504e6569989" category="inline-link">Volume存取群組</block>
  <block id="649833006ff7b612c3d988173b6417d5" category="paragraph">深入瞭解Astra Trident的使用方式<block ref="783dd6ea9e0b09c84db9ccd072a61c55" category="inline-link-rx"></block>。</block>
  <block id="e93c18adf30bc91499234d0ec7863499" category="admonition">如果您使用的是CHAP、建議您略過本節、以簡化管理並避免以下所述的擴充限制。此外、如果您在「csi」模式中使用Astra Trident、則可以忽略本節。Astra Trident在安裝為增強的SCSI資源配置程式時、會使用CHAP。</block>
  <block id="3c56a859b413098b6bf2c54aff32a842" category="paragraph">Astra Trident可使用Volume存取群組來控制其所配置之磁碟區的存取。如果停用CHAP、除非您在組態中指定一或多個存取群組ID、否則會尋找稱為「Trident」的存取群組。</block>
  <block id="025d19ee81e813e3ba40553cd4908638" category="paragraph">雖然Astra Trident會將新磁碟區與已設定的存取群組建立關聯、但它不會自行建立或管理存取群組。存取群組必須先存在、儲存後端才會新增至Astra Trident、而且必須包含Kubernetes叢集中每個節點的iSCSI IQN、這些節點可能會掛載該後端所配置的磁碟區。在大多數安裝中、這包括叢集中的每個工作節點。</block>
  <block id="dff8ca466bae899e4dbc68c3a552033f" category="paragraph">對於具有超過64個節點的Kubernetes叢集、您應該使用多個存取群組。每個存取群組最多可包含64個IQN、每個磁碟區可屬於四個存取群組。在設定最多四個存取群組的情況下、叢集中最多256個節點的任何節點都能存取任何磁碟區。如需Volume存取群組的最新限制、請參閱<block ref="ac4000c3a85e5909daa6593f9f0617fd" category="inline-link-rx"></block>。</block>
  <block id="4f5254b466f691d7b0c50fb0d8286075" category="paragraph">如果您要將組態從使用預設的「三叉」存取群組修改為使用其他存取群組、請在清單中加入「三叉」存取群組的ID。</block>
  <block id="d00888bc1409d1c598b90af117bd3551" category="summary">Astra Trident的資源配置有兩個主要階段。第一階段會將儲存類別與一組適當的後端儲存資源池建立關聯、並在進行資源配置之前做好必要準備。第二階段包括磁碟區建立本身、並要求從與擱置磁碟區儲存類別相關的儲存資源池中選擇儲存資源池。</block>
  <block id="89c3bcf0ecc1114f8d19734d9156cb40" category="doc">資源配置</block>
  <block id="2bd42f922a8c0b54b90557eba2071a76" category="paragraph">將後端儲存資源池與儲存類別建立關聯、取決於儲存類別所要求的屬性及其「儲存資源池」、「附加儲存資源池」及「排除儲存資源池」清單。當您建立儲存類別時、Trident會比較每個後端所提供的屬性和集區、以及儲存類別所要求的屬性和集區。如果儲存資源池的屬性和名稱符合所有要求的屬性和資源池名稱、Astra Trident會將該儲存資源池新增至該儲存類別適用的儲存資源池集合。此外、Astra Trident也會將「addionalStoragePools」清單中列出的所有儲存集區新增至該集、即使其屬性無法滿足所有或任何儲存類別的要求屬性。您應該使用「排除StoragePools」清單來覆寫及移除儲存類別的儲存資源池。每次新增後端時、Astra Trident都會執行類似的程序、檢查其儲存集區是否符合現有儲存類別的儲存集區、以及是否移除任何已標記為「已排除」的儲存資源池。</block>
  <block id="668ccb4dd1c284f07a3062637c57d21a" category="paragraph">Astra Trident接著會使用儲存類別與儲存資源池之間的關聯、來決定要在何處配置磁碟區。當您建立Volume時、Astra Trident會先取得該磁碟區儲存類別的儲存集區集區集區、 此外、如果您指定磁碟區的傳輸協定、Astra Trident會移除無法提供所需傳輸協定的儲存資源池（例如、NetApp HCI / SolidFire後端無法提供檔案型磁碟區、ONTAP 而非由NAS後端提供區塊型磁碟區）。Astra Trident會隨機排列此結果集的順序、以利均勻散佈磁碟區、然後透過磁碟區重複資料、進而嘗試在每個儲存集區上配置磁碟區。如果某個項目成功、則會成功傳回、並記錄程序中發生的任何故障。Astra Trident返回故障*僅當*無法在* all *上配置所需儲存類別和傳輸協定可用的儲存資源池時。</block>
  <block id="48dec026afe488df8faca35c5c3a39ea" category="summary">瞭解如何在您的Trident安裝中建立及使用Element後端。</block>
  <block id="f58e95baa778c9a2bd1a4597fb49d9b7" category="doc">驅動程式ONTAP</block>
  <block id="0e842f431ce1b4dfb57598e5682e3adc" category="paragraph">Astra Trident提供五ONTAP 種獨特的Intel儲存驅動程式、可與ONTAP 各種叢集進行通訊。深入瞭解每個驅動程式如何處理磁碟區的建立、存取控制及其功能。</block>
  <block id="48cf24486d9a8e65a142b25682f19949" category="cell">驅動程式</block>
  <block id="1b5e109e8afd1f9b7f5bbf951eea3442" category="cell">Volume模式</block>
  <block id="d5e2d9f8d8f10044e38b71b49e675d2e" category="cell">支援的存取模式</block>
  <block id="15971126972a002fcddb2c507534e371" category="cell">支援的檔案系統</block>
  <block id="00055dac2ba112b87a95a368075b9561" category="cell">「ONTAP-NAS」</block>
  <block id="ac52cf637478f3656a1fdee5c02324fd" category="paragraph">檔案系統</block>
  <block id="0d3a79885df431b0b67b50b9479e2fee" category="paragraph">rwo、rwx、ROX</block>
  <block id="9f47e55b538b64923f2ee8c19bc6887a" category="paragraph">」、NFS</block>
  <block id="cecdaed309330a9e7dea16b2076957ee" category="cell">《ONTAP-NANAS經濟》</block>
  <block id="2b8ac774302bd45e0ad531e434d8cd6d" category="cell">「ONTAP-NAA-flexgroup」</block>
  <block id="cd17e7ed84c40a0ff5ecb8b625b1f186" category="cell">「ONTAP-SAN」</block>
  <block id="e1e4c8c9ccd9fc39c391da4bcd093fb2" category="paragraph">區塊</block>
  <block id="aa91b58ced7ef060eb0e27ac4e1d18a8" category="paragraph">rwo、ROX、rwx</block>
  <block id="bc2e0aeb951ff36e6703a1ff5419eb02" category="paragraph">無檔案系統。原始區塊裝置</block>
  <block id="0b86d82002caac6130185da4ef1be67e" category="paragraph">Rwo、ROX</block>
  <block id="a029cca698cbf05f07897f86c43cf9e8" category="paragraph">《xfs》、《ext3》、《ext4》</block>
  <block id="73b781a615cea2647a87ff2035e296b1" category="cell">《ONTAP-san經濟》</block>
  <block id="4ff78ba07210a8b4db65f6ef62b4e1b4" category="admonition">使用安全角色（使用者名稱/密碼）的登入認證、或使用安裝在叢集上的私密金鑰和憑證、即可驗證支援服務。ONTAP ONTAP您可以更新現有的後端、以「tridentctl update backend」從一個驗證模式移到另一個驗證模式。</block>
  <block id="d6601a8eb863a49ea065281f70a5956b" category="summary">Astra Trident是NetApp在Astra產品系列中所維護的完整支援開放原始碼專案。其設計旨在協助您使用業界標準介面（例如Container Storage介面（SCSI））來滿足容器化應用程式的持續需求。</block>
  <block id="8a7354f894ef62fb3f076510315bf206" category="doc">Astra Trident簡介</block>
  <block id="bb453665f57f6823950856f7a9bad0c3" category="inline-link-macro">Astra產品系列</block>
  <block id="9f469e7cb13566d8a664e8ab4d46f9e1" category="paragraph">Astra Trident是由NetApp維護的完整支援開放原始碼專案、也是其中的一部分 <block ref="a1650a2308dbba03b9ca704756a5a37d" category="inline-link-macro-rx"></block>。其設計旨在協助您使用業界標準介面（例如Container Storage介面（SCSI））來滿足容器化應用程式的持續需求。</block>
  <block id="5db45af67ca348841844b1b2503a2aee" category="paragraph">Astra Trident將Kubernetes叢集部署為Pod、為Kubernetes工作負載提供動態儲存協調服務。它可讓您的容器化應用程式快速輕鬆地使用NetApp廣泛產品組合中的持續儲存設備、包括ONTAP ：VMware的VMware產品組合（AFF/FAS/Select/Cloud / Amazon FSX for NetApp ONTAP ）、Element軟體（NetApp HCI / SolidFire）、Astra Data Store、Azure NetApp Files 以及VMware服務、Cloud Volumes Service 以及Google Cloud上的VMware。</block>
  <block id="7c738d9c13e4e5770c6b455ab345afd7" category="paragraph">Astra Trident也是NetApp Astra的一項基礎技術、運用NetApp領先業界的資料管理技術、提供快照、備份、複寫及複製等快照、備份、複寫及複製功能、為Kubernetes工作負載提供資料保護、災難恢復、可攜性及移轉使用案例。</block>
  <block id="4bd05efa612e48dd723de2bdd29f88e2" category="section-title">支援的Kubernetes叢集架構</block>
  <block id="85b179f2c10f76f0171b4d9d3f2d5171" category="paragraph">下列Kubernetes架構支援Astra Trident：</block>
  <block id="c91cda04d3ac5ae2da327d347d4bbefe" category="cell">Kubernetes叢集架構</block>
  <block id="eaa4dc5078017a5c5bebf383ab6f5124" category="cell">支援</block>
  <block id="c0057eecd4b1a67d11dc801b8992a574" category="cell">預設安裝</block>
  <block id="0c69c79a8788e0e4572d0c4838e69401" category="cell">單一主機、運算</block>
  <block id="93cba07454f06a4a960172bbd6e2a435" category="cell">是的</block>
  <block id="1fc3441370ae575a64d605fcd15a05fd" category="cell">多重主機、運算</block>
  <block id="7cb2eb9488f3532834f7ef233ae894dd" category="cell">Master、「etcd」、運算</block>
  <block id="5e5f49db20e29f6377e57e98932dae57" category="cell">主要、基礎架構、運算</block>
  <block id="ae663d0d321764bd88b8d864cd3afc9e" category="section-title">什麼是Astra？</block>
  <block id="dd91e88f9a6ec30684f494c41baeeee0" category="paragraph">Astra可讓企業更輕鬆地管理、保護及搬移在公有雲內部及內部部署的Kubernetes上執行的資料豐富的容器化工作負載。Astra透過NetApp在公有雲和內部部署環境中備受肯定且廣泛的儲存產品組合、運用Astra Trident來提供持續的容器儲存設備。此外、它還提供一組豐富的進階應用程式感知資料管理功能、例如Snapshot、備份與還原、活動記錄、以及資料保護、災難/資料恢復、資料稽核、以及Kubernetes工作負載的移轉使用案例等主動複製功能。</block>
  <block id="165fe4b78b5877cf8db8ac6361e5c85a" category="paragraph">您可以在Astra頁面註冊免費試用。</block>
  <block id="d13de4a83d7b44c2e65495def8ef1c7b" category="section-title">以取得更多資訊</block>
  <block id="fa80e31eb77798b8dd995ddd9553be6e" category="inline-link">NetApp Astra產品系列</block>
  <block id="ed394f5572d8e7df474126557b3288f8" category="list-text"><block ref="ed394f5572d8e7df474126557b3288f8" category="inline-link-rx"></block></block>
  <block id="ef22ff17624b3faeed227ce5c717eb5f" category="inline-link">Astra Control Service文件</block>
  <block id="0ae0ea6967e9321db008cee4ad5f290c" category="list-text"><block ref="0ae0ea6967e9321db008cee4ad5f290c" category="inline-link-rx"></block></block>
  <block id="3a4b2c66d4bdac6ce0e3340c71a39eda" category="inline-link">Astra Control Center文件</block>
  <block id="ea643bf7aaf130341a17f697a7009368" category="list-text"><block ref="ea643bf7aaf130341a17f697a7009368" category="inline-link-rx"></block></block>
  <block id="be1c3d3113c4023e29e8dd947523c711" category="inline-link">Astra Data Store文件</block>
  <block id="c54241e3258a450b02a723d6d751a4f1" category="list-text"><block ref="c54241e3258a450b02a723d6d751a4f1" category="inline-link-rx"></block></block>
  <block id="9d6ffa6ef31bd0b92876314219f18ef5" category="inline-link">Astra API文件</block>
  <block id="9c2cf0e947812ecb3fc0bfccaa8b3c61" category="list-text"><block ref="9c2cf0e947812ecb3fc0bfccaa8b3c61" category="inline-link-rx"></block></block>
  <block id="3381a309aeefac050f7f5319f6757afe" category="summary">瞭解如何使用提供的範例組態、為Astra Trident安裝設定Astra Data Store（廣告）後端。</block>
  <block id="83caf3e7a6bf2dcce3d7d6eab3c8905c" category="doc">設定Astra Data Store後端</block>
  <block id="0b1c01b976c493a4217d6f4b772849b0" category="paragraph">瞭解如何使用提供的範例組態、為Astra Trident安裝設定Astra Data Store（廣告）後端。</block>
  <block id="8035d5d39b2b48f6ec1a3133b688513c" category="inline-link">Astra資料儲存區</block>
  <block id="efd5e8dbeec263f783a6cd6ac036c6a9" category="paragraph">以設定及使用<block ref="a026c15058b831feb6de8c4c836387ae" category="inline-link-rx"></block> 後端、您需要下列項目：</block>
  <block id="0033a0be965b04e889c13f8699fa52ca" category="inline-link-macro">Astra Data Store預覽文件</block>
  <block id="44353297d28e56e03a6c2fa8ed4c436d" category="list-text">支援的廣告儲存系統。請參閱 <block ref="a495e7dcf960e6114a66e71691c841e9" category="inline-link-macro-rx"></block> 以取得詳細資料。</block>
  <block id="c7f6917a3ac9bd1d4133a82dc3260748" category="list-text">Kubernetes叢集代管廣告的認證資料。Kubernetes叢集託管廣告的命名空間必須專供此Astra Trident後端所建立及管理的磁碟區、快照及匯出原則資源使用。Kubernetes叢集託管廣告必須提供「Kubeconfig」、以支援：</block>
  <block id="cebbe731acfa0b8c520f355bcbfa6dd1" category="list-text">讀取「astrad-system」命名空間中的所有物件</block>
  <block id="cb90bccb2cf5bc16b37e39d379d5a5ea" category="list-text">在為此Astra Trident後端使用所建立的命名空間中讀取/寫入物件</block>
  <block id="2f191460bd4d4750f88513ea54101bed" category="list-text">列出所有叢集命名空間</block>
  <block id="15b7c7ffe264d7b8c61915ff2a6ef96c" category="section-title">後端組態選項</block>
  <block id="9d370350f8d0178b5dfbec9def10d13a" category="paragraph">如需後端組態選項、請參閱下表：</block>
  <block id="83f499a540b1323009c200d6f8cc9396" category="cell">參數</block>
  <block id="5aae2c40b50d296edbd4ba9cfb462b49" category="cell">儲存驅動程式名稱</block>
  <block id="e269f9fe19f18e73c77815dddc019d7b" category="cell">「astrads - NAS」</block>
  <block id="5afd6479855e8d63f324b6ec2fa787b4" category="cell">自訂名稱或儲存後端</block>
  <block id="5b4fc65310144922f0384b20a00bd6ae" category="cell">ads叢集名稱</block>
  <block id="65e18a0bb1868a9c1e181302d4733dba" category="cell">《叢集》</block>
  <block id="d24ec3d66e6303208e4767ec5cccbc76" category="cell">適用的資源名稱</block>
  <block id="f3f30d479f6e3b393d917a3b2f88c770" category="cell">命名空間</block>
  <block id="a4c39aafd14948aacfcc4f9c6374a875" category="cell">Astra Trident將在命名空間中建立所有的AADS自訂資源</block>
  <block id="995c6425a4a00f961b0c8a2000c5497c" category="cell">《Kbeconfig》</block>
  <block id="dc37fa78a7cf3d9ae1dbf70f4430a142" category="cell">適用於ads Kubernetes叢集的認證資料（Base64 compact Json）</block>
  <block id="e5f77e38f271802a5a75ecdffe577104" category="cell">"版本=4.1"</block>
  <block id="a0f3a965c12688befda99da850903dcb" category="cell">「AutoExpportPolicy」</block>
  <block id="4a5695a4c9eea28a296b0b2f210a15f8" category="cell">啟用自動匯出原則建立與更新[布 林值]</block>
  <block id="b4ad0dff08149092bc3e4b16572af575" category="cell">《AutoExpportCIDR》（自動匯出CTR）</block>
  <block id="2949ef191693d444cc1f96962c1fd8ae" category="cell">啟用「AutoExpportPolicy」時、用來篩選Kubernetes節點IP的CIDR清單</block>
  <block id="1abbe16b7053d16fb89efaebd94484be" category="cell">["0.00.0.0/0"、":/0"]</block>
  <block id="567c7f0eca746ed7513764be5ecf6d03" category="cell">""（預設不強制執行）</block>
  <block id="f2f2c7c3c767da610bd95934104674f6" category="cell">「DebugTraceFlags」</block>
  <block id="857a0a2e6dd17cb6e0022d80855b338a" category="cell">疑難排解時要使用的偵錯旗標。範例：｛"API"：假、"method"：true｝</block>
  <block id="37a6259cc0c1dae299a7866489dff0bd" category="cell">null</block>
  <block id="eea443d4fcc24d4cd2cab08c2a6c062f" category="cell">《標籤》</block>
  <block id="88dce60232453383ab0d1c3c59cc931d" category="admonition">除非您正在進行疑難排解並需要詳細的記錄傾印、否則請勿使用「debugTraceFlags」。</block>
  <block id="0ffdeb640d4a5fc9f33736feec8d274f" category="admonition">您應該先將「Kebeconfig」值從Yaml轉換為精簡Json格式、然後再轉換為Base64格式、再將其納入後端組態。</block>
  <block id="5ef844cc326d7b10c0f674ac9b2b3c74" category="paragraph">每個後端都會在裝載ADS的Kubernetes叢集上的單一命名空間中配置磁碟區。若要在其他命名空間中建立磁碟區、您可以定義其他後端。可以將ADS磁碟區附加到託管叢集中的任何命名空間、任何其他Kubernetes叢集、或是可以掛載NFS共用的任何位置。</block>
  <block id="f2319c1b13782c7170018cdd5fb7fd49" category="paragraph">您可以在組態檔的特殊區段中、使用這些選項來控制每個Volume的預設資源配置。</block>
  <block id="77c62856cfaac230e7c2fd8139d7c2c8" category="paragraph">請參閱下列組態範例。</block>
  <block id="c1a0e97f953c948568aed6c134fc9711" category="cell">要使用的匯出原則</block>
  <block id="9aa82da0cffe247b84587c1cc8e32746" category="cell">"預設"</block>
  <block id="ef616ce0e78a1254437e682f723bb5e6" category="cell">新磁碟區的模式、必須為八進位、且開頭為「0」</block>
  <block id="6474dd374337126fa99c86e653ebfd64" category="cell">「0777」</block>
  <block id="31ed61cc3c85d0bb697cd12b77f37fd1" category="cell">保留給快照的磁碟區百分比</block>
  <block id="5964a48430cb8e8190dbd855a8514a0c" category="cell">「5」</block>
  <block id="c07fbc0b2a1a865fe9e3a55c05b4f690" category="cell">"假"</block>
  <block id="84d2c2c768bd1900489bad5fb46b4aac" category="cell">「qosPolicy」</block>
  <block id="115261f04e7f7d964bc608b63a82b482" category="cell">要指派給所建立磁碟區的QoS原則</block>
  <block id="9d4568c009d203ab10e33ea9953a0264" category="cell">"</block>
  <block id="cf04ead37df0a76237b27de327c0cd03" category="admonition">對於在AIT後端建立的所有磁碟區、Astra Trident會在儲存資源池配置時、將儲存資源池上的所有標籤複製到儲存磁碟區。儲存管理員可以定義每個儲存資源池的標籤、並將每個儲存資源池所建立的所有磁碟區分組。這是根據後端組態檔中提供的一組可自訂標籤、方便區分磁碟區的方法。</block>
  <block id="b53453343f074fd64ef7129def93f57d" category="section-title">範例1：最小後端組態</block>
  <block id="9fe036cdf8651713d44464a40094dc62" category="paragraph">這是絕對最低的後端組態。</block>
  <block id="7b3ecf601e0eee1c9d097083281abafa" category="example-title">展開範例</block>
  <block id="55c1dd55273b867b995333cc3abd250e" category="section-title">範例2：單一服務層級組態</block>
  <block id="8f3db75549f212e0fdab2c542531a95e" category="paragraph">此範例顯示後端檔案、可將相同層面套用至所有Astra Trident建立的儲存設備。</block>
  <block id="2b00c4aa6134b525e9355d880ecb0c8d" category="section-title">範例3：虛擬儲存池組態</block>
  <block id="fe8fbdb035f6bebecaf9a52e36d8a595" category="paragraph">此範例顯示使用虛擬儲存資源池設定的後端定義檔案、以及參照回溯的StorageClass。</block>
  <block id="a2c81e41622f2e2616b33a689e229c72" category="paragraph">下列StorageClass定義係指上述儲存資源池。您可以使用「parameters.selector`」欄位、為每個StorageClass指定用於裝載磁碟區的虛擬集區。磁碟區將會在所選的虛擬資源池中定義各個層面。</block>
  <block id="3f297ef15cde0668e93b35f2752fd4fd" category="section-title">接下來呢？</block>
  <block id="3ad256eea0abb551eaab63c84aa3d1f9" category="paragraph">建立後端組態檔之後、請執行下列命令：</block>
  <block id="a61ed3c1ecae587dbee1f2c0ace81e3b" category="paragraph">如果後端建立失敗、表示後端組態有問題。您可以執行下列命令來檢視記錄、以判斷原因：</block>
  <block id="8427b84145b88f048d5caa532324cd11" category="paragraph">識別並修正組態檔的問題之後、您可以再次執行create命令。</block>
  <block id="bc960ce53bb0d62c44b5a3f212c279d3" category="summary">您可以建立儲存類別、刪除儲存類別、以及檢視現有的儲存類別。</block>
  <block id="e8b9c3a9859a62e9a58431c3b61f75d5" category="doc">管理儲存類別</block>
  <block id="5802c976ee5f858f76699af5294812e6" category="paragraph">尋找建立儲存類別、刪除儲存類別及檢視現有儲存類別的相關資訊。</block>
  <block id="e123173acd76721f31496874fd778eca" category="section-title">設計儲存類別</block>
  <block id="a9a4b52c93b141ba28676afe58a5900d" category="paragraph">請參閱 <block ref="5a81d2db77288939223c6a591fc3991d" category="inline-link-macro-rx"></block> 以取得有關儲存類別及其設定方式的詳細資訊。</block>
  <block id="14f4c7abe09c4481722f1fa6563f2604" category="section-title">建立儲存類別</block>
  <block id="99b068c418b4a658f64806517e8567ac" category="paragraph">取得儲存類別檔案之後、請執行下列命令：</block>
  <block id="fac03ff7d61c420a4caeeb44355cb2be" category="paragraph">「&lt;storage－class file」（儲存設備類別檔案）應以您的儲存設備類別檔案名稱取代。</block>
  <block id="0fe0aa7b9b7529f66030afb1629507bb" category="section-title">刪除儲存類別</block>
  <block id="4bf50148821c75f616a96daca9255e6f" category="paragraph">若要從Kubernetes刪除儲存類別、請執行下列命令：</block>
  <block id="65494a0b3404ce637afd88bcb7c82998" category="paragraph">「&lt;storage－class&gt;'」應改用您的儲存類別。</block>
  <block id="a5f526f5d63d827ce2c0146a20cd2ff7" category="paragraph">透過此儲存類別所建立的任何持續磁碟區都將維持不變、Astra Trident將繼續管理這些磁碟區。</block>
  <block id="1ffda19a93d453b434cfabeb86681d6d" category="admonition">Astra Trident會對其建立的磁碟區執行空白的「FSType」。對於iSCSI後端、建議在StorageClass中強制執行「參數.FSType」。您應該刪除「esixing StorageClass」、然後使用指定的「參數.FSType」重新建立。</block>
  <block id="e606165355271961ba07945766fbf83a" category="section-title">檢視現有的儲存類別</block>
  <block id="7c237bc6c124137d25df2dec1cb3e528" category="list-text">若要檢視現有的Kubernetes儲存類別、請執行下列命令：</block>
  <block id="4aae22fbb9c0d354d0a9c15c6c126d89" category="list-text">若要檢視Kubernetes儲存類別詳細資料、請執行下列命令：</block>
  <block id="bed443a9c5577e1043c277e8ebbb542f" category="list-text">若要檢視Astra Trident的同步儲存類別、請執行下列命令：</block>
  <block id="db66cf4d314ab7a719a76ed3af1b0173" category="list-text">若要檢視Astra Trident的同步儲存類別詳細資料、請執行下列命令：</block>
  <block id="ce32eb748bd7452bd6ee6d1d7ad6d3a7" category="section-title">設定預設儲存類別</block>
  <block id="f30a1542c01c3c493f3c01c88dfe5fcd" category="paragraph">Kubernetes 1.6新增了設定預設儲存類別的功能。如果使用者未在「持續磁碟區宣告」（PVc）中指定一個、則此儲存類別將用於配置「持續磁碟區」。</block>
  <block id="7c435ae4763642458286cb691812ea55" category="list-text">在儲存類別定義中、將「shorageclass.Kubernetes.IO/as-default-Class」註釋設為true、以定義預設儲存類別。根據規格、任何其他值或不存在附註都會解譯為假。</block>
  <block id="61fd76f55d29aaceb4a6ee09a318dc45" category="list-text">您可以使用下列命令、將現有的儲存類別設定為預設的儲存類別：</block>
  <block id="800477137444bec636483de85335cbb5" category="list-text">同樣地、您也可以使用下列命令移除預設儲存類別註釋：</block>
  <block id="2d2f31c3012657fd7b38b41312d1a0b8" category="paragraph">Trident安裝程式套件中也有包含此附註的範例。</block>
  <block id="94d8ac3a8d98f2232d3dc735878a5bc3" category="admonition">在任何指定時間、您的叢集中都只應有一個預設儲存類別。Kubernetes在技術上並不妨礙您擁有多個儲存類別、但它的行為方式就如同完全沒有預設的儲存類別一樣。</block>
  <block id="6c36cb9c072dc4cb9e163c44568f6a91" category="section-title">識別儲存類別的後端</block>
  <block id="dc0742ede78913414129866d60898f67" category="paragraph">這是您可以用Json回答的問題類型範例、其中的「tridentctl」輸出用於Astra Trident後端物件。這會使用「jq」公用程式、您可能需要先安裝。</block>
  <block id="ef1161058705470bb877fbce688eea9e" category="summary">深入瞭解如何使用ONTAP 支援支援功能的SAN驅動程式來設定支援功能的後端。ONTAP</block>
  <block id="29db8b676d0a02f8179869506102c8ce" category="doc">使用ONTAP 不支援的Cloud Volumes ONTAP SAN驅動程式來設定後端</block>
  <block id="133184f8c608809bdc057abf1397d10d" category="paragraph">深入瞭解如何使用ONTAP 支援功能的功能和功能性SAN驅動程式來設定功能性的後端。ONTAP Cloud Volumes ONTAP</block>
  <block id="9a5f09cf66e692efdae493ce4c9aa64f" category="inline-link-macro">準備</block>
  <block id="6c728e8788471413351ba9fcd26ca76e" category="list-text"><block ref="6c728e8788471413351ba9fcd26ca76e" category="inline-link-macro-rx"></block></block>
  <block id="e5fc4f2bd89271cfb112e8b768f74dde" category="inline-link-macro">組態與範例</block>
  <block id="874216718c1d50bbd2aa417449058e46" category="list-text"><block ref="874216718c1d50bbd2aa417449058e46" category="inline-link-macro-rx"></block></block>
  <block id="ce8828fc10a926c196951c9bdd0d534d" category="section-title">使用者權限</block>
  <block id="96c17dbe45e7351fb2a4f71956c25e0c" category="paragraph">Astra Trident希望以ONTAP 支援或SVM管理員的身分執行、通常是使用「admin」叢集使用者或「vsadmin」SVM使用者、或使用具有相同角色的不同名稱使用者。對於Amazon FSx for NetApp ONTAP 等部署、Astra Trident預期會使用ONTAP 叢集「fsxadmin」使用者或「vsadmin」SVM使用者、或是具有相同角色之不同名稱的使用者、來執行成一個或多個SVM管理員。「fsxadmin」使用者是叢集管理使用者的有限替代。</block>
  <block id="4937b52eb2cb058f225b69b2caafaf29" category="admonition">如果您使用「limitAggregateusage」參數、則需要叢集管理權限。使用Amazon FSx for NetApp ONTAP 支援Astra Trident時、「limitAggregateusage」參數無法搭配「vsadmin」和「fsxadmin」使用者帳戶使用。如果您指定此參數、組態作業將會失敗。</block>
  <block id="ec3f9af8f611100a0182ffb9ab2e5ef8" category="paragraph">雖然可以在ONTAP 功能區內建立更嚴格的角色、讓Trident驅動程式能夠使用、但我們不建議您這麼做。Trident的大多數新版本都會呼叫額外的API、而這些API必須納入考量、使升級變得困難且容易出錯。</block>
  <block id="2941c38dbb7c39c325787067c0540247" category="summary">瞭解如何使用「kubecll」來執行後端管理作業。</block>
  <block id="bffb766af67c15f14cae35f03dd6f4a9" category="doc">以KECBECVL執行後端管理</block>
  <block id="634b471e6af84767e06324552492b533" category="section-title">刪除後端</block>
  <block id="20309eb77b701e6c49ca6b99a8f93f90" category="paragraph">刪除「TridentBackendConfig」（TridentBackendConfig）之後、即指示Astra Trident刪除/保留後端（根據「刪除原則」）。若要刪除後端、請確定「刪除原則」已設定為刪除。如果只要刪除「TridentBackendConfig」、請確定「刪除原則」已設定為保留。這可確保後端仍存在、並可使用「tridentctl」進行管理。</block>
  <block id="337d79852891a37d41285c9101c3fff4" category="paragraph">執行下列命令：</block>
  <block id="3fa37f688874143cd423aabca8075ffb" category="paragraph">Astra Trident並不會刪除「TridentBackendConfig」所使用的Kubernetes Secrets。Kubernetes使用者負責清除機密。刪除機密時必須小心。只有在後端未使用機密時、才應刪除這些機密。</block>
  <block id="d694c8966214ec6d0068c0ab2951b65c" category="section-title">檢視現有的後端</block>
  <block id="265ab4809f08d248e5045a8638ac7afa" category="paragraph">您也可以執行「tridentctl Get backend -n trident」或「tridentctl Get backend -o yaml -n trident」、以取得所有後端的清單。這份清單也會包含以「tridentctl」建立的後端。</block>
  <block id="93dbcf0189ff94d39230d2e3726969ab" category="section-title">更新後端</block>
  <block id="93700a3ea9dc6d858638cd66cd2f2bfa" category="paragraph">更新後端可能有多種原因：</block>
  <block id="56cdd71a65518838d73e00276ed6fab1" category="list-text">儲存系統的認證資料已變更。若要更新認證資料、必須更新「TridentBackendConfig」物件中使用的Kubernetes Secret。Astra Trident會自動以提供的最新認證資料更新後端。執行下列命令以更新Kubernetes Secret：</block>
  <block id="6ef0ccb954a07e30d4ff894b5256ae30" category="list-text">需要ONTAP 更新參數（例如使用的SVM名稱）。在這種情況下、「TridentBackendConfig」物件可直接透過Kubernetes更新。</block>
  <block id="d4609cbe039ed7019e7151718c417bec" category="paragraph">或者、您也可以執行下列命令來變更現有的「TridentBackendConfig」CR：</block>
  <block id="d38f034e9aa082af3ec19c23caff4b0f" category="paragraph">如果後端更新失敗、後端仍會繼續維持其最後已知的組態。您可以執行「kubecl Get tbc &lt;tbc-name&gt;-o yaml -n trident」或「kubecl描述tbc &lt;tbc-name&gt;-n trident」來檢視記錄以判斷原因。</block>
  <block id="5878b59fb3a8430928026b63b5ca336f" category="paragraph">識別並修正組態檔的問題之後、即可重新執行update命令。</block>
  <block id="3f82682ace484ae8a94f6b713a856a1f" category="summary">瞭Azure NetApp Files 解如何使用所提供的範例組態、將功能驗證設定為Trident安裝的後端。</block>
  <block id="28b0abcecaf7a63edb46e4e137337018" category="doc">設定Azure NetApp Files 一個靜態後端</block>
  <block id="f972fcadaebc8b30143815ae86f44966" category="paragraph">瞭Azure NetApp Files 解如何使用提供的範例組態、將靜態（anf）設定為Astra Trident安裝的後端。</block>
  <block id="573fa5dc2f7f8efb65f65f94f56fb8ea" category="admonition">該支援服務不支援低於100 GB的磁碟區。Azure NetApp Files如果要求較小的磁碟區、Astra Trident會自動建立100-GB磁碟區。</block>
  <block id="07e7004c50a67a3e4e366b4ca1c28e3d" category="paragraph">若要設定及使用<block ref="24a785881ff1cdf191a2239811dc9597" category="inline-link-rx"></block> 後端、您需要下列項目：</block>
  <block id="66d640a9a050b05e6a914cbcd88a1e2e" category="list-text">Azure訂閱提供的「SubscriptionID」Azure NetApp Files （含功能不支援的功能）。</block>
  <block id="26e3a81fff63a114b3f66931fe9817bd" category="list-text">來自於的「TenantId」、「clientID」和「clientSecret」<block ref="8cf7d0e47908a64c9538530ae13f3b17" category="inline-link-rx"></block> 在Azure Active Directory中、具備Azure NetApp Files 充分的權限執行此功能。應用程式登錄應使用Azure預先定義的「擁有者」或「貢獻者」角色。</block>
  <block id="3cedfb797d3e1bc073ba2b0b4d2502cf" category="inline-link">Azure文件</block>
  <block id="0d379fc2fdd52ac2845c4a58f8ab28b3" category="admonition">若要深入瞭解Azure內建角色、請參閱<block ref="b2e35876b943de7ace62c0922ab24aca" category="inline-link-rx"></block>。</block>
  <block id="9837781971083d3fe119b0217014d301" category="list-text">Azure的「位置」至少包含一個<block ref="c5f14b2142014dc234282a513132bad4" category="inline-link-rx"></block>。從Trident 22.01起、「位置」參數是後端組態檔最上層的必填欄位。會忽略虛擬資源池中指定的位置值。</block>
  <block id="7b0fbaf9fee0388fe8032c97b8257fdc" category="list-text">如果Azure NetApp Files 您是第一次使用或是在新的位置使用、則需要進行一些初始組態。請參閱<block ref="713c3fd99272dda043016179a5584f00" category="inline-link-rx"></block>。</block>
  <block id="4a56a2a81941c5206604b30f5115b1ba" category="paragraph">Trident會根據後端組態（子網路、虛擬網路、服務層級和位置）、在所要求位置可用的容量集區上建立ANF磁碟區、並符合所要求的服務層級和子網路。</block>
  <block id="3d1c87b616fe621310b766603b6c175d" category="admonition">附註：Astra Trident不支援手動QoS容量資源池。</block>
  <block id="3e566c45584d66d2ab94c2108f7c3488" category="cell">「Azure - NetApp-Files」</block>
  <block id="9dd18f393b35bf22098cf53e9c1c7fa6" category="cell">驅動程式名稱+「_」+隨機字元</block>
  <block id="1c65f12b4d30114593cc01384938cb5f" category="cell">其中一種是「標準」、「高級」或「超高」</block>
  <block id="b21b08bb55acd409e40e9b45edd3bb34" category="cell">""（隨機）</block>
  <block id="8fce436e09a08bd124727374d3e1d1d5" category="cell">要建立新磁碟區的Azure位置名稱</block>
  <block id="016a4b469916e37291cfe2f7fab49aaf" category="cell">"來源群組"</block>
  <block id="66d09fbe1165f3d10b368cbe0cc029f4" category="cell">用於篩選已探索資源的資源群組清單</block>
  <block id="36cbcb8a57112362b05d06b9fe037a6e" category="cell">「[]」（無篩選器）</block>
  <block id="d4b4343f054233d7d339bb1501425fd4" category="cell">《netappAccounts》</block>
  <block id="61476ef20a8015760b9cb3c1bd0ea435" category="cell">篩選探索資源的NetApp帳戶清單</block>
  <block id="722c7b4409fa4d1fe6aaa2902ae66473" category="cell">《容量Pools》</block>
  <block id="225abbb59bc0bbaa2a5852ada333b31b" category="cell">用於篩選已探索資源的容量集區清單</block>
  <block id="f2a5b99a63a463017b3e5f5848444d9a" category="cell">「[]」（無篩選器、隨機）</block>
  <block id="b9cc8276829a756e7a22476617204267" category="cell">精細控制NFS掛載選項。</block>
  <block id="2d1474e8b52ef42851337fb3fef4e1a1" category="cell">"nfsves=3"</block>
  <block id="2288620b3dc019c6359bcc7f50b72ab3" category="cell">如果要求的磁碟區大小高於此值、則資源配置失敗</block>
  <block id="91b3c29beb3641dce2fcf3d2382fac4f" category="cell">疑難排解時要使用的偵錯旗標。範例：「\{"API"：假、「方法」：真、「探索」：true｝。除非您正在進行疑難排解並需要詳細的記錄傾印、否則請勿使用此功能。</block>
  <block id="9440dab4b1faaad2a053d658b9e70623" category="admonition">如果嘗試建立永久虛擬基礎架構時發生「找不到容量資源池」錯誤、您的應用程式登錄可能沒有相關的必要權限和資源（子網路、虛擬網路、容量資源池）。Astra Trident會在啟用偵錯功能時、記錄在建立後端時所探索到的Azure資源。請務必檢查是否使用適當的角色。</block>
  <block id="b025cb91ea905e0ae1a879fe81e5ff18" category="admonition">如果您想使用NFS 4.1版掛載磁碟區、可以在以逗號分隔的掛載選項清單中加入「nfsves=4'」、以選擇NFS v4.1。儲存類別中設定的任何掛載選項、都會覆寫在後端組態檔中設定的掛載選項。</block>
  <block id="eaea97dbd365f00421eb397e8eabeebf" category="paragraph">可以使用短名稱或全限定名稱來指定"sourceGroups"、"netappAccounts"、"capacityPools、"virtualNetwork（虛擬化網路）和"shubnet"的值。簡短名稱可能會比對同名的多個資源、因此在大多數情況下、建議使用完整名稱。「資源群組」、「netappAccounts」和「capacityPools」值是篩選器、可將探索到的資源集限制在此儲存後端可用的資源集、並可任意組合指定。完整名稱格式如下：</block>
  <block id="a1fa27779242b4902f7ae3bdd5c6d508" category="cell">類型</block>
  <block id="520d0db389f362bf79ef56ca0af3dcab" category="cell">格式</block>
  <block id="dde92bca1b59f0db813ef42a2688752e" category="cell">資源群組</block>
  <block id="671e72ca3ef632233f4c27dfef1ec109" category="cell">&lt;資源群組&gt;</block>
  <block id="ac252743de820aac9183d9f76d4bed67" category="cell">NetApp帳戶</block>
  <block id="2bf2783c6d0d867a9fe629138b38bd84" category="cell">資源群組//&lt;NetApp帳戶&gt;</block>
  <block id="9eea1c08013c37f1499f428378764a08" category="cell">容量資源池</block>
  <block id="01c656d6b97f45a90022ee307283ae01" category="cell">資源群組//&lt;NetApp帳戶&gt;/&lt;容量資源池&gt;</block>
  <block id="bf76cafc47141522dca89c4d6e25b822" category="cell">虛擬網路</block>
  <block id="8c9309282517a29ad09b10443d825c7c" category="cell">資源群組//&lt;虛擬網路&gt;</block>
  <block id="9770c6469e9d27585d6c0c389ede7bc3" category="cell">子網路</block>
  <block id="7addf9faaab78a084548d05b695cd2e2" category="cell">資源群組//&lt;虛擬網路&gt;/&lt;子網路&gt;</block>
  <block id="5477b38834c7f5d99403326a17f0bf55" category="paragraph">您可以在組態檔的特殊區段中指定下列選項、以控制預設的每個Volume佈建方式。請參閱下列組態範例。</block>
  <block id="4e69ff68e3ee9207d53a76748485f3d8" category="cell">新磁碟區的匯出規則</block>
  <block id="1274e36c193ec0ce8b5c49d5e78ffd7b" category="cell">「0.00.0.0/0」</block>
  <block id="08ee53e1d5cefb7967a295e98036598e" category="cell">控制.snapshot目錄的可見度</block>
  <block id="ef81b740be2293b7e3c41047afe98764" category="cell">100公克</block>
  <block id="3e71a01ee522f366b6eeb2990e170fde" category="cell">新磁碟區的UNIX權限（4個八進位數字）</block>
  <block id="976a6dc52dbcabb541efa0a91e922604" category="cell">""（預覽功能、訂閱時需要白名單）</block>
  <block id="b2a2a92e6239fca01cafbcfd41760043" category="paragraph">「匯出規則」值必須是以逗號分隔的清單、以CIDR表示法列出所有的IPv4位址或IPv4子網路組合。</block>
  <block id="dbb358dadb4da7e240eeaa0513a064e1" category="admonition">對於在ANF後端上建立的所有磁碟區、Astra Trident會將儲存資源池上的所有標籤複製到資源配置時的儲存磁碟區。儲存管理員可以定義每個儲存資源池的標籤、並將儲存資源池中建立的所有磁碟區分組。這是根據後端組態中提供的一組可自訂標籤、方便區分磁碟區的方法。</block>
  <block id="25f4894ddaab3c1182f12732d3bcf889" category="section-title">範例1：最低組態</block>
  <block id="54042b89155d99a3568a196cb5ff1da8" category="paragraph">這是絕對最低的後端組態。使用此組態、Astra Trident會在設定的位置探索所有NetApp帳戶、容量集區和委派給ANF的子網路、並隨機將新磁碟區放在其中一個集區和子網路上。</block>
  <block id="e43b3577dd4b74a4cfa994a56e8138b8" category="paragraph">當您剛開始使用ANF並嘗試各種功能時、這種組態是理想的選擇、但實際上您想要為您所配置的磁碟區提供額外的範圍。</block>
  <block id="a78703e6fcb2511d5a565496df5b2082" category="section-title">範例2：使用容量集區篩選器的特定服務層級組態</block>
  <block id="6da664b0342ea1be008211c33f1eb020" category="paragraph">此後端組態可將磁碟區置於Azure的「東向」位置、位於「超」容量資源池中。Astra Trident會自動探索該位置委派給ANF的所有子網路、並隨機在其中一個磁碟區上放置新磁碟區。</block>
  <block id="725ae241ec74eed978f0b099030236b8" category="section-title">範例3：進階組態</block>
  <block id="3a050f4cfb1985247f813dd3432ed5e6" category="section-title">範例4：虛擬儲存池組態</block>
  <block id="198188b722e4e8ee2004b3bd2a9348ed" category="paragraph">此後端組態可在單一檔案中定義多個儲存集區。當您有多個容量集區支援不同的服務層級、而且想要在Kubernetes中建立代表這些層級的儲存類別時、這很有用。</block>
  <block id="db471f3119123601d175fe8d2ef2dd0a" category="paragraph">下列「儲存類別」定義是指上述的儲存資源池。您可以使用「parameters.selector`」欄位、為每個「儲存類別」指定用於裝載磁碟區的虛擬資源池。該磁碟區會在所選的資源池中定義各個層面。</block>
  <block id="8f828c7344e7fe65d66237a25193068b" category="summary">瞭解如何準備使用ONTAP 支援不支援的SAN驅動程式來設定支援功能的後端。ONTAP</block>
  <block id="b5c795328aa98beaf5bdc15b54a533c1" category="paragraph">瞭解如何準備使用ONTAP 支援不支援的SAN驅動程式來設定支援功能的後端。ONTAP對於所有ONTAP 的不支援端點、Astra Trident至少需要指派一個集合體給SVM。</block>
  <block id="5475028f502d04bc17cdfdf613d28cbf" category="paragraph">請記住、您也可以執行多個驅動程式、並建立指向一個或多個驅動程式的儲存類別。例如、您可以設定使用「ONTAP-SAN」驅動程式的「SAN開發」類別、以及使用「ONTAP-SAN經濟」類別的「SAN預設」類別。</block>
  <block id="3b40a8d4978192509495ce411fe8db8c" category="paragraph">您所有的Kubernetes工作節點都必須安裝適當的iSCSI工具。請參閱 <block ref="9ec363a49b52db56773849151c5853d4" category="inline-link-macro-rx"></block> 以取得更多詳細資料。</block>
  <block id="c75f7811d70d17dbcd88e9d03752cbed" category="section-title">驗證</block>
  <block id="51e35cec1e001fb8abfbe474a18dd282" category="paragraph">Astra Trident提供兩種驗ONTAP 證功能來驗證支援的後端。</block>
  <block id="00cbc0e7ed0014813b07fc8452f60df1" category="list-text">認證型：ONTAP 對具備所需權限的使用者名稱和密碼。建議使用預先定義的安全登入角色、例如「admin」或「vsadmin」、以確保與ONTAP 各種版本的最大相容性。</block>
  <block id="e2cd9c84c3ebf14f3c81be4692848e5b" category="list-text">憑證型：Astra Trident也能ONTAP 使用安裝在後端的憑證與某個叢集進行通訊。在此處、後端定義必須包含用戶端憑證、金鑰及信任的CA憑證（建議使用）的Base64編碼值。</block>
  <block id="f3a85dfc22761b09346aa0134d77d4f9" category="paragraph">使用者也可以選擇更新現有的後端、選擇從認證移至憑證型、反之亦然。如果*同時提供認證資料和憑證*、Astra Trident將預設使用憑證、同時發出警告、從後端定義中移除認證資料。</block>
  <block id="a2f8f419bf420960ef8cca73e1999e09" category="section-title">啟用認證型驗證</block>
  <block id="ceae351bc6b26100a9b1685a5d477c0a" category="paragraph">Astra Trident需要SVM範圍/叢集範圍管理員的認證資料、才能與ONTAP 該後端進行通訊。建議使用預先定義的標準角色、例如「admin」或「vsadmin」。這可確保與未來ONTAP 的支援版本保持前瞻相容、因為未來的Astra Trident版本可能會使用功能API。您可以建立自訂的安全登入角色、並與Astra Trident搭配使用、但不建議使用。</block>
  <block id="2312b8f77f99c346269b67308afc3649" category="paragraph">後端定義範例如下所示：</block>
  <block id="2a2ef6dcf08a8789a55301af5f71304c" category="paragraph">請記住、後端定義是唯一以純文字儲存認證的位置。建立後端之後、使用者名稱/密碼會以Base64編碼、並儲存為Kubernetes機密。建立/更新後端是唯一需要知道認證資料的步驟。因此、這是一項純管理員操作、由Kubernetes /儲存管理員執行。</block>
  <block id="052f76b486189a7b01340d5134eb7985" category="section-title">啟用憑證型驗證</block>
  <block id="0778b06c5ea9fded4fd7b586b248dd86" category="paragraph">新的和現有的後端可以使用憑證、並與ONTAP 該後端通訊。後端定義需要三個參數。</block>
  <block id="d5b9c9db262b1927d7914504f3587adb" category="list-text">用戶端憑證：用戶端憑證的Base64編碼值。</block>
  <block id="8f2b750dd6a57864f0e36828c248ddfc" category="list-text">用戶端私密金鑰：關聯私密金鑰的Base64編碼值。</block>
  <block id="200c2d2a44dec6455fa1c947f9c1f534" category="list-text">信任的CACertifate：受信任CA憑證的Base64編碼值。如果使用信任的CA、則必須提供此參數。如果未使用信任的CA、則可忽略此問題。</block>
  <block id="6b634823c19ebc37c9e4fdbf08de1fff" category="paragraph">典型的工作流程包括下列步驟。</block>
  <block id="c92e58d7dd251e6e6cdb16291a6dec90" category="list-text">產生用戶端憑證和金鑰。產生時、請將Common Name（CN）（一般名稱（CN））設定為ONTAP 驗證身分。</block>
  <block id="69b521cddbc52a2d14539e349e2930f0" category="list-text">將信任的CA憑證新增ONTAP 至整個叢集。這可能已由儲存管理員處理。如果未使用信任的CA、請忽略。</block>
  <block id="2f3945695e5ca88abb46af80d87c6972" category="list-text">在ONTAP 支援叢集上安裝用戶端憑證和金鑰（步驟1）。</block>
  <block id="e81810c4035ad015ad3f0d8c4f2c6454" category="list-text">確認ONTAP 支援「cert」驗證方法的支援功能。</block>
  <block id="ea3bf76b270384627e7bcfb197ddb17b" category="list-text">使用產生的憑證測試驗證。以ONTAP Management LIF IP和SVM名稱取代&lt;SfManagement LIF&gt;和&lt;vserver name&gt;。</block>
  <block id="83f2adf143dc8f5fbbb9d924f840c1ce" category="list-text">使用Base64編碼憑證、金鑰和信任的CA憑證。</block>
  <block id="8d36e570f1edac5ae19e6733e3fbb4d5" category="list-text">使用從上一步取得的值建立後端。</block>
  <block id="2ab8ad0fce083cd02635b9126cf4353c" category="section-title">更新驗證方法或旋轉認證資料</block>
  <block id="85a73bd1a3fad449b226a7eecb546c6b" category="paragraph">您可以更新現有的後端、以使用不同的驗證方法、或是旋轉其認證資料。這兩種方法都可行：使用使用者名稱/密碼的後端可更新以使用憑證；使用憑證的後端可更新為使用者名稱/密碼。若要這麼做、請使用更新的「backend.json」檔案、其中包含執行「tridentctl後端更新」所需的參數。</block>
  <block id="5e36c3d66bd47ae551071244dc48df17" category="admonition">當您旋轉密碼時、儲存管理員必須先更新ONTAP 使用者的密碼（位於BIOS）。接著是後端更新。在循環憑證時、可將多個憑證新增至使用者。然後更新後端以使用新的憑證、之後可從ONTAP 該叢集刪除舊的憑證。</block>
  <block id="6819218365fe3a3d66752f663feecddb" category="paragraph">更新後端不會中斷對已建立之磁碟區的存取、也不會影響之後建立的磁碟區連線。成功的後端更新顯示Astra Trident可以與ONTAP 該後端通訊、並處理未來的Volume作業。</block>
  <block id="93a4f17ec735c794a2d38eb0d9dc736b" category="section-title">指定igroup</block>
  <block id="f66329c2f28d3aade033dade4fa02359" category="paragraph">Astra Trident使用igroup來控制其所配置的磁碟區（LUN）存取。系統管理員在指定後端的igroup時有兩種選擇：</block>
  <block id="caf7ba3262c90c77b09b7d53946b7be4" category="list-text">Astra Trident可自動建立及管理每個後端的igroup。如果後端定義中未包含「igroupName」、Astra Trident會在SVM上建立名為「trident -」的igroup。如此可確保每個後端都有專屬的igroup、並處理Kubernetes節點IQN的自動新增/刪除作業。</block>
  <block id="b325b5680680ba28771d11978100bf3a" category="list-text">或者、也可以在後端定義中提供預先建立的igroup。這可以使用「igroupName」組態參數來完成。Astra Trident會將Kubernetes節點IQN新增/刪除至預先存在的igroup。</block>
  <block id="ccdb9f53393401f058dcfc9c1de74547" category="paragraph">對於定義了「igroupName」的後端、可以使用「tridentctl後端更新」刪除「igroupName」、以便使用Astra Trident自動處理igroup。這不會中斷對已附加至工作負載之磁碟區的存取。未來的連線將使用建立的igroup Astra Trident來處理。</block>
  <block id="8841675f2e0dbba5719034b41ac52435" category="admonition">針對每個獨特的Astra Trident執行個體指定igroup是最適合Kubernetes管理員和儲存管理員的最佳實務做法。「csi Trident」可自動新增及移除igroup的叢集節點IQN、大幅簡化其管理。在Kubernetes環境中使用相同的SVM（以及Astra Trident安裝）時、使用專屬的igroup可確保對Kubernetes叢集所做的變更不會影響與其他叢集相關的igroup。此外、也必須確保Kubernetes叢集中的每個節點都有唯一的IQN。如上所述、Astra Trident會自動處理IQN的新增與移除。重複使用主機間的IQN可能會導致主機彼此誤用、並拒絕存取LUN的不良情況。</block>
  <block id="a3a4bece92a1c7bb017b9bc2681621f7" category="paragraph">如果將Astra Trident設定為使用「csi資源配置程式」、則Kubernetes節點IQN會自動新增至igroup或從其中移除。當節點新增至Kubernetes叢集時、「Trident - csi」示範Set會在新增的節點上部署pod（「trident - csi-xxxxX」）、並登錄可附加磁碟區的新節點。節點IQN也會新增至後端的igroup。當節點封鎖、排放及從Kubernetes刪除時、類似的一組步驟可處理刪除IQN。</block>
  <block id="3882232e20d620974a87db190a124fe7" category="paragraph">如果Astra Trident並未以csi資源配置程式的形式執行、則必須手動更新igroup、以包含Kubernetes叢集中每個工作節點的iSCSI IQN。加入Kubernetes叢集的節點IQN必須新增至igroup。同樣地、從Kubernetes叢集移除的節點IQN也必須從igroup移除。</block>
  <block id="42f93278b0d15c8d0f6613813bf586d5" category="section-title">使用雙向CHAP驗證連線</block>
  <block id="5d34ca21e19aa85f2e3cbc5bc90702fb" category="paragraph">Astra Trident可以使用雙向CHAP驗證iSCSI工作階段的「ONTAP-SAN」和「ONTAP-san經濟」驅動程式。這需要在後端定義中啟用「useCHAP」選項。當設為「true」時、Astra Trident會將SVM的預設啟動器安全性設定為雙向CHAP、並從後端檔案設定使用者名稱和機密。NetApp建議使用雙向CHAP來驗證連線。請參閱下列組態範例：</block>
  <block id="12dd7bfa072b5a1eecf975f6a5a6eaa7" category="admonition">「useCHAP」參數是布林選項、只能設定一次。預設值設為假。將其設為true之後、您就無法將其設為假。</block>
  <block id="bc601528678aeeb582101ed205a054bc" category="paragraph">除了"useCHAP=true"之外、"chapInitiator Secret（chapInitiator機密）、"chaptarketatorSecret（chaptarketusername"）、"chaptarketusername"（chaptargetuseamuse"）和"chapusername"（chamus在建立後端後端之後、可以執行「tridentctl update」來變更機密。</block>
  <block id="9ffdb95250e26c7a6b468126ac7c75b0" category="section-title">運作方式</block>
  <block id="adbaa30840aebfe537058f72e0989326" category="paragraph">儲存管理員將「useCHAP」設定為true、指示Astra Trident在儲存後端上設定CHAP。這包括下列項目：</block>
  <block id="29b4db879e4cc96a6b71bc763367624b" category="list-text">在SVM上設定CHAP：</block>
  <block id="951e8b45bc49a5475337a1b55e3e3dc4" category="list-text">如果SVM的預設啟動器安全性類型為「無」（預設設定）*和*、則磁碟區中已沒有預先存在的LUN、Astra Trident會將預設安全性類型設為「CHAP」、並繼續設定CHAP啟動器和目標使用者名稱和機密。</block>
  <block id="313818ab0cd3579429d5bd6e5faab8ff" category="list-text">如果SVM包含LUN、Astra Trident將不會在SVM上啟用CHAP。如此可確保不限制存取SVM上已存在的LUN。</block>
  <block id="13e0c564d5e1fbd33279fb276166653d" category="list-text">設定CHAP啟動器和目標使用者名稱和機密；這些選項必須在後端組態中指定（如上所示）。</block>
  <block id="9154c9db577ccbf466ca622a07931896" category="list-text">管理在後端的「igroupName」中新增的初始化。如果未指定、則預設為「Trident」。</block>
  <block id="2c7856e86a0cd46cb4fb48fa0886745e" category="paragraph">建立後端之後、Astra Trident會建立對應的「tridentbackend」CRD、並將CHAP機密和使用者名稱儲存為Kubernetes機密。由Astra Trident在此後端上建立的所有PV、都會掛載並附加於CHAP上。</block>
  <block id="81f2df0265026a1a04bda5484798a10d" category="section-title">旋轉認證資料並更新後端</block>
  <block id="a7fe005c9f49619f4438aac8932fb361" category="paragraph">您可以更新「backend.json」檔案中的CHAP參數、以更新CHAP認證。這需要更新CHAP機密、並使用「tridentctl update」命令來反映這些變更。</block>
  <block id="8959ac16a58b09dc5a158e86ab02cb53" category="admonition">更新後端的CHAP機密時、您必須使用「tridentctl」來更新後端。請勿透過CLI/ONTAP UI更新儲存叢集上的認證資料、因為Astra Trident無法接受這些變更。</block>
  <block id="1a59d0d7850406f157c314978eb3b821" category="paragraph">現有的連線不會受到影響；如果SVM上的Astra Trident更新認證、它們將繼續保持作用中狀態。新連線將使用更新的認證資料、而現有連線仍保持作用中狀態。中斷舊PV的連線並重新連線、將會使用更新的認證資料。</block>
  <block id="99c7791f20f0d41bd8f14c11e666a405" category="summary">使用Astra Trident搭配Amazon FSX for NetApp ONTAP 時、您可以確保在Amazon Elastic Kubernetes Service（EKS）中執行的Kubernetes叢集、能夠配置區塊並歸檔以ONTAP Sure為後盾的持續磁碟區。</block>
  <block id="337de5d45c69b1e4dcf87a8e7ec9ff76" category="doc">使用Astra Trident搭配Amazon FSX for NetApp ONTAP 解決方案</block>
  <block id="4d82a1ec1af02725042c8c785564ee7a" category="inline-link">Amazon FSX for NetApp ONTAP 產品</block>
  <block id="679e88f51c747ba6602cbc38cb32bff8" category="paragraph"><block ref="6a2736fcbb5755dd03d114a5153506eb" category="inline-link-rx"></block>是一項完全託管的AWS服務、可讓客戶啟動及執行採用NetApp ONTAP 的一套儲存作業系統的檔案系統。Amazon FSX for NetApp ONTAP 功能可讓您運用熟悉的NetApp功能、效能和管理功能、同時充分發揮儲存AWS資料的簡易性、敏捷度、安全性和擴充性。FSX支援ONTAP的許多檔案系統功能和管理API。</block>
  <block id="7eb620c879218a348ba0e9afaedf6b01" category="paragraph">檔案系統是Amazon FSX的主要資源、類似ONTAP 於內部部署的一個叢集。在每個SVM中、您可以建立一個或多個磁碟區、這些磁碟區是儲存檔案系統中檔案和資料夾的資料容器。有了Amazon FSX for NetApp ONTAP 的功能、Data ONTAP 即可在雲端以託管檔案系統的形式提供支援。新的檔案系統類型稱為* NetApp ONTAP Sing*。</block>
  <block id="1e6c7220f5d4eb181d67b4d5043336f5" category="paragraph">使用Astra Trident搭配Amazon FSX for NetApp ONTAP 供應NetApp時、您可以確保在Amazon Elastic Kubernetes Service（EKS）中執行的Kubernetes叢集、能夠配置區塊和檔案以ONTAP 支援的持續磁碟區。</block>
  <block id="8792dbcf77c7dadb90a49563ee249d3e" category="admonition-title">建立Amazon FSX for ONTAP Sf供 檔案系統使用</block>
  <block id="fe901b8f112db124800eb81787ce3be4" category="paragraph">在啟用自動備份的Amazon FSX檔案系統上建立的磁碟區、無法由Trident刪除。若要刪除PVCs、您需要手動刪除PV和FSXfor ONTAP the Sesfvolume。</block>
  <block id="2433c28b2cd1430a6f8bd5d5ea6aa3da" category="paragraph">若要避免此問題：</block>
  <block id="10b862795141355be1c179a2f878f507" category="list-text">請勿使用「*快速建立*」來建立FSX for ONTAP the Suse檔案系統。快速建立工作流程可自動備份、但不提供退出選項。</block>
  <block id="a10ab8f133704d9a58a1dff179ad7f7d" category="list-text">使用「*標準建立*」時、請停用自動備份。停用自動備份可讓Trident成功刪除磁碟區、而無需進一步手動介入。</block>
  <block id="4ef50c481a6113a6276514f572c414d2" category="inline-image-macro">AWS主控台停用自動備份的快照。</block>
  <block id="cce5aa9218d4019d57adcf814d7189c1" category="paragraph"><block ref="cce5aa9218d4019d57adcf814d7189c1" category="inline-image-macro-rx" type="image"></block></block>
  <block id="ff27e75635c1ff1e88fbc656b16e56ce" category="section-title">瞭解Astra Trident</block>
  <block id="ac7bd35f3efc1fd44a6368cea5fa9c21" category="paragraph">如果您是Astra Trident的新手、請使用下列連結來熟悉您的操作：</block>
  <block id="483a5da192f46e3cfe8391d3ef234fc4" category="inline-link-macro">常見問題集</block>
  <block id="291df90d8802914b42223577bb41f627" category="list-text"><block ref="291df90d8802914b42223577bb41f627" category="inline-link-macro-rx"></block></block>
  <block id="d977410bdd2db39b51f9b9fbdbcc8061" category="inline-link-macro">使用Astra Trident的要求</block>
  <block id="4d644a71fe6f2b6c8e2bcc86d5aaed77" category="list-text"><block ref="4d644a71fe6f2b6c8e2bcc86d5aaed77" category="inline-link-macro-rx"></block></block>
  <block id="70638242b92c90c812dfa8f50f272806" category="list-text"><block ref="70638242b92c90c812dfa8f50f272806" category="inline-link-macro-rx"></block></block>
  <block id="bec2d42d896d0905cf546e4b5ca33b97" category="inline-link-macro">最佳實務做法、可設定ONTAP 適用於Cloud Volumes ONTAP NetApp ONTAP 的功能、包括功能、功能及Amazon FSX</block>
  <block id="80a1961bd7058b357bb20148eaf24ec2" category="list-text"><block ref="80a1961bd7058b357bb20148eaf24ec2" category="inline-link-macro-rx"></block></block>
  <block id="748c130a6179b02d614cf9a027294302" category="inline-link-macro">整合Astra Trident</block>
  <block id="80e431e9c3f38eb259dc9d255c8f4cf2" category="list-text"><block ref="80e431e9c3f38eb259dc9d255c8f4cf2" category="inline-link-macro-rx"></block></block>
  <block id="a479f33489c8d81410024a41c9544214" category="inline-link-macro">支援SAN後端組態ONTAP</block>
  <block id="9b405a9aada0c758f606770edf5e729c" category="list-text"><block ref="9b405a9aada0c758f606770edf5e729c" category="inline-link-macro-rx"></block></block>
  <block id="3db2a44c712d8cff702c0fe05daddb2c" category="inline-link-macro">ASNAS後端組態ONTAP</block>
  <block id="88cc0a1e56925a83682b7c1f999e281b" category="list-text"><block ref="88cc0a1e56925a83682b7c1f999e281b" category="inline-link-macro-rx"></block></block>
  <block id="0606b09e12901baae5719fde5a162beb" category="paragraph">深入瞭解驅動程式功能 <block ref="36417a02a2b8551d9a22837b23ac7abd" category="inline-link-macro-rx"></block>。</block>
  <block id="55449fd175613962d882ab450cfc5f3c" category="inline-link">FabricPool</block>
  <block id="d07e2d99267e4fc3c508f6701be977b4" category="paragraph">適用於NetApp ONTAP 的Amazon FSX<block ref="d1584952da6bdedb0a24d5dbd43ce0bf" category="inline-link-rx"></block> 管理儲存層。它可讓您根據資料是否經常存取、將資料儲存在一個層級中。</block>
  <block id="0066f4a006b2b4f192583757b5f7a3c2" category="paragraph">Astra Trident希望以ONTAP 某個系統管理員或SVM系統管理員的身分執行、使用叢集「fsxadmin」使用者或「vsadmin」SVM使用者、或使用具有相同角色的不同名稱使用者。「fsxadmin」使用者只能取代「admin」叢集使用者。Astra Trident通常會使用「admin」叢集使用者來進行非Amazon FSX ONTAP 的部署。</block>
  <block id="8e64a609e66214066595e6300aaab281" category="section-title">驅動程式</block>
  <block id="5979964b20770952072578428e9c11cb" category="paragraph">您ONTAP 可以使用下列驅動程式、將Astra Trident與Amazon FSX for NetApp整合：</block>
  <block id="79a4618bb191cb293c330f8189531a13" category="list-text">「ONTAP-san」：每個提供的PV都是其專屬Amazon FSX for NetApp ONTAP 的LUN。</block>
  <block id="b8f98ceeb9b158e8af3527fce91e9e57" category="list-text">「ONTAP-san經濟型」：每個配置的PV都是LUN、每個Amazon FSX for NetApp ONTAP 的LUN數量可設定。</block>
  <block id="a5bc2c9e7628ac6c73838f9fea0e6ed6" category="list-text">「ONTAP-NAS」：每個提供的PV都是適用於NetApp ONTAP 的完整Amazon FSX。</block>
  <block id="94a834f420b7c21f3a1053e6dc705a31" category="list-text">「ONTAP-NAS-EAS'：每個提供的PV都是qtree、每個Amazon FSX的NetApp ONTAP 功能是可設定的配額樹數。</block>
  <block id="e42b07a9f050ef51ea1211004a50f223" category="list-text">「ONTAP-NAS-Flexgroup」：每個提供的PV都是適用於NetApp ONTAP FlexGroup 的完整Amazon FSX。</block>
  <block id="9dd7dc44e4a27c9a2c567d6b2a8b221a" category="paragraph">Astra Trident提供兩種驗證模式：</block>
  <block id="5cefadbc856e5afd968e0dbf6f90ad85" category="list-text">認證型：您可以將「fsxadmin」使用者用於您的檔案系統、或是為SVM設定的「vsadmin」使用者。我們建議您使用「vsadmin」使用者來設定後端。Astra Trident將使用此使用者名稱和密碼與FSX檔案系統通訊。</block>
  <block id="ed2536bee60113131cf25b2de3ec8734" category="list-text">憑證型：Astra Trident會使用SVM上安裝的憑證、與FSX檔案系統上的SVM進行通訊。</block>
  <block id="28e8b87c947c614dcb6e6f51703815e1" category="paragraph">若要深入瞭解驗證、請參閱下列連結：</block>
  <block id="619b69dca5d7c9f1f67ec55897733162" category="inline-link-macro">NAS ONTAP</block>
  <block id="b773e97e2ae2aebea91c33b771a98316" category="list-text"><block ref="b773e97e2ae2aebea91c33b771a98316" category="inline-link-macro-rx"></block></block>
  <block id="548fedaf4074fe2826e3c53dfd92a19e" category="inline-link-macro">SAN ONTAP</block>
  <block id="58ec862225833e810e6a7f94667d42db" category="list-text"><block ref="58ec862225833e810e6a7f94667d42db" category="inline-link-macro-rx"></block></block>
  <block id="9f6c198d85b31b573b56186f8ecc4394" category="section-title">在EKS上部署及設定Astra Trident搭配Amazon FSX for NetApp ONTAP</block>
  <block id="a711863513c11f3a6d86294acc7be0ba" category="list-title">您需要的是 #8217 ；需要的是什麼</block>
  <block id="80d13d3dbe137e8fb646193f275eceeb" category="list-text">現有的Amazon EKS叢集或自行管理的Kubernetes叢集、已安裝「kubecll」。</block>
  <block id="52d48fdd62aa109d7f163f0ef8a31b83" category="list-text">現有的Amazon FSX-適用於NetApp ONTAP 的支援資料系統和儲存虛擬機器（SVM）、可從叢集的工作節點存取。</block>
  <block id="ae9a35d29039db87d65a796241a9043d" category="inline-link-macro">NFS和/或iSCSI</block>
  <block id="26717a7ec67b264dcb09707406b962ef" category="list-text">已準備好的工作節點 <block ref="b4b6a021fd40b8007c50db2baa5f32f0" category="inline-link-macro-rx"></block>。</block>
  <block id="fe914214000491758957f04647f8da36" category="inline-link">Amazon機器映像</block>
  <block id="b048d74c93505355f9535fd30cba1a60" category="admonition">請務必遵循Amazon Linux和Ubuntu所需的節點準備步驟<block ref="70013ee128d5437b3d9579d66ece4066" category="inline-link-rx"></block> （AMis）、視您的EKS AMI類型而定。</block>
  <block id="7b94315b87c307aaeb6180ba3d298112" category="paragraph">如需其他Astra Trident需求、請參閱 <block ref="9754671a728b750cb0063ea36c5205bc" category="inline-link-macro-rx"></block>。</block>
  <block id="a63af3333b229a7d3d80f554369071d3" category="list-text">使用以下其中一種方式部署Astra Trident：./ Trident入門/ Kubernetes-Deploy .html[部署方法]。</block>
  <block id="064bdeb131b9f896a140c3620503f952" category="list-text">設定Astra Trident如下：</block>
  <block id="0416f36f8f02433e530639fd76b0721d" category="list-text">收集SVM的管理LIF DNS名稱。例如、使用AWS CLI執行下列命令後、在「Endings」-&gt;「管理」下找到「DNSName」項目：</block>
  <block id="d4eca488acc4ec18f87e7f00d23309cd" category="list-text">建立及安裝驗證憑證。如果您使用的是「ONTAP-SAN」後端、請參閱 <block ref="db35e24c08f3bb29e6d31cbaa530e9d6" category="inline-link-macro-rx"></block>。如果您使用的是「ONTAP-NAS」後端、請參閱 <block ref="118a5731ca660935428e52a749b9e8a6" category="inline-link-macro-rx"></block>。</block>
  <block id="3e25473814d436a2ebac91120e147b0b" category="admonition">您可以使用SSH從任何位置登入檔案系統（例如安裝憑證）、而該SSH可連至檔案系統。使用「fsxadmin」使用者、您在建立檔案系統時設定的密碼、以及「AWS FSx file-systems」中的管理DNS名稱。</block>
  <block id="860958fe641e0edbd80fe522c36d0560" category="list-text">使用您的憑證和管理LIF的DNS名稱建立後端檔案、如下例所示：</block>
  <block id="1584837635038d443115ce4eeb3b33e4" category="paragraph">如需建立後端的相關資訊、請參閱下列連結：</block>
  <block id="6f95a39ae3c518928ed5e4681a0fd49b" category="inline-link-macro">使用ONTAP NetApp NAS驅動程式設定後端</block>
  <block id="82744a46443ebff9011b85aa2468fdc2" category="list-text"><block ref="82744a46443ebff9011b85aa2468fdc2" category="inline-link-macro-rx"></block></block>
  <block id="31e8c05beab321d1465fc4c3f77e991a" category="inline-link-macro">使用ONTAP SAN驅動程式設定後端</block>
  <block id="d1e8ff43d93982813a74a45f9b721655" category="list-text"><block ref="d1e8ff43d93982813a74a45f9b721655" category="inline-link-macro-rx"></block></block>
  <block id="408cf26cdce3db57f4b0cfb372f60739" category="admonition">不要指定"ontap－san "和"ONTAP－san經濟"驅動程序的"data Lif"允許Astra Trident使用多重路徑。</block>
  <block id="fa8bc73a8436dd2f79aafaa731d248e4" category="admonition">「limitAggregateusage」參數無法搭配「vsadmin」和「fsxadmin」使用者帳戶使用。如果您指定此參數、組態作業將會失敗。</block>
  <block id="d11f02b39cdb338286053b2f1315c6b4" category="inline-link-macro">儲存類別、配置磁碟區、然後將磁碟區掛載到Pod中</block>
  <block id="95a5f873da165cd068ef3ec7e17364f3" category="paragraph">部署之後、請執行建立的步驟 <block ref="15bf5a6bf382a8a35f58cdae8ebe845c" category="inline-link-macro-rx"></block>。</block>
  <block id="9c83e144e5481ac6766f4055e566594d" category="section-title">如需詳細資訊、請參閱</block>
  <block id="cc788b7e72b2a734dd0985bd1e0e9fe3" category="inline-link">Amazon FSX for NetApp ONTAP 的支援文件</block>
  <block id="fd570b75466e2daca21a032e6fd5981c" category="list-text"><block ref="fd570b75466e2daca21a032e6fd5981c" category="inline-link-rx"></block></block>
  <block id="0ef79cb4bb284d3ca9c3e95489919301" category="inline-link">Amazon FSX for NetApp ONTAP 的部落格文章</block>
  <block id="3b94214fe5975bca8da92b72f8926be2" category="list-text"><block ref="3b94214fe5975bca8da92b72f8926be2" category="inline-link-rx"></block></block>
  <block id="72a5926b7fb086fe87e93771f6620556" category="summary">瞭解如何使用「tridentctl」來執行後端管理作業。</block>
  <block id="748a22b5f1312291ad55429ba4b809a0" category="doc">使用tridentctl執行後端管理</block>
  <block id="aeeb03235358f0f4bf3be628bed08721" category="section-title">建立後端</block>
  <block id="34746f7a1d24170eeebf5510a045d43d" category="inline-link-macro">後端組態檔</block>
  <block id="99b7232073a67a8c82304f979e3dc83f" category="paragraph">建立之後 <block ref="03c0b6ed8698193668e92f56e9be3efa" category="inline-link-macro-rx"></block>，執行下列命令：</block>
  <block id="1cabe44c722167581b1e219de6c58341" category="paragraph">如果後端建立失敗、表示後端組態有問題。您可以執行下列命令來檢視記錄、以判斷原因：</block>
  <block id="b5f9999463782f0c36ecc89573a90a49" category="paragraph">識別並修正組態檔的問題之後、您只需再次執行「create」命令即可。</block>
  <block id="412228c370a388e25ee06e8ad7a1da3f" category="paragraph">若要從Astra Trident刪除後端、請執行下列步驟：</block>
  <block id="f6816a6570e6b6097177f9adc1f4805b" category="list-text">擷取後端名稱：</block>
  <block id="11f4ccb46eb9afc4b1187c376b53123f" category="list-text">刪除後端：</block>
  <block id="c87f53b53d179c2b5dcd5fad1efba831" category="admonition">如果Astra Trident已從這個後端配置磁碟區和快照、但該後端仍存在、則刪除後端會使新的磁碟區無法由其進行資源配置。後端將繼續處於「刪除」狀態、而Trident將繼續管理這些磁碟區和快照、直到它們被刪除為止。</block>
  <block id="a6345aca446812b9124c47b385b33f43" category="paragraph">若要檢視Trident知道的後端、請執行下列步驟：</block>
  <block id="cb325bc4dded2aa4744b594966262a99" category="list-text">若要取得摘要、請執行下列命令：</block>
  <block id="9f073deeee70a1418443c3b8379c5c02" category="list-text">若要取得所有詳細資料、請執行下列命令：</block>
  <block id="27709162cf6b8ffced7bb1da6dd49df3" category="paragraph">建立新的後端組態檔之後、請執行下列命令：</block>
  <block id="4ca005817e9c882d0ef15d451a97dbf0" category="paragraph">如果後端更新失敗、表示後端組態有問題、或是您嘗試了無效的更新。您可以執行下列命令來檢視記錄、以判斷原因：</block>
  <block id="20b5ebaa2558437206eb6d1d47577805" category="paragraph">識別並修正組態檔的問題之後、您只需再次執行「update」命令即可。</block>
  <block id="d47f84a3cda326babf841866ad2326ab" category="section-title">識別使用後端的儲存類別</block>
  <block id="02fe9d429af25b46c16a1172d735124f" category="paragraph">這是您可以用Json回答的問題類型範例、其中的「tridentctl」會輸出後端物件。這會使用您需要安裝的「jq」公用程式。</block>
  <block id="e00013adda7b5901ea3e44ae300fd73d" category="paragraph">這也適用於使用「TridentBackendConfig」建立的後端。</block>
  <block id="bee1e2306bc7054ee443dc651eae90de" category="summary">Astra Trident提供一組Prometheus指標端點、可用來監控Astra Trident的效能。</block>
  <block id="44a004cad6eb7ea8839aaa8754ead178" category="doc">監控Astra Trident</block>
  <block id="3f8e7343fbab71427901476dc4eb0cf3" category="paragraph">Astra Trident提供一組Prometheus指標端點、可用來監控Astra Trident的效能。</block>
  <block id="c827f266cf12e05adc1fe95215415abf" category="paragraph">Astra Trident提供的指標可讓您執行下列作業：</block>
  <block id="6111d709595b0a106ff313a249eb9d92" category="list-text">隨時掌握Astra Trident的健全狀況與組態。您可以檢查作業的成功程度、以及是否能如預期般與後端進行通訊。</block>
  <block id="64dbac0ca36d9b1f6a8cf1e8a0123261" category="list-text">檢查後端使用資訊、並瞭解後端上配置的磁碟區數量、以及所耗用的空間量等。</block>
  <block id="7f6516030964b624d9c71fd9ec7f83dd" category="list-text">維護可用後端配置的磁碟區數量對應。</block>
  <block id="e436794bccbe602731bbde7766c1fa49" category="list-text">追蹤效能。您可以查看Astra Trident與後端及執行作業所需的時間。</block>
  <block id="efe0d75090a22534acabc936f8669994" category="admonition">根據預設、Trident的指標會顯示在「/度量」端點的目標連接埠「8001」上。安裝Trident時*預設會啟用這些度量。</block>
  <block id="1ed994b9754ad078cfc46aaf3dbf3a5d" category="list-text">安裝Astra Trident的Kubernetes叢集。</block>
  <block id="eb8bfd69bb88378a6f4d987811890ce6" category="inline-link">容器化Prometheus部署</block>
  <block id="42ae2e91a939ffa9bbda53c10bf5f89f" category="inline-link">原生應用程式</block>
  <block id="050899631250104f17d24b27cc8a12e5" category="list-text">Prometheus執行個體。這可以是<block ref="bd5b9e4bd7b88b90afb221fb760a777c" category="inline-link-rx"></block> 或者、您也可以選擇以執行Prometheus<block ref="3f1d5beaea78c0fd8cb397fbeb1c88bd" category="inline-link-rx"></block>。</block>
  <block id="68276ca40dfbfd36de911402152fa452" category="section-title">步驟1：定義Prometheus目標</block>
  <block id="126ac9f6149081eb0e97c2e939eaad52" category="inline-link">部落格</block>
  <block id="84c49e3c77b51ea186020145ae78103f" category="paragraph">您應該定義Prometheus目標、以收集指標並取得有關後端Astra Trident管理的資訊、以及其建立的磁碟區等資訊。這<block ref="dc7964965bf1b3af43b28caf6231e550" category="inline-link-rx"></block> 說明如何使用Prometheus和Grafana搭配Astra Trident來擷取指標。部落格說明如何在Kubernetes叢集中以營運者的形式執行Prometheus、以及建立ServiceMonitor來取得Astra Trident的指標。</block>
  <block id="c33638e0de87536b08eeb94264671d0f" category="section-title">步驟2：建立Prometheus ServiceMonitor</block>
  <block id="81a21a88b42cd5c83d149a080a627bad" category="paragraph">若要使用Trident指標、您應該建立Prometheus ServiceMonitor、以監控「Trident - csi」服務、並在「metrics」連接埠上聆聽。ServiceMonitor範例如下所示：</block>
  <block id="bfc1ad0fa725ea87ea056b2f2e8b6fe8" category="paragraph">此ServiceMonitor定義會擷取由「Trident -csi」服務傳回的度量、並特別尋找服務的「metrics」端點。因此、Prometheus現在已設定為瞭解Astra Trident的指標。</block>
  <block id="07338294bd70ea1e7710a574d7c8e2ce" category="paragraph">除了可直接從Astra Trident取得的指標之外、Kibelet還透過自己的指標端點、公開許多「kubelet_volume」*指標。Kubelet可提供有關所附加磁碟區、Pod及其處理的其他內部作業的資訊。請參閱<block ref="3f1f0977d0df3e8b343e403140284021" category="inline-link-rx"></block>。</block>
  <block id="1db2022a8a8de5d612eda8e3be0e1065" category="section-title">步驟3：使用PromQL查詢Trident度量</block>
  <block id="f5142e19a3b1edf809fce9d3b6aefc05" category="paragraph">PromQL適用於建立傳回時間序列或表格資料的運算式。</block>
  <block id="8c6fb1be2521fd16337c11c626672678" category="paragraph">以下是一些您可以使用的PromQL查詢：</block>
  <block id="b214fd0009b3929347f097bd843f0bfd" category="section-title">取得Trident健全狀況資訊</block>
  <block id="69fc54b5fac064131422d41948eb77ed" category="list-text">來自Astra Trident的HTTP 2XX回應百分比*</block>
  <block id="f43362a8efc950ece8c14d4e5faddfa4" category="list-text">*透過狀態代碼*來自Astra Trident的休息回應百分比*</block>
  <block id="e69d9a06025140f38adabb6f709f6e5b" category="list-text">*由Astra Trident執行的平均營運持續時間*</block>
  <block id="0505e17dec1e849391ad96f558fa613a" category="section-title">取得Astra Trident使用資訊</block>
  <block id="f160a52d617adf6e6c5d379a9b8bca89" category="list-text">平均Volume大小*</block>
  <block id="eb978bfe01ec0c72ad231f3953e304a2" category="list-text">每個後端配置的Volume空間總計*</block>
  <block id="5f735ae12eafbe476178928f4645475b" category="section-title">取得個別Volume使用量</block>
  <block id="ee0898e9f0caa503f3eaa39c919f4c53" category="admonition">只有同時收集kubelet度量時、才會啟用此功能。</block>
  <block id="0bc301d2423b2ffaa38a5e275e4ec6f9" category="list-text">每個Volume的已用空間百分比*</block>
  <block id="8516d75df966e595bd1b5491acd01515" category="section-title">深入瞭解Astra Trident AutoSupport 遙測技術</block>
  <block id="6f4ddec0f501988d2b0315a77c87eeaa" category="paragraph">依預設、Astra Trident會每日傳送Prometheus指標和基本後端資訊給NetApp。</block>
  <block id="5276683815b670b0addfb8c8a45bbb41" category="list-text">若要停止Astra Trident將Prometheus指標和基本後端資訊傳送給NetApp、請在Astra Trident安裝期間、傳遞「-Silence-autosupport」旗標。</block>
  <block id="ca0f9a86ca33f1d6baa9051bd7f4ed21" category="inline-link">隱私權政策</block>
  <block id="5b58783cbe6d85941bac008d83d3f5c8" category="list-text">Astra Trident也可透過「tridentctl傳送AutoSupport 功能」、隨需將容器記錄傳送給NetApp Support。您需要觸發Astra Trident來上傳記錄。在您提交記錄之前、您應該接受NetApp的<block ref="91b6c0438017ba5fa21c286a96d5acb4" category="inline-link-rx"></block>。</block>
  <block id="63b95d84cf55d169b2592f3ac621055f" category="list-text">除非另有說明、Astra Trident會從過去24小時擷取記錄。</block>
  <block id="5224919a4ae5ccf610fb0ee74e4e7a94" category="inline-link">Trident AutoSupport 的</block>
  <block id="18bc3bf6223e289af8243b039cd8d702" category="list-text">您可以使用「-自」旗標來指定記錄保留時間範圍。例如：「tridentctl傳送AutoSupport 功能不全、自一小時起」。此資訊是透過Astra Trident一起安裝的「Trident -autodupport」容器來收集和傳送。您可以從取得Container映像<block ref="1b00454f0ab35dcec2ee1a0061efc6e5" category="inline-link-rx"></block>。</block>
  <block id="53084cad3d11df800502598c11e2d10b" category="inline-link">EULA</block>
  <block id="b9a52e8d1e9b14b8825c6ea01c0ce6d6" category="list-text">Trident AutoSupport 無法收集或傳輸個人識別資訊（PII）或個人資訊。隨附a<block ref="173a360b412944768c2ab13e6c8fd1c7" category="inline-link-rx"></block> 這不適用於Trident Container映像本身。您可以深入瞭解NetApp對資料安全性與信任的承諾<block ref="8470ff535916bda3f4ea4723647a7135" category="inline-link-rx"></block>。</block>
  <block id="89f0f2832f60f480805faf638848c5b7" category="paragraph">Astra Trident傳送的有效負載範例如下：</block>
  <block id="d2ec86f126f845e79aff07e70bf89472" category="list-text">此資訊將傳送至NetApp的「不只是」端點。AutoSupport AutoSupport如果您使用私有登錄來儲存容器映像、可以使用「-image-registry」旗標。</block>
  <block id="86c5a11fba83815412aec79f67f2d276" category="list-text">您也可以產生安裝Yaml檔案來設定Proxy URL。您可以使用「tridentctl install -generate-custom-yaml」來建立Yaml檔案、並在「trident部署.yaml」中新增「trident -autodupport」容器的「-proxy-URL」引數。</block>
  <block id="46ab735110312d196d5265e534453cba" category="section-title">停用Astra Trident度量</block>
  <block id="8ec47dab227d183e0d3ad0cd529d289b" category="paragraph">要使指標不被報告，您應該生成自定義YAML（使用"-generame-custom-yaml"標誌）並進行編輯，以刪除對"trident－main"容器所調用的"-mication"標誌。</block>
  <block id="8b7b728c6a1e7accd6148646ba730e77" category="summary">瞭解Astra Trident管理後端的不同方法。</block>
  <block id="4342473e01edd2e1440b8b76076f4c9e" category="doc">在後端管理選項之間切換</block>
  <block id="207aacc2f1990ce861bf20cfcd0ca067" category="paragraph">瞭解Astra Trident管理後端的不同方法。隨著「TridentBackendConfig」的推出、系統管理員現在有兩種獨特的後端管理方法。這會提出下列問題：</block>
  <block id="a7b407f571446f9f4a30f63e8160784a" category="list-text">使用「tridentctl」建立的後端、是否能以「TridentBackendConfig」來管理？</block>
  <block id="3e1fc11d05c13404995af2b9fda64675" category="list-text">使用「TridentBackendConfig」建立的後端、是否可以使用「tridentctl」來管理？</block>
  <block id="41b338cd1cea5e2df168994a9bdedf75" category="section-title">使用TridentBackendConfig管理Tridentctl後端</block>
  <block id="d6da18e16f248df47ee8e5139ef0156a" category="paragraph">本節說明透過Kubernetes介面建立「TridentBackendConfig」物件、直接透過「tridentctl」建立的後端管理所需的步驟。</block>
  <block id="bee2ae6068ad50344ddb325737434004" category="paragraph">這將適用於下列案例：</block>
  <block id="e9c4de6d076377511c2b6a8463898ef2" category="list-text">由於使用「tridentctl」建立的後端沒有「TridentBackendConfig」、因此它們是預先存在的後端。</block>
  <block id="8eed1f3ae09f008e2dbfb4280a0c137c" category="list-text">使用「tridentctl」建立的新後端、而其他「TridentBackendConfig」物件則存在。</block>
  <block id="0507a4f0ac746171a414097e7f033dca" category="paragraph">在這兩種情況下、後端仍會繼續存在、Astra Trident排程磁碟區會繼續運作。系統管理員有兩種選擇之一：</block>
  <block id="95328f21e7a6deb7bb94acb3866753a6" category="list-text">繼續使用「tridentctl」來管理使用它建立的後端。</block>
  <block id="82c1dd66573aab904c86b63e2d5486ad" category="list-text">將使用「tridentctl」建立的後端連結至新的「TridentBackendConfig」物件。這樣做將意味着後端將使用“kubedl”而不是“tridentctl”來管理。</block>
  <block id="d12d5022b29f44c340ee55411970fe10" category="paragraph">若要使用「kubecll」管理預先存在的後端、您需要建立連結至現有後端的「TridentBackendConfig」。以下是如何運作的總覽：</block>
  <block id="0637b40285532fa1b6c6a4548e63d2f4" category="list-text">建立Kubernetes機密。此機密包含Astra Trident與儲存叢集/服務通訊所需的認證資料。</block>
  <block id="b863de09ccfaf2861ead350dd78a9933" category="list-text">建立「TridentBackendConfig」物件。其中包含有關儲存叢集/服務的詳細資訊、並參考上一步建立的機密。必須謹慎指定相同的組態參數（例如「s.pec.backendName」、「sec.storagePrefix」、「sPEec.storageDriverName」等）。必須將「Pec.backendName」設定為現有後端的名稱。</block>
  <block id="44411eb1f3a70196b442f0ed4bb62820" category="section-title">步驟0：識別後端</block>
  <block id="c400920d4e58cf882999474fbdf967d3" category="paragraph">若要建立連結至現有後端的「TridentBackendConfig」、您必須取得後端的組態。在此範例中、假設使用下列Json定義建立後端：</block>
  <block id="494cb787cd1c1f78123323c1006f2081" category="section-title">步驟1：建立Kubernetes機密</block>
  <block id="2181a22b3daf7866094f9f0d79da87d0" category="paragraph">建立包含後端認證的秘密、如以下範例所示：</block>
  <block id="c030a8fb45dd1e59dbe723d93fefa8b4" category="section-title">步驟2：建立TridentBackendConfig CR</block>
  <block id="276e25c1cf06c603ba2d133ae2e39dde" category="paragraph">下一步是建立一個「TridentBackendConfig」（TridentBackendConfig）CR、它會自動連結至現有的「ONTAP-NAS-backend」（如本範例所示）。確保符合下列要求：</block>
  <block id="0cbfd18f16db9afdef577eeddd6a8bee" category="list-text">相同的後端名稱是在「s.pec.backendName」中定義。</block>
  <block id="f261e4f2fe82344f35f04f9b3813e425" category="list-text">組態參數與原始後端相同。</block>
  <block id="12bf8ac3a10fbfae1244c8505d9aa91a" category="list-text">虛擬儲存資源池（若有）必須維持與原始後端相同的順序。</block>
  <block id="8f50f98a5b56105263e2f7ab18dc0686" category="list-text">認證資料是透過Kubernetes Secret提供、而非以純文字提供。</block>
  <block id="05c8cd2e49ae2ecaee101c9bc5619d49" category="paragraph">在這種情況下、「TridentBackendConfig」將會如下所示：</block>
  <block id="b5a13f13012993635ae9e627f314bbb9" category="section-title">步驟3：確認TridentBackendConfig CR的狀態</block>
  <block id="63d6f3ce15066b6232a788bb692bf721" category="paragraph">在建立「TridentBackendConfig」之後、其階段必須是「綁定」。它也應反映與現有後端相同的後端名稱和UUID。</block>
  <block id="d1a75f7c76623350486029378ab164c3" category="paragraph">現在可以使用「tbc-ontap-nas-backend」「TridentBackendConfig」物件來完全管理後端。</block>
  <block id="fe1ffe29ba93d2779f921228fcba083e" category="section-title">使用tridentctl管理TridentBackendConfig後端</block>
  <block id="fcea92f3e948217919ca8b4051c2c61e" category="paragraph">可以使用「tridentctl」來列出使用「TridentBackendConfig」建立的後端。此外、系統管理員也可以刪除「TridentBackendConfig」、並確定「pec.deletionPolicy`」設為「效能」、藉此選擇透過「tridentctl」來完全管理此類後端。</block>
  <block id="ab0c73d8e0377b2df5b783d3a76f2249" category="paragraph">例如、假設使用「TridentBackendConfig」建立下列後端：</block>
  <block id="9874d325a018b14fb52adf25f612579e" category="paragraph">從輸出中可以看到、「TridentBackendConfig」已成功建立、並繫結至後端（觀察後端的UUID）。</block>
  <block id="416d2581db02ba9bc1187cf17c86a1c4" category="section-title">步驟1：確認刪除原則已設定為保留</block>
  <block id="ea64db0654e81907c68ffc52d023c3c7" category="paragraph">讓我們來看看「改革政策」的價值。這需要設定為「維護」。這將確保刪除「TridentBackendConfig」（TridentBackendConfig）的CR時、後端定義仍會存在、而且可以使用「tridentctl」進行管理。</block>
  <block id="1ad97e0f65ef91102831baaa31630c76" category="admonition">除非將「刪除原則」設定為「需要」、否則請勿繼續下一步。</block>
  <block id="e66283ad5a3e477773a4c58ea53d800f" category="section-title">步驟2：刪除TridentBackendConfig CR</block>
  <block id="8313f77478cb0df464604ae4435acce2" category="paragraph">最後一個步驟是刪除「TridentBackendConfig」（TridentBackendConfig）。確認「刪除原則」設為「保留」之後、您可以繼續刪除：</block>
  <block id="c1493b6d6e05639a816e5772bbb491af" category="paragraph">刪除「TridentBackendConfig」物件之後、Astra Trident便會移除該物件、而不會實際刪除後端本身。</block>
  <block id="08c4bc4ac4edd9b12963c0596478d746" category="summary">Astra Trident可以利用「SCSI拓撲功能」、選擇性地建立磁碟區、並將磁碟區附加到Kubernetes叢集中的節點。</block>
  <block id="3d4635d3cf4f27b0e87f3fe86a84744d" category="doc">使用「csi拓撲」</block>
  <block id="4abea6bac3b0b48d11dd8dcd02a11bf9" category="inline-link">「csi拓撲」功能</block>
  <block id="92e6030d252cfd43e0567e282a0d2c9b" category="paragraph">Astra Trident可以利用、選擇性地建立磁碟區、並將磁碟區附加至Kubernetes叢集中的節點<block ref="80b9a4f4a1bc9851317207ee3477041a" category="inline-link-rx"></block>。使用「csi拓撲」功能、可根據區域和可用性區域、限制對磁碟區的存取、只能存取一部分節點。如今、雲端供應商可讓Kubernetes管理員建立以區域為基礎的節點。節點可位於某個區域內的不同可用度區域、或位於不同區域之間。為了協助在多區域架構中配置工作負載的磁碟區、Astra Trident使用了csi拓撲。</block>
  <block id="592af423a2f6a51f57c639ec7f7b245e" category="admonition">深入瞭解「csi拓撲」功能<block ref="ff042e7f24bd2adcec09d78466034177" category="inline-link-rx"></block>。</block>
  <block id="bbdcaf9b704dc7a7cf73e6000101b65a" category="paragraph">Kubernetes提供兩種獨特的Volume繫結模式：</block>
  <block id="93590d63acbb4fa6864a4665157fbcea" category="list-text">Astra Trident將「Volume BindingMode」設為「Immediate（立即）」、可在沒有任何拓撲感知的情況下建立磁碟區。建立永久虛擬磁碟時、即會處理磁碟區繫結和動態資源配置。這是預設的「Volume BindingMode」、適用於未強制拓撲限制的叢集。建立永續性磁碟區時、不會對要求的Pod排程需求有任何相依性。</block>
  <block id="5fca24470d51aa51b0fb2d0f27c25c68" category="list-text">將「Volume BindingMode」設為「WaitForFirst消費者」時、會延遲建立和繫結永久磁碟區、直到排程並建立使用永久磁碟的Pod為止。如此一來、就能建立磁碟區、以符合拓撲需求所強制執行的排程限制。</block>
  <block id="3bbc2da928dcf77a048cdd745fe7d208" category="admonition">「等待使用者」繫結模式不需要拓撲標籤。這可獨立於「csi拓撲」功能使用。</block>
  <block id="edff21c44983aaa85506a3dfe467c494" category="paragraph">若要使用「csi拓撲」、您需要下列項目：</block>
  <block id="6127fe8ac0294f905386b8e26b9a62a3" category="list-text">執行1.17或更新版本的Kubernetes叢集。</block>
  <block id="f9213d77978aabdafac36d2b0a184e56" category="list-text">叢集中的節點應該有標籤來介紹拓撲認知（「topology、Kubernetes.io/sregion」和「topology、Kubernetes.io/Zone」）。在安裝Astra Trident以識別拓撲之前、這些標籤*應該會出現在叢集*的節點上。</block>
  <block id="0bd58c9826639ac2db106c3b277a7e0f" category="section-title">步驟1：建立可感知拓撲的後端</block>
  <block id="c7d3751a47274aaa616d77a14f2e2722" category="paragraph">Astra Trident儲存後端可根據可用性區域、選擇性地配置磁碟區。每個後端都可以攜帶一個可選的「支援拓撲」區塊、代表必須支援的區域和區域清單。對於使用此類後端的StorageClass、只有在受支援地區/區域中排程的應用程式要求時、才會建立Volume。</block>
  <block id="168d311a918475a654f296f89a7da983" category="paragraph">以下是後端定義的範例：</block>
  <block id="3e778236fe8f94ccc453f52d827e3719" category="admonition">「支援拓撲」是用來提供每個後端的區域和區域清單。這些區域和區域代表StorageClass中可提供的允許值清單。對於包含後端所提供之區域和區域子集的StorageClass、Astra Trident會在後端建立磁碟區。</block>
  <block id="217d95247b26701da7fd823884d84723" category="paragraph">您也可以定義每個儲存資源池的「支援拓撲」。請參閱下列範例：</block>
  <block id="c6c80256ac468b3d88d7b62d8753f192" category="paragraph">在此範例中、「REGion」和「Zone」標籤代表儲存資源池的位置。「topology、Kubernetes.io/region」和「topology、Kubernetes.io/Zone」決定儲存資源池的使用來源。</block>
  <block id="54e204e8e05b6eb24d965741eb977e69" category="section-title">步驟2：定義可感知拓撲的StorageClass</block>
  <block id="090f70d385b4a21aa6c8f2a0ca558616" category="paragraph">根據提供給叢集中節點的拓撲標籤、可以定義StorageClass以包含拓撲資訊。這將決定做為所提出之永久虛擬磁碟要求候選的儲存資源池、以及可以使用Trident所提供之磁碟區的節點子集。</block>
  <block id="ecb383148a1bc974cba3ac735a79f4c6" category="paragraph">請參閱下列範例：</block>
  <block id="ab0c7ec9411ede93aa545fbc095c0e75" category="paragraph">在上述StorageClass定義中、「volumeBindingMode」設定為「WaitForFirst消費者」。在Pod中引用此StorageClass所要求的PVCS之前、系統不會對其採取行動。此外、「opedtopologies」也提供要使用的區域和區域。《NetApp-san—use-east1》StorageClass將在上述定義的「SAN後端-us-east1」後端上建立PVCS。</block>
  <block id="df340fb31051c975afb3518dfd32e07c" category="section-title">步驟3：建立並使用PVC</block>
  <block id="f98be29d352e7c38a6502e76bbfaf34c" category="paragraph">建立StorageClass並對應至後端後端後端之後、您現在就可以建立PVCS。</block>
  <block id="c4b17c8733f9f36fdc682242d2b64ab2" category="paragraph">請參閱以下「sPEC」範例：</block>
  <block id="427e01a8fca484c85a1e8e3a672b999a" category="paragraph">使用此資訊清單建立永久虛擬環境可能會產生下列結果：</block>
  <block id="e65f170821e3417d48579a28989a9260" category="paragraph">若要Trident建立磁碟區並將其連結至PVc、請在Pod中使用PVc。請參閱下列範例：</block>
  <block id="9b8ff27bceb4601d1f866c4cf39fe449" category="paragraph">此pod化 規範會指示Kubernetes在「us-east1」區域的節點上排程pod、並從「us-east1-a」或「us-east1-b」區域中的任何節點中進行選擇。</block>
  <block id="c93345596f9f82deea04d17ef8c6ca89" category="paragraph">請參閱下列輸出：</block>
  <block id="0be3f6c5ce787eead27ad72578c2d31a" category="section-title">更新後端以納入支援的拓撲</block>
  <block id="476950aea923438779c9544953093cb9" category="paragraph">您可以使用「tridentctl後端更新」來更新現有的後端、以納入「最上層拓撲」清單。這不會影響已配置的磁碟區、而且只會用於後續的PVCS。</block>
  <block id="ded10f93b9e4453980b7009035c63418" category="inline-link">管理容器的資源</block>
  <block id="47ea3356a13b3f6644e6c05450e9d5e1" category="list-text"><block ref="47ea3356a13b3f6644e6c05450e9d5e1" category="inline-link-rx"></block></block>
  <block id="6370f866cf64618c026027da41bd248e" category="inline-link">節點選取器</block>
  <block id="2a4ad9fc807789134426a1b2babc5733" category="list-text"><block ref="2a4ad9fc807789134426a1b2babc5733" category="inline-link-rx"></block></block>
  <block id="873bf2b9b61a741ce5b7326a3a053489" category="inline-link">關聯性與反關聯性</block>
  <block id="ec5df0a2adb621359563958138462e34" category="list-text"><block ref="ec5df0a2adb621359563958138462e34" category="inline-link-rx"></block></block>
  <block id="e1e08e40036f927a0e660c22aa837f88" category="inline-link">污染與容許</block>
  <block id="66b1e0aa9cd6e46c0b85fdf56a15154a" category="list-text"><block ref="66b1e0aa9cd6e46c0b85fdf56a15154a" category="inline-link-rx"></block></block>
  <block id="ac8d6c792ab9df0b15a26713390895f1" category="summary">瞭Cloud Volumes Service 解如何使用提供的範例組態、將適用於Google Cloud的功能組態設定為Astra Trident安裝的後端。</block>
  <block id="fd1248bc6e4583a3f250f8e575cd59fe" category="doc">針對GCP後端設定CVS</block>
  <block id="2562e7447cd588d1768109da5ba66ef1" category="paragraph">瞭Cloud Volumes Service 解如何使用所提供的範例組態、將NetApp for Google Cloud Platform（GCP）設定為Astra Trident安裝的後端。</block>
  <block id="b85237ff884eb3aa5c20d9ffcdabbeac" category="admonition">適用於Google Cloud的NetApp Cloud Volumes Service 支援的CVS效能磁碟區大小不得低於100 GiB、或CVS磁碟區大小不得低於300 GiB。如果所要求的磁碟區小於最小大小、Astra Trident會自動建立最小大小的磁碟區。</block>
  <block id="b0cee72642f5457a71ddd0b49efb6d93" category="inline-link">適用於 Google Cloud Cloud Volumes Service</block>
  <block id="da195e41c537042ae77405110c4512ff" category="paragraph">以設定及使用<block ref="5129d3f1116e9c5221bfcf965a1ede35" category="inline-link-rx"></block> 後端、您需要下列項目：</block>
  <block id="6801d56ba08d1acc2876c196223d531a" category="list-text">使用NetApp CVS設定的Google Cloud帳戶</block>
  <block id="2c00ff9c7700dc3529c57f0a5281bbe2" category="list-text">Google Cloud帳戶的專案編號</block>
  <block id="43752d169c5729fffa3a6557a0978cb8" category="list-text">Google Cloud服務帳戶的角色為「netappcloudVolumes.admin」</block>
  <block id="5d6ade9bdfebc79abf4c55e55a2c9941" category="list-text">CVS服務帳戶的API金鑰檔</block>
  <block id="7d0ee86ffc673e47ce20265e1e21317f" category="inline-link">GCP上的CVS服務類型</block>
  <block id="1f57356f89e79e6730290eddcf7b84ee" category="paragraph">Astra Trident現在支援預設的較小磁碟區<block ref="fc2935a8a76e337f6e814f65964a47b6" category="inline-link-rx"></block>。對於以「儲存類別=軟體」建立的後端、現在磁碟區的資源配置大小最小為300 GiB。CVS目前在「管制可用度」下提供此功能、並不提供技術支援。使用者必須註冊才能存取低於1TiB的磁碟區<block ref="daab940ca038632df7b3bcdb2ce67b4b" category="inline-link-rx"></block>。NetApp建議客戶使用低於1TiB的磁碟區來處理*非正式作業*的工作負載。</block>
  <block id="adf38902d2794fb5eb0ede6324a90db7" category="admonition">使用預設CVS服務類型（「儲存類別=軟體」）部署後端時、使用者必須取得GCP上的子1TiB磁碟區功能、以取得相關專案編號和專案ID的存取權。這是Astra Trident配置子1TiB磁碟區所需的功能。如果沒有、則低於600 GiB的PVCS將無法建立Volume。使用取得對低於1TiB磁碟區的存取權<block ref="d5347d47b24e3303f1c7b0ae61e08dc7" category="inline-link-rx"></block>。</block>
  <block id="3e6d0b5d82e6a07b21f37953b4f07f2b" category="paragraph">由Astra Trident針對預設CVS服務層級所建立的磁碟區、將會配置如下：</block>
  <block id="b0f9c06798383f1aa62530b497a530f7" category="list-text">小於300 GiB的PVCS會導致Astra Trident建立300 GiB CVS Volume。</block>
  <block id="f8d45755378c123e72db60a65c99c9eb" category="list-text">介於300 GiB到600 GiB之間的PVCS會導致Astra Trident建立一個所需大小的CVS Volume。</block>
  <block id="60f847f16dcff8ca2ff2ce3434bcb4c9" category="list-text">介於600 GiB和1 TiB之間的PVCS會導致Astra Trident建立1TiB CVS Volume。</block>
  <block id="96ca04bda01b9542611aa702d16b37ee" category="list-text">大於1 TiB的PVCS會導致Astra Trident建立所需大小的CVS Volume。</block>
  <block id="07cc9934740ba3dd46a0d7d2c9502d39" category="cell">「GCP-CVS」</block>
  <block id="f476273c71e20fc5a845a5345a620117" category="cell">驅動程式名稱+「_」+ API金鑰的一部分</block>
  <block id="6eb82a822b962404b9694b93f2967679" category="cell">「torageClass」</block>
  <block id="f26f4f79d1de66f6ce1a2d9a1663dc5e" category="cell">儲存類型：可選擇「硬體」（效能最佳化）或「軟體」（CVS服務類型）</block>
  <block id="6a9b4c6a3586ab6a85d6c78e7dda0570" category="cell">Google Cloud帳戶專案編號。此值可在Google Cloud入口網站的首頁找到。</block>
  <block id="c785bbb8190e6c0c816762918e34a0d7" category="cell">CVS帳戶區域。這是後端配置磁碟區的區域。</block>
  <block id="3e4dad689bfe319e0980748c1c2175a7" category="cell">Google Cloud服務帳戶的API金鑰、其角色為「netappcloudVolumes.admin」。其中包含Google Cloud服務帳戶私密金鑰檔案（逐字複製到後端組態檔）的JSON-格式內容。</block>
  <block id="99d5bed813f066a1a1551b1bdab48e21" category="cell">Proxy URL（如果需要代理伺服器才能連線至CVS帳戶）。Proxy伺服器可以是HTTP Proxy或HTTPS Proxy。對於HTTPS Proxy、會跳過憑證驗證、以允許在Proxy伺服器中使用自我簽署的憑證。不支援已啟用驗證的Proxy伺服器。</block>
  <block id="5a5b2759e0577a3e22002ed8430f2b4f" category="cell">新磁碟區的CVS服務層級。這些值包括「標準」、「高級」和「極端」。</block>
  <block id="e472abc54914c303a14c29f7e853a28a" category="cell">"標準"</block>
  <block id="e39a04a98487bb1fd113f63d47331565" category="cell">疑難排解時要使用的偵錯旗標。例如：「\{"API":fals,"method":true}」。除非您正在進行疑難排解並需要詳細的記錄傾印、否則請勿使用此功能。</block>
  <block id="e96ca96c25a07de5f03e2535b0c2f7fc" category="paragraph">如果使用共享VPC網路、則必須同時指定「ProjectNumber」和「hostProjectNumber」。在這種情況下、「專案編號」是服務專案、而「主機專案編號」則是主機專案。</block>
  <block id="91bffb05ce7b35189932ad387d14e41b" category="paragraph">「apiRegion」代表Astra Trident建立CVS磁碟區的GCP區域。在建立跨區域Kubernetes叢集時、在「apiRegion」中建立的CVS磁碟區可用於多個GCP區域的節點上排程的工作負載。請注意、跨區域流量會產生額外成本。</block>
  <block id="31842a4ad923dd3481336d7d93dc2068" category="list-text">若要啟用跨區域存取、您的StorageClass定義「alledtopologies」必須包含所有地區。例如：</block>
  <block id="34c1edfb4ac8581528c3791be680aeb3" category="inline-link">CVS服務類型</block>
  <block id="457c2f1fead29343fe617ea61b06aaff" category="list-text">「torageClass」是選用參數、可用來選取所需的參數<block ref="46dc1bdb584c5005116d9d2a4d889e1d" category="inline-link-rx"></block>。您可以從基礎CVS服務類型（「儲存類別=軟體」）或CVS效能服務類型（「儲存類別=硬體」）中進行選擇、這是Trident預設使用的類型。請務必指定「apiRegion」、在後端定義中提供各自的CVS「儲存類別」。</block>
  <block id="8ae8f69dea7cff0617560bc62f9c8c21" category="admonition">Astra Trident與Google Cloud上的基礎CVS服務類型整合、是一項**測試版功能*、不適用於正式作業工作負載。Trident *完全支援* CVS效能服務類型、並依預設使用。</block>
  <block id="4dd7128ceae058946c44bbbb0985ec6f" category="paragraph">每個後端都會在單一Google Cloud區域中配置磁碟區。若要在其他區域建立磁碟區、您可以定義其他後端。</block>
  <block id="51b2015e6da8653f4041b71312ad43fe" category="cell">存取「.snapshot」目錄</block>
  <block id="e76dcf1d6497658a2994b5f1f65b7a83" category="cell">""（接受CVS預設值為0）</block>
  <block id="dc78a90de250a0f2ca8ad52ee0c5d21b" category="cell">新磁碟區的大小</block>
  <block id="33b57ed56f35d9bd9c44a151d47870c5" category="cell">「100Gi」</block>
  <block id="24ee58a4f143adf08af9c1d30049aab9" category="admonition">針對在CVS Google Cloud後端上建立的所有磁碟區、Trident會在儲存資源池上的所有標籤配置時複製到儲存磁碟區。儲存管理員可以定義每個儲存資源池的標籤、並將儲存資源池中建立的所有磁碟區分組。這是根據後端組態中提供的一組可自訂標籤、方便區分磁碟區的方法。</block>
  <block id="db7f67d90a618d3698e7aab6ddef7169" category="section-title">範例2：基礎CVS服務類型組態</block>
  <block id="22765d2acb079f52fa8f5b179e9a74fc" category="paragraph">此範例顯示使用基本CVS服務類型的後端定義、此服務類型適用於一般用途的工作負載、提供輕度/中度效能、以及高分區可用度。</block>
  <block id="32c780bbc74d6c4f4c9ff8d54332fef9" category="section-title">範例3：單一服務層級組態</block>
  <block id="3862c5daf26e4fabfbac9261779b440a" category="paragraph">此範例顯示後端檔案、可將相同層面套用至Google Cloud us-west2區域中所有由Astra Trident建立的儲存設備。此範例也顯示後端組態檔中使用「proxyURL」的情形。</block>
  <block id="59e397d220ba994003ab3439526d48d1" category="paragraph">此範例顯示使用虛擬儲存資源池設定的後端定義檔、以及回溯到這些資源池的「儲存類別」。</block>
  <block id="a1306d5e7389ac9f3740a973a3175a2c" category="paragraph">在下圖所示的範例後端定義檔中、會針對所有儲存資源池設定特定的預設值、將「快照保留」設為5%、將「匯出規則」設為0.00.0/0。虛擬儲存資源池是在「儲存區」區段中定義的。在此範例中、每個個別的儲存資源池都會設定自己的「服務層級」、有些資源池則會覆寫預設值。</block>
  <block id="7229192fbc3d9420b90f84958fee3b0d" category="paragraph">下列StorageClass定義係指上述儲存資源池。您可以使用「parameters.selector`」欄位、為每個StorageClass指定用於裝載磁碟區的虛擬集區。該磁碟區會在所選的資源池中定義各個層面。</block>
  <block id="b60daecbb1685b08e94947d4137aa916" category="paragraph">第一個StorageClass（「CVS極致額外保護」）會對應至第一個虛擬儲存資源池。這是唯一提供極致效能、快照保留率為10%的資源池。最後一個StorageClass（「CVS額外保護」）會呼叫提供快照保留10%的任何儲存資源池。Astra Trident決定選取哪個虛擬儲存池、並確保符合快照保留需求。</block>
  <block id="8682abd0ce083533bad141869c96ab2a" category="summary">Astra Trident提供多項管理磁碟區的功能。瞭解Astra Trident為Volume提供的功能。</block>
  <block id="b42cbc6e68075c106b9faa27e4931091" category="doc">執行Volume作業</block>
  <block id="eb487790322c4b8e9b4953d60be1acee" category="paragraph">深入瞭解Astra Trident提供的功能、協助您管理磁碟區。</block>
  <block id="9e325272e7aed7c7bd6c28ff6fa4a90f" category="list-text"><block ref="9e325272e7aed7c7bd6c28ff6fa4a90f" category="inline-link-macro-rx"></block></block>
  <block id="e5879288a130fbd8d0b8682cfc375c4f" category="inline-link-macro">使用快照</block>
  <block id="c499fa59a1c9a0f6da195782a581f2e3" category="list-text"><block ref="c499fa59a1c9a0f6da195782a581f2e3" category="inline-link-macro-rx"></block></block>
  <block id="2243e252be826d6ec5e767668d9f961d" category="inline-link-macro">展開Volume</block>
  <block id="56661e701892ff873e44b62ffeec85e5" category="list-text"><block ref="56661e701892ff873e44b62ffeec85e5" category="inline-link-macro-rx"></block></block>
  <block id="5f48c343984786005c9830d96c6fca87" category="inline-link-macro">匯入磁碟區</block>
  <block id="c0417f5bbd54c5dc1c3704d6b566fcf3" category="list-text"><block ref="c0417f5bbd54c5dc1c3704d6b566fcf3" category="inline-link-macro-rx"></block></block>
  <block id="3d79668ab3683a20086b2953dd541cfc" category="summary">後端定義了Astra Trident與儲存系統之間的關係。它告訴Astra Trident如何與該儲存系統通訊、以及Astra Trident如何從該儲存系統配置磁碟區。Astra Trident會自動從後端提供符合儲存類別所定義需求的儲存資源池。深入瞭解如何根據您擁有的儲存系統類型來設定後端。</block>
  <block id="87dc0337d3ded2211d9b01c32e22d90d" category="doc">設定後端</block>
  <block id="2acbb5dd492d792d00383b0c76ade4ad" category="list-text"><block ref="2acbb5dd492d792d00383b0c76ade4ad" category="inline-link-macro-rx"></block></block>
  <block id="252e63ff646a0204671ca04a26b88e06" category="inline-link-macro">設定Cloud Volumes Service 適用於Google Cloud Platform後端的功能</block>
  <block id="c00b6e370d4496e06d2135275a992af5" category="list-text"><block ref="c00b6e370d4496e06d2135275a992af5" category="inline-link-macro-rx"></block></block>
  <block id="f2733a323df72dea4b230205225bdc13" category="inline-link-macro">設定NetApp HCI 一個不只是功能的SolidFire 後端</block>
  <block id="b1064b6f7a5906eac23601dc24ba95a8" category="list-text"><block ref="b1064b6f7a5906eac23601dc24ba95a8" category="inline-link-macro-rx"></block></block>
  <block id="a3610578ce54198653d7e0b2cc53c05d" category="inline-link-macro">使用ONTAP 功能不一的Cloud Volumes ONTAP NAS驅動程式來設定後端</block>
  <block id="f4f833852bac4217eff92d53c1bd24dc" category="list-text"><block ref="f4f833852bac4217eff92d53c1bd24dc" category="inline-link-macro-rx"></block></block>
  <block id="df7d9b009cdb0a2623872cb3f905e161" category="list-text"><block ref="df7d9b009cdb0a2623872cb3f905e161" category="inline-link-macro-rx"></block></block>
  <block id="d7f015aa2f1d488e17e175dac6de3149" category="list-text"><block ref="d7f015aa2f1d488e17e175dac6de3149" category="inline-link-macro-rx"></block></block>
  <block id="e4f61797b38c111b04c612b285a06659" category="summary">瞭解如何準備使用ONTAP 不含NetApp功能的NAS驅動程式來設定功能完善的後端。ONTAP</block>
  <block id="9bc537b16cee9c42d1e2aa0048a2c426" category="paragraph">瞭解如何準備使用ONTAP 不含NetApp功能的NAS驅動程式來設定功能完善的後端。ONTAP對於所有ONTAP 的不支援端點、Astra Trident至少需要指派一個集合體給SVM。</block>
  <block id="00b8b321c68facfb94b31690cbd23e00" category="paragraph">對於所有ONTAP 的不支援端點、Astra Trident至少需要指派一個集合體給SVM。</block>
  <block id="c6cd2f38be30f5256f7116692ab56edd" category="paragraph">請記住、您也可以執行多個驅動程式、並建立指向一個或多個驅動程式的儲存類別。例如、您可以設定金級、使用「ONTAP-NAS」驅動程式、以及使用「ONTAP-NAS-經濟」的銅級。</block>
  <block id="fff0b214bfcab1734e0bec7b1d1f6079" category="paragraph">您所有的Kubernetes工作節點都必須安裝適當的NFS工具。請參閱 <block ref="9ec363a49b52db56773849151c5853d4" category="inline-link-macro-rx"></block> 以取得更多詳細資料。</block>
  <block id="997cff957213b9212a22d7cac2b4275d" category="list-text">使用產生的憑證測試驗證。以ONTAP Management LIF IP和SVM名稱取代&lt;SfManagement LIF&gt;和&lt;vserver name&gt;。您必須確保LIF的服務原則設定為「預設資料管理」。</block>
  <block id="07b434b23f63ca6490df33b213599320" category="section-title">管理NFS匯出原則</block>
  <block id="9d66483f8378ffe30cde84e1b6dbf484" category="paragraph">Astra Trident使用NFS匯出原則來控制其所配置之磁碟區的存取。</block>
  <block id="a297d9b7dbc393d5e8a5b3f98bcc9337" category="paragraph">使用匯出原則時、Astra Trident提供兩種選項：</block>
  <block id="0c87d42e666bbc299da2143379484281" category="list-text">Astra Trident可動態管理匯出原則本身；在此作業模式中、儲存管理員會指定代表可接受IP位址的CIDR區塊清單。Astra Trident會自動將這些範圍內的節點IP新增至匯出原則。或者、如果未指定CIDR、則會將節點上找到的任何全域範圍單點傳送IP新增至匯出原則。</block>
  <block id="e6add289c2b1cd5da45e00f3098b35de" category="list-text">儲存管理員可以建立匯出原則、並手動新增規則。除非在組態中指定不同的匯出原則名稱、否則Astra Trident會使用預設的匯出原則。</block>
  <block id="4603f08ad837f4108ff2fe7665b0b1e3" category="section-title">動態管理匯出原則</block>
  <block id="801eb935808311c71ba522e642d12e3f" category="paragraph">「csi Trident」的20.04版提供動態管理輸出原則的能力ONTAP 、以利實現幕後。這可讓儲存管理員為工作節點IP指定允許的位址空間、而非手動定義明確的規則。它可大幅簡化匯出原則管理；修改匯出原則不再需要在儲存叢集上進行手動介入。此外、這有助於將儲存叢集的存取限制在指定範圍內有IP的工作者節點、以支援精簡且自動化的管理。</block>
  <block id="8b78bee43bfa1617b12c311f0ad26e81" category="admonition">只有「csi Trident」才能動態管理匯出原則。請務必確保工作節點未被NATed。</block>
  <block id="44568b7468885ca198a66bb088b9e3b5" category="paragraph">必須使用兩種組態選項。以下是後端定義範例：</block>
  <block id="2aaaab87910c3ed67eecb3ea8578619e" category="admonition">使用此功能時、您必須確保SVM中的根連接點具有預先設定的匯出原則、並具有允許節點CIDR區塊（例如預設匯出原則）的匯出規則。請務必遵循NetApp建議的最佳實務做法、為Astra Trident指定SVM。</block>
  <block id="4975fc485ff51ca8f82c6ea96f927287" category="paragraph">以下是使用上述範例說明此功能的運作方式：</block>
  <block id="acdca8a11423c4bc209db0a1a4909294" category="list-text">將「AutoExpportPolicy」設為「true」。這表示Astra Trident將為「svm1」SVM建立匯出原則、並使用「AutoExportCIDR」位址區塊來處理新增和刪除規則的作業。例如、在SVM上、UUID為403b5326-8482-40dB/96d0-d83fb3f4daec和「autodportPolicy」設為「true」的後端會建立名為「trident 403b5326-8482-40dB/96d0-d83fb3f4daec」的匯出原則。</block>
  <block id="1bdcc9b4be16b7ad2f1b54c892491a43" category="list-text">「AutoExportCIDR」包含位址區塊清單。此欄位為選用欄位、預設為「0.00.0.0/0」、「：/0」。如果未定義、Astra Trident會新增在工作者節點上找到的所有全域範圍單點傳送位址。</block>
  <block id="96d8905e0d42a0d3573c71fd4ecce0b8" category="paragraph">在此範例中、會提供「192．168．0．0/24」位址空間。這表示、屬於此位址範圍的Kubernetes節點IP將新增至Astra Trident所建立的匯出原則。當Astra Trident登錄其執行的節點時、會擷取節點的IP位址、並對照「AutoExpportCIDR」中提供的位址區塊進行檢查。篩選IP之後、Astra Trident會針對所探索的用戶端IP建立匯出原則規則、並針對所識別的每個節點建立一個規則。</block>
  <block id="4646f167a1fb9819f41f28d5ab11c1fa" category="paragraph">您可以在建立後端後、更新「AutoExpportPolicy」和「AutoExpportCTR」。您可以為自動管理或刪除現有CIDR的後端附加新的CIDR。刪除CIDR時請務必謹慎、以確保不會中斷現有的連線。您也可以選擇停用後端的「autodportPolicy」、然後回到手動建立的匯出原則。這需要在後端組態中設定「exportPolicy」參數。</block>
  <block id="18deff64a140a603bdb6070abed4eed4" category="paragraph">Astra Trident建立或更新後端之後、您可以使用「tridentctl」或對應的「tridentbackend」CRD來檢查後端：</block>
  <block id="83af513d9b9d50c1dc648bfea29797cb" category="paragraph">當節點新增至Kubernetes叢集並向Astra Trident控制器註冊時、現有後端的匯出原則會更新（前提是它們位於後端的「AutoExpportCIDR」中指定的位址範圍內）。</block>
  <block id="fd85ad7b0ce4e83937cbc1012086b9b3" category="paragraph">移除節點時、Astra Trident會檢查所有線上的後端、以移除節點的存取規則。Astra Trident將此節點IP從託管後端的匯出原則中移除、可防止惡意掛載、除非叢集中的新節點重複使用此IP。</block>
  <block id="cda5977f42a72ef440d3b6233b9970bf" category="paragraph">對於先前存在的後端、使用「tridentctl update backend」更新後端、可確保Astra Trident自動管理匯出原則。這會建立以後端UUID命名的新匯出原則、而後端上的磁碟區會在重新掛載時使用新建立的匯出原則。</block>
  <block id="de1d1f6b64a5c5b6890c313888b290b7" category="admonition">刪除具有自動管理匯出原則的後端、將會刪除動態建立的匯出原則。如果重新建立後端、則會將其視為新的後端、並導致建立新的匯出原則。</block>
  <block id="920708f6d71767dcff22f9e43b4ec0c0" category="paragraph">如果即時節點的IP位址已更新、您必須重新啟動節點上的Astra Trident Pod。Astra Trident接著會更新其管理的後端匯出原則、以反映此IP變更。</block>
  <block id="141da5e3f576179cbf2f6506b07ef538" category="summary">從2001版Astra Trident開始、您可以在Kubernetes層建立持續Volume（PV）的快照。您可以使用這些快照來維護由Astra Trident所建立之磁碟區的時間點複本、並排程建立其他磁碟區（複本）。</block>
  <block id="72dfd0afcd8b2eda3e5ec2268b7da6b2" category="paragraph">從2001版Astra Trident開始、您可以在Kubernetes層建立PV快照。您可以使用這些快照來維護由Astra Trident所建立之磁碟區的時間點複本、並排程建立其他磁碟區（複本）。Volume Snapshot可支援「ONTAP-NAS」、「ONTAP-SAN」、「ONTAP-SAN經濟」、「Poolidfire - SAN」、「GCP - CVS」、 以及「azure-NetApp-file-fil」驅動程式。</block>
  <block id="332138092a1597c4d5e69679199e490c" category="inline-link">版本部落格</block>
  <block id="006b05a472974308122f7f05ef147e80" category="admonition">此功能可從Kubernetes 1.17（試用版）取得、GA版本為1.20。若要瞭解從試用版移轉至GA所涉及的變更、請參閱<block ref="02a1c904d0035e03c61e261dbe622345" category="inline-link-rx"></block>。隨着GA的問世、推出了「v1」API版本、並向下相容於「v1Beta1」快照。</block>
  <block id="26c4fe55fc424c7b41b517701f54f074" category="inline-link">正在驗證Webhook</block>
  <block id="46b189b23dfbd5f3f622a1c04590b05e" category="admonition">「csi Snapshotter」提供<block ref="927ab0e919f8034deab1249bed53a289" category="inline-link-rx"></block> 協助使用者驗證現有的v1Beta1快照、並確認它們是有效的資源物件。驗證Webhook會自動標示無效的快照物件、並防止未來建立無效物件。驗證Webhook是由Kubernetes Orchestrator部署。請參閱指示以手動部署驗證Webhook<block ref="07cb3cdda0599ec9f2e82062ecd12e82" category="inline-link-rx"></block>。尋找無效快照資訊清單的範例<block ref="bceda34f0850fc68d82f08741abbc69e" category="inline-link-rx"></block>。</block>
  <block id="f535be08d3997f1a801b132862d99a5c" category="paragraph">以下範例說明使用快照所需的架構、並說明如何建立及使用快照。</block>
  <block id="551730f3a084f9dee63029647e815d3a" category="section-title">步驟1：設定Volume SnapshotClass</block>
  <block id="d7ca7162c394dee752c35d07a92823da" category="inline-link-macro">「Volume SnapshotClass」</block>
  <block id="b91e58d7d80a51e4fa86b9ab27dca505" category="paragraph">在建立Volume Snapshot之前、請先設定 <block ref="c740b46915208e935cb2017421ec0264" category="inline-link-macro-rx"></block>。</block>
  <block id="4744d2c82c1c470ab40280b2ebba0c08" category="paragraph">《driver》指的是Astra Trident的csi驅動程式。「刪除原則」可以是「刪除」或「保留」。當設定為「保留」時、即使刪除「Volume Snapshot」物件、也會保留儲存叢集上的基礎實體快照。</block>
  <block id="0ab6380edce0d0e7b8538ebf3215ebbd" category="section-title">步驟2：建立現有PVc的快照</block>
  <block id="ef55488b02c4b0173eb6f7bb867db086" category="paragraph">快照是針對名為「pvc1」的永久虛擬資料建立、快照名稱則設為「pvc1-snap」。</block>
  <block id="501470eb266ff6637de993e3f193ba40" category="paragraph">這會建立一個「Volume Snapshot」物件。Volume Snapshot類似於一個PVC、並與代表實際快照的「Volume SnapshotContent」物件相關聯。</block>
  <block id="320e7c242b569ab5bbdaa490b3df817e" category="paragraph">您可以透過描述「pvc1-snap」Volume Snapshot的「Volume SnapshotContent」物件來識別該物件。</block>
  <block id="b3841b02d7da01fde480332e3295a08e" category="paragraph">「快照內容名稱」可識別提供此快照的Volume SnapshotContent物件。「Ready to use」（準備使用）參數表示Snapshot可用於建立新的PVc。</block>
  <block id="7957320b126678e9b713ef146b3ac009" category="section-title">步驟3：從Volume Snapshot建立PVCS</block>
  <block id="4d780b57cad08f64bcd1ea7351a15588" category="paragraph">請參閱下列範例、瞭解如何使用快照建立永久虛擬資料：</block>
  <block id="2592284f87bba60e4c05337a134ef047" category="paragraph">「Data來源」顯示、必須使用名為「pvc1-snap」的Volume Snapshot建立PVc作為資料來源。這會指示Astra Trident從快照建立一個永久虛擬資料。建立好永久虛擬基礎架構之後、就能將它附加到Pod上、就像使用任何其他永久虛擬基礎架構一樣使用。</block>
  <block id="bda01e3aa44c411129a6fbf29445bfb4" category="admonition">刪除具有相關快照的持續Volume時、對應的Trident Volume會更新為「刪除狀態」。若要刪除Astra Trident磁碟區、則應移除該磁碟區的快照。</block>
  <block id="fab3fcd54585164dbc9d7adf57f8e3d9" category="list-text"><block ref="fab3fcd54585164dbc9d7adf57f8e3d9" category="inline-link-macro-rx"></block></block>
  <block id="c740b46915208e935cb2017421ec0264" category="list-text"><block ref="c740b46915208e935cb2017421ec0264" category="inline-link-macro-rx"></block></block>
  <block id="821b0ad941ad2559ef18eb8de56a470e" category="summary">Kubernetes叢集中的所有工作節點都必須能夠掛載您已為Pod配置的磁碟區。如果您使用的是其中一個後端的ONTAP-NAS、ONTAP-NAS-節約、ONTAP-NAS-Flexgroup驅動程式、則您的工作節點需要NFS工具。否則他們需要iSCSI工具。</block>
  <block id="89d83ec6e8ec0c087fbc4aedc555b362" category="doc">準備工作節點</block>
  <block id="8b1d1603c11aec689eb0d88a5ebabb67" category="paragraph">Kubernetes叢集中的所有工作節點都必須能夠掛載您已為Pod配置的磁碟區。如果您使用的是「ONTAP-NAS」、「ONTAP-NAS-節約」或「ONTAP-NAS-Flexgroup」驅動程式來支援其中一個後端、則您的工作節點需要NFS工具。否則他們需要iSCSI工具。</block>
  <block id="9e4d9c5be865862a92caf88e2beae43f" category="paragraph">最新版本的RedHat CoreOS預設會同時安裝NFS和iSCSI。</block>
  <block id="f5c6a9fc65ae9fb698dc758b23c4ee97" category="admonition">安裝NFS或iSCSI工具之後、您應該一律重新啟動工作節點、否則將磁碟區附加至容器可能會失敗。</block>
  <block id="b7a66d04a41292979004906785008ca9" category="section-title">NFS磁碟區</block>
  <block id="31562df6c30f7b7efb939eaa0ee48415" category="admonition">您應確保NFS服務在開機期間啟動。</block>
  <block id="29ba980a9e9adedc9414ea868c74ebd5" category="section-title">iSCSI磁碟區</block>
  <block id="222194999a60d89dfcd0ff5867f49e88" category="paragraph">使用iSCSI磁碟區時、請考量下列事項：</block>
  <block id="12fe03bf2457cc4e4e90af10a2f7092f" category="list-text">Kubernetes叢集中的每個節點都必須具有唯一的IQN。*這是必要的先決條件*。</block>
  <block id="aaa200e86b57cd2a527761ec2bf4b9b0" category="list-text">如果使用帶有「Poolidfire - san」驅動程式的RHcos 4.5或更新版本、或RHEL或CentOS 8.2或更新版本、請確定在「/etc/iscsi/iscsid.conf」中將CHAP驗證演算法設定為「md5」。</block>
  <block id="0bad70dcf33f40dcc0d528d58b9eac76" category="inline-link">RedHat的文件</block>
  <block id="dbb4705e17a1f8ba49af109d4f366609" category="list-text">使用執行RHEL/RedHat CoreOS搭配iSCSI PV的工作節點時、請務必在StorageClass中指定「disccard」掛載選項、以執行即時空間回收。請參閱<block ref="166e862efdc516354d90f75a38532ddd" category="inline-link-rx"></block>。</block>
  <block id="1a5157a00ea5806f553766d5b3b114fd" category="list-text">檢查iscsite-initier-utils版本是否為6.6.0.874-2.el7或更新版本：</block>
  <block id="55c13faac514053f94cef55eb316c9a4" category="paragraph">「rpm -q iscsiscsiscs-initier-utils」</block>
  <block id="19955b3c2d2c1cfc1c82c2fe0347a065" category="list-text">將掃描設為手動：</block>
  <block id="d2db641a196e6107eecf8c32f7cd7a4e" category="paragraph">「Udo sed -I 's/^\（node.session.scan\).*/\1 = manual /」/etc/iscsi/iscsid.conf）</block>
  <block id="75419edaab27be09afdb3415e83d93f6" category="paragraph">「Udo mpathconf --enable --with _docathd y --fisco_multipaths n」</block>
  <block id="60c268e00db3206011b54b01705d7211" category="admonition">確保在"default"（錯誤）下"etc/multipath.conf"包含"fappe_multipaths no"。</block>
  <block id="90a9d2e9b1b4ae58a957ff989f0732ba" category="paragraph">「啟用Udo systemctl -現在是iscsid多路徑」</block>
  <block id="0f905161e16c2cfa712f1fb7640afee4" category="paragraph">「Udo systemctl enable - NOW iSCSI」</block>
  <block id="a53508e75911225e5de8b5febc82cf12" category="list-text">檢查開放式iSCSI版本是否為2.0.874-5ubuntu2．10或更新版本（適用於雙聲網路）或2.0.874-7.1ubuntu6.1或更新版本（適用於焦點）：</block>
  <block id="f6802be29c6bca93d8f44768b0347ac9" category="paragraph">「Dpkg -l open-iscsi」</block>
  <block id="b85c80e2af7e3d7dd06b874ed048d430" category="paragraph">「Udo tee /etc/multipath.conf」&lt;&lt;-'EOF'預設值｛user_易 記名稱yes focs_multipaths no｝EOF Sudo systemctl enable --NOW multipath-tools.service Sudo服務multipath-ttools restart」</block>
  <block id="b163c84ad8a4e55a17b51aad8074093e" category="list-text">確保已啟用並執行「open-iscsi」和「多路徑工具」：</block>
  <block id="8741473f7a80f4dd83071161b2c95301" category="paragraph">「Udo systemctl狀態multipath-ttools/」「show systemcl enable -現在open-iscsi.service`「show systemctl狀態open-iscsi」</block>
  <block id="1b757fe9c8a149de349a32b8d21feb54" category="admonition">對於Ubuntu 18.04、您必須先使用「iscsiadmd」探索目標連接埠、然後再啟動「open-iscsi」、iSCSI精靈才能啟動。您也可以修改「iSCSI」服務、以自動啟動「iscsid」。</block>
  <block id="fc1adc7c8cce02d3bd3dbc3e7ae52990" category="admonition">如果您想要深入瞭解自動工作節點準備（這是試用版功能）、請參閱 <block ref="a57ab171c518329af81ea9d2536c4e10" category="inline-link-macro-rx"></block>。</block>
  <block id="cf13ba16f33b5f6772614929649be6c2" category="summary">您可以使用「tridentcl匯入」將現有的儲存磁碟區匯入為Kubernetes PV。</block>
  <block id="3cf3b5626cbcac07ab0c5304e90870e8" category="section-title">支援Volume匯入的驅動程式</block>
  <block id="be8c8810fd80d5e84acf47d57d4e0dbc" category="paragraph">下表說明支援匯入磁碟區的驅動程式、以及這些磁碟區所引進的版本。</block>
  <block id="b8e7b465df7c5979dc731d06e84ce2cf" category="cell">版本</block>
  <block id="b7a56ff81a861dd454ce0ee6725a66c2" category="paragraph">19.04</block>
  <block id="57ee8ed0b2796ea5f35b10f9ae5d68cd" category="cell">「olidfire - san」</block>
  <block id="e228843381960c06d1035c4219901307" category="cell">《azure-NetApp-fil形》</block>
  <block id="949a374fc5a78d436e3067ee2de19cbe" category="cell">《GCP—CVS》</block>
  <block id="cb4e2f5c0cf3e43444774c2af2ada914" category="section-title">為什麼要匯入磁碟區？</block>
  <block id="b347f0936a6b1f232605f50447a930de" category="paragraph">將Volume匯入Trident的使用案例有多種：</block>
  <block id="cbccddedba4ba9a336f83d60dd1454f0" category="list-text">容器化應用程式、並重新使用現有的資料集</block>
  <block id="f0dd3bee13b8c14005d98bfbb9a48bf3" category="list-text">將資料集的複本用於暫時性應用程式</block>
  <block id="97161389816216aabbaffd954ef4a1f4" category="list-text">重建故障的Kubernetes叢集</block>
  <block id="fd045b8743b2b7018e0480bc9a2dd4c5" category="list-text">在災難恢復期間移轉應用程式資料</block>
  <block id="92f0642c89b416c59d914adfb1e33828" category="section-title">匯入如何運作？</block>
  <block id="902881a0ede032887467576928b25fe0" category="paragraph">Volume匯入程序會使用持續磁碟區宣告（PVc）檔案來建立PVc。至少、PVc檔案應包含名稱、命名空間、存取模式及storageClassName欄位、如下例所示。</block>
  <block id="be25b6ff84fa0d015f05f46bbbb6abd1" category="paragraph">「tridentctl」用戶端用於匯入現有的儲存磁碟區。Trident會持續儲存Volume中繼資料並建立PVc和PV、以匯入Volume。</block>
  <block id="bcf64a12adc519c7d409f80e5cccbe24" category="paragraph">若要匯入儲存磁碟區、請指定包含該磁碟區的Astra Trident後端名稱、以及唯一識別儲存區上該磁碟區的名稱（例如ONTAP FlexVol ：Wsel, Element Volume、CVS Volume path）。儲存磁碟區必須允許讀取/寫入存取、且可由指定的Astra Trident後端存取。需要「-f]字串引數、並指定Yaml或Json PVc檔案的路徑。</block>
  <block id="021814b63472d2b6dab37ce7d62c3ea2" category="paragraph">當Astra Trident收到匯入磁碟區要求時、現有的磁碟區大小會在PVc中決定及設定。儲存驅動程式匯入磁碟區之後、PV會以PVc的ClaimRef建立。在PV中、回收原則一開始設定為「需要」。Kubernetes成功繫結了PVc和PV之後、系統會更新回收原則以符合儲存類別的回收原則。如果儲存類別的回收原則為「刪除」、則儲存磁碟區會在刪除PV時刪除。</block>
  <block id="9d0bcc94449080a9fef1873acd638fb3" category="paragraph">當使用「-NO-Manage」引數匯入磁碟區時、Trident不會在物件生命週期的永久虛擬磁碟或PV上執行任何額外作業。由於Trident會忽略「無管理」物件的PV和PVc事件、因此在刪除PV時不會刪除儲存磁碟區。此外、也會忽略其他作業、例如Volume Clone和Volume resize。如果您想要將Kubernetes用於容器化工作負載、但想要管理Kubernetes以外儲存磁碟區的生命週期、則此選項非常實用。</block>
  <block id="76057e180d7b3edcebaa935c7ccab687" category="paragraph">將註釋新增至PVc和PV、這有兩種用途、表示已匯入磁碟區、以及是否管理了PVc和PV。不應修改或移除此附註。</block>
  <block id="b20cebeefba038b396f3fe0494dad01b" category="paragraph">Trident 19.07及更新版本可處理PV的附加元件、並在匯入磁碟區時掛載磁碟區。對於使用舊版Astra Trident的匯入、資料路徑不會有任何作業、而且磁碟區匯入不會驗證是否可以掛載磁碟區。如果在Volume匯入時發生錯誤（例如StorageClass不正確）、您可以將PV上的回收原則變更為「保留」、刪除PVC和PV、然後重新嘗試Volume匯入命令來恢復。</block>
  <block id="420279975083139d76ba010ce1956b74" category="section-title">ONTAP-NAS和ONTAP-NAA-Flexgroup匯入</block>
  <block id="1b539ba5a07e124e582b2e4bfc489200" category="paragraph">每個使用「ONTAP-NAS」驅動程式建立的Volume FlexVol 、都是ONTAP 一個在整個叢集上的功能。使用「ONTAP-NAS」驅動程式匯入FlexVols的運作方式相同。已存在於某個叢集上的一個功能、可以匯入為「ONTAP-NAS」的PVc。FlexVol ONTAP同樣地FlexGroup 、也可以將此數據匯入為「ONTAP-NAS-Flexgroup」PVCS。</block>
  <block id="62a991a68d1e323e147c11deeaecdad2" category="admonition">若要由Trident匯入某個類型的Rw。ONTAP如果磁碟區是DP類型、則它是SnapMirror目的地磁碟區；在將磁碟區匯入Trident之前、您應該先中斷鏡射關係。</block>
  <block id="b368a23170f18969c0c51a21bc3e2754" category="admonition">「ONTAP-NAS」驅動程式無法匯入及管理qtree。「ONTAP-NAS」和「ONTAP-NAS-flexgroup」驅動程式不允許重複的Volume名稱。</block>
  <block id="20a208be23a9e8a96ac28258acb9daa4" category="paragraph">例如、若要在名為「ONTAP_NAS」的後端匯入名為「manended_volume」的磁碟區、請使用下列命令：</block>
  <block id="deba327c80a83b34abd4ba640b21e454" category="paragraph">若要匯入名為「Unmanaged _volume」（在「ONTAP_NAS後端」上）的磁碟區（Trident無法管理）、請使用下列命令：</block>
  <block id="9be12be7e9d5bb9faa5c9a952feafe07" category="paragraph">使用「-no－管理」引數時、Trident不會重新命名磁碟區、也不會驗證磁碟區是否已掛載。如果未手動掛載磁碟區、則磁碟區匯入作業會失敗。</block>
  <block id="4004cfbd69335a9d1ba9357ea0dfb079" category="admonition">已修正先前使用自訂Unix權限 匯入磁碟區的錯誤。您可以在您的PVc定義或後端組態中指定unixPermissions、並指示Astra Trident依此匯入磁碟區。</block>
  <block id="d346ffc6ef3483fea67a321732823960" category="section-title">ONTAP-SAN匯入</block>
  <block id="d995f4307341e76349912869caa5e2fb" category="paragraph">Astra Trident也能匯入ONTAP 包含單一LUN的SAN FlexVols。這與「ONTAP-SAN」驅動程式一致、因為它會為FlexVol 每個實體磁碟和FlexVol 一個LUN在整個過程中建立一個版本。您可以使用「tridentctl import'」命令、方法與其他情況相同：</block>
  <block id="1dd2cc952267be6c2cc8e5cff2b5aab1" category="list-text">請加入「ONTAP-SAN」後端名稱。</block>
  <block id="e395471eab1d4c8fbc8452e98a95d0c5" category="list-text">請提供FlexVol 需要匯入的名稱。請記住FlexVol 、這個功能只包含一個必須匯入的LUN。</block>
  <block id="9e6bd670c6fd6b2808fae744834b7675" category="list-text">提供必須搭配「-f」旗標使用的PVc定義路徑。</block>
  <block id="36b577af0f959f68e5e66336695e816c" category="list-text">您可以選擇管理或不受管理的永久虛擬網路。根據預設、Trident會管理PVc、並在FlexVol 後端重新命名該LUN。若要匯入為非託管磁碟區、請傳遞「-no－管理」旗標。</block>
  <block id="f898748ff73fc5faf70687cbb0051311" category="admonition">匯入未受管理的「ONTAP-SAN」Volume時、您應確定FlexVol 將位於該功能的LUN命名為「lun0」、並對應至具有所需啟動器的igroup。Astra Trident會自動處理這項作業、以便進行託管匯入。</block>
  <block id="66f7455d3b73d0f9938704ee67b1f38a" category="paragraph">然後Astra Trident會匯入FlexVol 該等物件、並將其與PVc定義建立關聯。Astra Trident也將FlexVol 該等數據重新命名為「PVC-&lt;uuid&gt;'格式、FlexVol 並將LUN重新命名為「lun0」。</block>
  <block id="2d37ad5bcf7d115e10de14a38db72232" category="admonition">建議匯入沒有現有作用中連線的磁碟區。如果您要匯入使用中的Volume、請先複製該Volume、然後再執行匯入。</block>
  <block id="72b3664e6e381ccc62031c13f7ad6df9" category="paragraph">若要匯入FlexVol 在「ONTAP_san預設」後端上出現的「onta-san託管」功能、請執行「tridentctl匯入」命令：</block>
  <block id="26d61ca2331eea0b3aca6c534f2dfcc7" category="admonition">若要由Astra Trident匯入某個類型的RW磁碟區。ONTAP如果磁碟區為DP類型、則為SnapMirror目的地磁碟區；您應該先中斷鏡射關係、再將磁碟區匯入Astra Trident。</block>
  <block id="4b8f39874197ebe1407531bd66624aa3" category="section-title">元素匯入</block>
  <block id="b00215e0583bb02c2474fa62f51462fa" category="paragraph">您可以使用NetApp Element Trident將支援功能的軟體/NetApp HCI磁碟區匯入Kubernetes叢集。您需要Astra Trident後端的名稱、以及磁碟區的獨特名稱和PVc檔案、作為「tridentctl import'」命令的引數。</block>
  <block id="c517a1b34541565def824e8e9aeb0524" category="admonition">Element驅動程式支援重複的Volume名稱。如果有重複的Volume名稱、Trident的Volume匯入程序會傳回錯誤。因應措施是複製磁碟區、並提供唯一的磁碟區名稱。然後匯入複製的Volume。</block>
  <block id="3be8989f2135d86f8b2d60f19eed3846" category="section-title">GCP-CVS匯入</block>
  <block id="2c7e2299fa3c14b5e6f60015eb016a87" category="admonition">若要匯入以NetApp Cloud Volumes Service 支援的GCP磁碟區、請使用磁碟區路徑來識別該磁碟區、而非其名稱。</block>
  <block id="37202a3ee6673127b64f84af27fdf523" category="paragraph">若要在後端匯入名為「gcpcvs_YEppr」的「gcp-CVS」磁碟區、並將磁碟區路徑匯入為「adj統 法社-jolly Swift」、請使用下列命令：</block>
  <block id="87e30ad820e5b10036bd18284c1f25ad" category="admonition">Volume路徑是Volume匯出路徑的一部分、位於：/之後。例如、如果匯出路徑為「10.0.0.1：/統法社-jolly Swift」、則Volume路徑為「adj統 法社-jolly Swift」。</block>
  <block id="9f25c8d8bca8641faa974c73a8d2f5da" category="section-title">Azure與NetApp檔案匯入</block>
  <block id="e8945ce1398c6d24aa1d518bca08034c" category="paragraph">若要在後端匯入名為「azurenetappfiles_40517」的「azure-netapp-fil」磁碟區、並使用磁碟區路徑「importvol1」、請執行下列命令：</block>
  <block id="c3417eb755bee1658ae5b42ff2115193" category="admonition">anf磁碟區的磁碟區路徑會出現在裝載路徑中的：/之後。例如、如果掛載路徑為「10.0.0.2：/importvol1」、則磁碟區路徑為「importvol1」。</block>
  <block id="ff342df7522d6b527768cc6bfe5f9fae" category="summary">Astra Trident可讓Kubernetes使用者在建立磁碟區之後擴充磁碟區。尋找擴充iSCSI和NFS磁碟區所需組態的相關資訊。</block>
  <block id="15d79b565b148caa23e6f2b53813413d" category="section-title">展開iSCSI Volume</block>
  <block id="0b981ab19df55a28a02578aa5f326db8" category="paragraph">您可以使用「SCSI資源配置程式」來擴充iSCSI持續磁碟區（PV）。</block>
  <block id="f8f338469c62eb8604f5304af08466ba" category="admonition">iSCSI磁碟區擴充支援「ontap－san」、「ONTAP－san經濟」、「Poolidfire－san」等驅動程式、需要Kubernetes 1.16及更新版本。</block>
  <block id="13311fb741bdb3b9d877937311a2d64d" category="paragraph">擴充iSCSI PV包括下列步驟：</block>
  <block id="5141e3596f63bc5db3fd9ee32b736127" category="list-text">編輯StorageClass定義、將「owvolVolume Expansion」欄位設定為「true」。</block>
  <block id="9e7362e47322994c4d272d377e83f31b" category="list-text">編輯PVC定義並更新「s.pec.estices.storage」、以反映新的所需大小、此大小必須大於原始大小。</block>
  <block id="0860a1b7122f04033fb722b29d878468" category="list-text">必須將PV附加至Pod、才能調整其大小。調整iSCSI PV的大小有兩種情況：</block>
  <block id="7ac758b4597806f6880d9618fa093e52" category="list-text">如果PV附加至Pod、Astra Trident會在儲存後端擴充磁碟區、重新掃描裝置、並重新調整檔案系統的大小。</block>
  <block id="7efffb2478ff651b7e45343b4e9f6fa8" category="list-text">嘗試調整未附加PV的大小時、Astra Trident會在儲存後端上擴充磁碟區。在將永久虛擬磁碟綁定至Pod之後、Trident會重新掃描裝置並重新調整檔案系統的大小。然後、Kubernetes會在擴充作業成功完成後、更新PVc大小。</block>
  <block id="ec3e34c26eaf059dc3ac58d8efc9fa37" category="paragraph">以下範例顯示擴充iSCSI PV的運作方式。</block>
  <block id="fe9ee1935ea7894fe4fd2f600993cd7d" category="section-title">步驟1：設定StorageClass以支援Volume擴充</block>
  <block id="c83b8171dcc233263cf7eeaef8da6a4d" category="paragraph">對於已存在的StorageClass、請編輯此類以包含「owalumVolume Expansion」參數。</block>
  <block id="59973fd7be015512b53fe121a13d5580" category="section-title">步驟2：使用您建立的StorageClass建立一個永久虛擬儲存設備</block>
  <block id="8592e7b08d26d1aa2ef3c44409c736fa" category="paragraph">Astra Trident會建立持續磁碟區（PV）、並將其與此持續磁碟區宣告（PVc）建立關聯。</block>
  <block id="8dacc1d7fdb5bfd3f8a4daedf3ccdd88" category="section-title">步驟3：定義一個連接至PVc的Pod</block>
  <block id="85f5dec267aa48cff82ccaf993019e6d" category="paragraph">在此範例中、會建立使用「shan -PVc」的Pod。</block>
  <block id="ebae1958b6002fb43077a474d845284c" category="section-title">步驟4：展開PV</block>
  <block id="63188b171689bcd93b1ca818b3a2ab9c" category="paragraph">若要調整從1Gi建立至2Gi的PV大小、請編輯PVc定義、並將「sec.resumes.requests.storage」更新為2Gi。</block>
  <block id="eabf614ed44fe1c3e78cb2300949eb63" category="section-title">步驟5：驗證擴充</block>
  <block id="28abbd693f528f04d0ff068b3013fcd6" category="paragraph">您可以檢查PVc、PV和Astra Trident Volume的大小、以正確驗證擴充作業：</block>
  <block id="75b8249751a8ea5869a0b5a8e465efc1" category="section-title">展開NFS Volume</block>
  <block id="ec2577b4770848fd294d6ca069c34a43" category="paragraph">Astra Trident支援在「ONTAP-NAS」、「ONTAP-NAs-P節約」、「ONTAP-NAs-flexgroup」、「GCP-CVS」和「azure-NetApp-fils」後端配置NFS PV的Volume擴充。</block>
  <block id="578f10bb7cad2abad1cbbcb9a9a732f9" category="paragraph">若要調整NFS PV的大小、管理員必須先將「ow淺Volume Expansion」欄位設定為「true」、以設定儲存類別以允許磁碟區擴充：</block>
  <block id="27b4a9ed8609e35526601aa8d8be1ab9" category="paragraph">如果您已經建立了沒有此選項的儲存類別、只要使用「kubecl Edit storageclass'」來編輯現有的儲存類別、即可進行磁碟區擴充。</block>
  <block id="784f78e647973a0dcfa11b7a028c7eae" category="paragraph">Astra Trident應為此PVC建立20MiB NFS PV：</block>
  <block id="3b16cea25bd4a9aaf5a9c3dcc13ea7eb" category="section-title">步驟3：展開PV</block>
  <block id="e5c2c0bfcfbe01e6174199aaff9616a5" category="paragraph">若要將新建立的20MiB PV調整至1GiB、請編輯PVC並將「siec.resumes.requests.storage」設為1GB：</block>
  <block id="4a59ce1bc63fd7e6333968fb4bbd9d45" category="section-title">步驟4：驗證擴充</block>
  <block id="c70f05fed7c73e0be4a0b24c8532a87c" category="paragraph">您可以檢查PVc、PV和Astra Trident Volume的大小、以正確驗證調整大小：</block>
  <block id="0cc7642bbaf969ea355ea12764841c91" category="summary">瞭解如何透過ONTAP Astra Trident安裝來建立及使用NetApp NAS驅動程式。本節提供後端組態範例、以及如何將後端對應至StorageClass的詳細資料。</block>
  <block id="19ce3b2e7823907e5153f00fe04f64f7" category="doc">組態選項與範例</block>
  <block id="a85f55a18073767a4945eac810e72cb2" category="cell">「ONTAP-NAS」、「ONTAP-NAS-節約 型」、「ONTAP-NAS-flexgroup」、「ONTAP-SAN」、「ONTAP-san經濟型」</block>
  <block id="237d7a1666794b0937adde704bb4795c" category="cell">驅動程式名稱+「_」+ dataLIF</block>
  <block id="bf926726f76b2da3a5585d6c7f464adc" category="cell">叢集或SVM管理LIF的IP位址</block>
  <block id="c560b8d02093547d93a87c72d8b16eaf" category="cell">「10.0.0.1」、「[2001:1234:abcd:::fefo]」</block>
  <block id="d78aba84ea5a1453c8c9f4a603a84040" category="cell">傳輸協定LIF的IP位址。IPv6使用方括弧。設定後無法更新</block>
  <block id="57b6222ff12a4dc5a5607f02194a83ce" category="cell">除非另有說明、否則由SVM衍生</block>
  <block id="af7117fef2444ab632b393ea31e722b8" category="cell">啟用「AutoExpportPolicy」時、用來篩選Kubernetes節點IP的CIDR清單</block>
  <block id="e537a193eb90bd46a645ce750bb5f3fc" category="cell">[「0.00.0/0」、「：/0」]</block>
  <block id="b5cbbe3dadaab4a036fdb38af67ee936" category="cell">套用到磁碟區的任意JSON-格式化標籤集</block>
  <block id="1d76382e861d2df96647216b26d38948" category="cell">「」</block>
  <block id="cbdaf784161be9806a24fe78a8046c01" category="cell">「用戶端憑證」</block>
  <block id="a84cbedc106b973917ae925d04533f97" category="cell">用戶端憑證的Base64編碼值。用於憑證型驗證</block>
  <block id="8545e54eea74cf2579fbe1cb56b11862" category="cell">「clientPrivate Key」</block>
  <block id="4a54228eb2be79492f8f76bb814ddf63" category="cell">用戶端私密金鑰的Base64編碼值。用於憑證型驗證</block>
  <block id="b071cd8105f8f59b777098388b7a3322" category="cell">「可信賴的CACertifcate」</block>
  <block id="ffe4ce29fe1a6176d496c40332e9cb98" category="cell">受信任CA憑證的Base64編碼值。選用。用於憑證型驗證</block>
  <block id="83425e975af1b2d60355aa4162300198" category="cell">連線至叢集/ SVM的使用者名稱。用於認證型驗證</block>
  <block id="63d06d6cc41e485615f99a3aad0002b3" category="cell">連線至叢集/ SVM的密碼。用於認證型驗證</block>
  <block id="972abf48cbbadbcd573754140d35e19a" category="cell">要使用的儲存虛擬機器</block>
  <block id="ef65dd3301d78701f7cfcf8a01834f2f" category="cell">如果指定SVM "managementLIF"則衍生</block>
  <block id="19563dd7f566b71700028a34e74a1107" category="cell">要使用之SAN磁碟區的igroup名稱</block>
  <block id="1c59f4b76e4f9bf529f88205cd0a8ac6" category="cell">「Trident -&lt;後端-UUID&gt;」</block>
  <block id="e3f688f3aa653574b3253640aa98f47c" category="cell">在SVM中配置新磁碟區時所使用的前置碼。設定後無法更新</block>
  <block id="a996d2f8e072c583d6cc26aa1e4aba87" category="cell">「Trident」</block>
  <block id="b6ea9c09f8ac215ea68be83cd0240aac" category="cell">如果使用率高於此百分比、則無法進行資源配置。*不適用於Amazon FSX for ONTAP Sfor Sfor *</block>
  <block id="c07510d6ca04643a0f81501d2407311b" category="cell">如果要求的磁碟區大小高於經濟驅動程式的此值、則無法進行資源配置。</block>
  <block id="9d96dfa28e7454a1119de523123a1e05" category="cell">「」（預設不強制執行）</block>
  <block id="c9a303edbc714d051896c3a678e59a8a" category="cell">《lunsPerFlexvol》</block>
  <block id="79892588cbecd0b88729ea1a55b2a3a4" category="cell">每FlexVol 個LUN的最大LUN數量、範圍必須在[50、200]</block>
  <block id="2d782f413944b272c911c548418a18a3" category="cell">「100」</block>
  <block id="ae0784115c8f815d4a2ca170c59f3c99" category="cell">疑難排解時要使用的偵錯旗標。範例：｛"API"：假、「方法」：true｝</block>
  <block id="08b29ae4ea305dd80d0c3a96da64e57e" category="cell">以逗號分隔的NFS掛載選項清單</block>
  <block id="a13306f726fdf72d2d992a7ebdc63b1b" category="cell">每FlexVol 個邊的最大qtree數、必須在範圍內[50、300]</block>
  <block id="28326357ec2f8c06e01271c4ee2201f1" category="cell">「200」</block>
  <block id="f703d18584e163e18762e4dc13ad96a0" category="cell">《useREST》</block>
  <block id="1cd645595b39c5c8647c3c9a9c395322" category="cell">使用ONTAP Isrest API的布林參數。*技術預覽*</block>
  <block id="32a44f322750e15e2564c4648823248e" category="admonition">「useREST」是一種建議用於測試環境、而非用於正式作業工作負載的技術預覽。當設為「true」時、Astra Trident會使用ONTAP 「Isrest API」與後端通訊。此功能需要ONTAP 使用更新版本的版本。此外ONTAP 、所使用的登入角色必須能夠存取「ONTAP 發揮作用」應用程式。這對預先定義的「vsadmin」和「叢集管理」角色感到滿意。</block>
  <block id="57dc6ee0e65147014833f0586de90e46" category="paragraph">若要與ONTAP 此叢集通訊、您應該提供驗證參數。這可能是安全登入或安裝憑證的使用者名稱/密碼。</block>
  <block id="928832023634637f59ed58617f382728" category="admonition">如果您使用Amazon FSX for NetApp ONTAP Sendbackend、請勿指定「limitAggregateusage」參數。Amazon FSx for NetApp ONTAP 的「fsxadmin」和「vsadmin」角色不包含擷取Aggregate使用量並透過Astra Trident加以限制的必要存取權限。</block>
  <block id="c8725b273a5d1a37cc4d2ceafe222f96" category="admonition">建立後端時、請記住、建立後無法修改「dataLIF」和「儲存前置字元」。若要更新這些參數、您需要建立新的後端。</block>
  <block id="118ec9e23f24f4ea0355c0a8fc7644f8" category="paragraph">可以為「managementLIF」選項指定完整網域名稱（FQDN）。也可以為「dataLIF」選項指定FQDN、在這種情況下、FQDN將用於NFS裝載作業。如此一來、您就能建立循環DNS、在多個資料生命期之間實現負載平衡。</block>
  <block id="3de9530f105c3bf7d417c73170a03e5a" category="paragraph">所有ONTAP 的不完整驅動程式也可設定為IPv6位址。請務必使用「-use IPv6」旗標來安裝Astra Trident。必須謹慎定義方括弧內的「managementLIF」IPv6位址。</block>
  <block id="e896e54be988d9d7199d0e796b08b19b" category="admonition">使用IPv6位址時、請務必在方括弧內定義「managementLIF」和「dataLIF」（若包含在後端定義中）、例如[28e8：d9fb:a825:b7bf:69a8：d02f：9e7b:3555]。如果未提供「data LIF」、Astra Trident會從SVM擷取IPv6資料LIF。</block>
  <block id="06390865e9ec240a0e295db286d7bef7" category="paragraph">使用「AutoExport Policy」（自動匯出原則）和「AutoExport CIDR」（自動匯出CTR）選項、「csi Trident」（SCSI Trident）可以自動管理匯出原則。所有的ONTAP-NAS-*驅動程式均支援此功能。</block>
  <block id="e98c128dda80ebab208244e4f62e7372" category="paragraph">對於「ONTAP-NAS-EAS-經濟」驅動程式、「limitVolume Sizes」選項也會限制其管理的qtree和LUN磁碟區大小上限、而「qtreesPerFlexvol'」選項則可自訂每FlexVol 個經濟體系的最大配額樹數。</block>
  <block id="92e660f52759e323dbc0ec71541a2e9e" category="paragraph">可以使用「nfsMountOptions」參數來指定掛載選項。Kubernetes持續磁碟區的掛載選項通常會在儲存類別中指定、但如果儲存類別中未指定掛載選項、則Astra Trident會改回使用儲存後端組態檔中指定的掛載選項。如果儲存類別或組態檔中未指定掛載選項、則Astra Trident不會在相關的持續磁碟區上設定任何掛載選項。</block>
  <block id="7587c806a60b3f88688668f32e0b766c" category="admonition">Astra Trident在所有使用「ONTAP-NAS」和「ONTAP-NAS-flexgroup」建立的磁碟區的「Comments」（註解）欄位中設定資源配置標籤。根據所使用的驅動程式、意見會設定在FlexVol 以下項目上：（「ONTAP-NAS」）或FlexGroup （「ONTAP-NAS-flexgroup」）。Astra Trident會在儲存資源池配置時、將儲存資源池上的所有標籤複製到儲存磁碟區。儲存管理員可以定義每個儲存資源池的標籤、並將儲存資源池中建立的所有磁碟區分組。這是根據後端組態中提供的一組可自訂標籤、方便區分磁碟區的方法。</block>
  <block id="193a49bcfb561fea878daa5efe72cad9" category="section-title">用於資源配置磁碟區的後端組態選項</block>
  <block id="4b162a795c1916b18df8b6a76a8fef49" category="paragraph">您可以在組態的特定區段中、使用這些選項來控制預設配置每個Volume的方式。如需範例、請參閱下列組態範例。</block>
  <block id="26161d08a960162cd8633d0e23058aed" category="cell">LUN的空間分配</block>
  <block id="3be488c6a2bc52ceb7e8685ca24927d7" category="cell">「真的」</block>
  <block id="3bce5b103341500856287f5347e19f28" category="cell">空間保留模式；「無」（精簡）或「Volume」（完整）</block>
  <block id="e84c56670c389b09fcad5da7309a165b" category="cell">「無」</block>
  <block id="77f69e470b8766d2dc5df4b7f469ed72" category="cell">要使用的Snapshot原則</block>
  <block id="54b94bba5d336f4e3d5fd7e88544fad1" category="cell">要指派給所建立磁碟區的QoS原則群組。選擇每個儲存集區/後端的其中一個qosPolicy或adaptiveQosPolicy</block>
  <block id="952e3a12d35e717bf86a6000b0c08976" category="cell">《adaptiveQosPolicy》</block>
  <block id="831924abd31e90baedabed887dbfc24c" category="cell">要指派給所建立磁碟區的調適性QoS原則群組。選擇每個儲存集區/後端的其中一個qosPolicy或adaptiveQosPolicy。不受ONTAP-NAS-經濟支援。</block>
  <block id="11f9fcd55c1d81cf352f86fe4cdfd444" category="cell">保留給快照「0」的磁碟區百分比</block>
  <block id="af6626456fa359992271ea88de34094f" category="cell">如果「快照原則」為「無」、則其他為「」</block>
  <block id="6f5c0c94b1a17baffd2c33facaa10db6" category="cell">建立複本時、從其父複本分割複本</block>
  <block id="4ecb8b22870f9fb0645228cd38177c49" category="cell">啟用NetApp Volume加密</block>
  <block id="41da49bdd3fd88b2ddc6be7d6df1b335" category="cell">新磁碟區的安全樣式</block>
  <block id="4cda9f87625c6278fae1a50fcbbf96d3" category="cell">「UNIX」</block>
  <block id="592a5879ac095ef6ca504cc43a9d7939" category="cell">分層原則以使用「無」</block>
  <block id="ee6508d5290be6edafccc6e0f471f120" category="cell">ONTAP 9.5之前的SVM-DR組態為「純快照」</block>
  <block id="c005e78d4bd808038335c32dd84cf7da" category="cell">unix權限</block>
  <block id="3e9a232d025270ed6767c385b8291871" category="cell">新磁碟區的模式</block>
  <block id="2ad2c2d9206a1be7e744bb13b2b126dd" category="cell">「777」</block>
  <block id="7ad68fdac2eac069eb8ed0fc45b0fb74" category="cell">snapshotDir</block>
  <block id="647ce4e5394e2e595e46b4fc50a628e9" category="cell">匯出原則</block>
  <block id="f7f695c763ad0e0ba03c2ff9cbcfcb3d" category="cell">安全性樣式</block>
  <block id="99c2306b30b8939278f0f817230f3573" category="admonition">搭配Astra Trident使用QoS原則群組需要ONTAP 使用更新版本的版本。建議使用非共用的QoS原則群組、並確保原則群組會個別套用至每個組成群組。共享的QoS原則群組將強制所有工作負載的總處理量上限。</block>
  <block id="05c4365fe7e90a545f8b24060094a36a" category="paragraph">以下是已定義預設值的範例：</block>
  <block id="06602e99c8d46d601029e6dd0b37e3f8" category="paragraph">對於「ONTAP-NAS」和「ONTAP-NAS-flexGroups」、Astra Trident現在採用新的計算方法、確保FlexVol 利用snapshotReserve百分比和PVc正確調整其規模。當使用者要求使用PVCs時、Astra Trident會FlexVol 使用新的計算方式、建立原始的包含更多空間的候選區。此計算可確保使用者在永久虛擬磁碟中獲得所要求的可寫入空間、且空間不得小於所要求的空間。在v21.07之前、當使用者要求使用PVC（例如5GiB）、快照保留區達到50%時、他們只能獲得2.5GiB的可寫入空間。這是因為使用者要求的是整個磁碟區、而「快照保留區」則是其中的一個百分比。使用Trident 21.07時、使用者要求的是可寫入空間、而Astra Trident則將「快照保留區」編號定義為整個Volume的百分比。這不適用於「ONTAP-NAS-經濟」。請參閱下列範例以瞭解此功能的運作方式：</block>
  <block id="86ec808b80973d24eadfc617926f534e" category="paragraph">計算方式如下：</block>
  <block id="28ad7be76b350116bde3ae04e5f94a60" category="paragraph">對於snapshotReserve = 50%、而PVc要求= 5GiB、磁碟區總大小為2/0.5 = 10GiB、可用大小為5GiB、這是使用者在PVC要求中要求的大小。「volume show（Volume show）命令應顯示類似以下範例的結果：</block>
  <block id="2f1534ee8d0c6ec998511ed37cfe0da9" category="image-alt">顯示Volume show命令的輸出。</block>
  <block id="daabb7db82ac9f3f074671a1185c462e" category="paragraph">在升級Astra Trident時、先前安裝的現有後端會按照上述說明來配置磁碟區。對於在升級之前建立的磁碟區、您應該調整其磁碟區大小、以便觀察變更。例如、較早前使用「快照保留區=50」的2GiB室早導致磁碟區提供1GiB的可寫入空間。例如、將磁碟區大小調整為3GiB、可讓應用程式在6 GiB磁碟區上擁有3GiB的可寫入空間。</block>
  <block id="2aae2b6accd04335b3eeceb2193b34d6" category="section-title">最低組態範例</block>
  <block id="bca36ce39f61ce2d375cbdb66eab5162" category="paragraph">下列範例顯示基本組態、讓大部分參數保留預設值。這是定義後端最簡單的方法。</block>
  <block id="f35c0fe4b6581c16866c964cef229bfa" category="admonition">如果您在NetApp ONTAP 支援Trident的NetApp支援上使用Amazon FSX、建議您指定lifs的DNS名稱、而非IP位址。</block>
  <block id="acf031eeb31936d30314a2d2a698e85b" category="section-title">ONTAP - NAS驅動程式搭配憑證型驗證</block>
  <block id="78e5b29e139db71ceb7ca6bc99b5e228" category="paragraph">這是最小的後端組態範例。「clientCertificate」、「clientPrivate Key」和「Trusted CACertifate」（選用、如果使用信任的CA）會分別填入「backend.json」、並採用用戶端憑證、私密金鑰和信任的CA憑證的64編碼值。</block>
  <block id="89e5db56c8bbbfc3f8f2325201c46450" category="section-title">ONTAP - NAS驅動程式搭配自動匯出原則</block>
  <block id="8c35a9f7d631f51e05811b36617db641" category="paragraph">本範例說明如何指示Astra Trident使用動態匯出原則來自動建立及管理匯出原則。這對「ONTAP-NAS-節約」和「ONTAP-NAS-Flexgroup」驅動程式的運作方式相同。</block>
  <block id="97cf2271125e9ece6c4bb85c7e38b6f6" category="section-title">ONTAP-NAS-flexgroup驅動程式</block>
  <block id="0178beee313066e023eef8c258ed5bfc" category="section-title">ONTAP - NAS驅動程式搭配IPv6</block>
  <block id="e3d163236efea4513c9df89a9c1be381" category="section-title">ONTAP-NAS-經濟驅動程式</block>
  <block id="6bef8424baf7897ad4b3ecd9446fc7c8" category="section-title">虛擬儲存資源池的後端範例</block>
  <block id="54189b80c641ffe9ac5ea57dc48e465c" category="paragraph">在下圖所示的範例後端定義檔中、會針對所有儲存資源池設定特定的預設值、例如「無的儲存資源保留」、「假的資源配置」、以及「假的加密」。虛擬儲存資源池是在儲存區段中定義。</block>
  <block id="6a24af0a579ec0e851db9d35e047d58e" category="paragraph">在此範例中、有些儲存資源池會設定自己的「資源保留」、「資源配置」和「加密」值、有些資源池會覆寫上述設定的預設值。</block>
  <block id="412b252fa44d1a73e3e7bf22113f99a2" category="section-title">ONTAP-NAS驅動程式</block>
  <block id="f00b69018be0961b32ee24ec54fb56d1" category="section-title">將後端對應至StorageClass</block>
  <block id="dc4edcc28563e022c1d21dec9d28dcca" category="paragraph">下列StorageClass定義係指上述虛擬儲存資源池。使用「parameters.selector`」欄位、每個StorageClass都會呼叫哪些虛擬資源池可用於裝載磁碟區。磁碟區將會在所選的虛擬資源池中定義各個層面。</block>
  <block id="5303cd360e4a1dda505149e2497f5dd0" category="list-text">第一部StorageClass（「protection黃金級」）將對應至「ONTAP-NAS Flexgroup」後端的第一個、第二個虛擬儲存集區、以及「ONTAP-SAN」後端的第一個虛擬儲存集區。這是唯一提供金級保護的資源池。</block>
  <block id="b56bbc7832c420bea7e7ad925a5d3c31" category="list-text">第二個StorageClass（「protection非gold」）將對應至第三個、第四個虛擬儲存集區、位於「ONTAP-NAS」後端、第二個是第三個虛擬儲存集區、位於「ONTAP-SAN」後端。這是唯一提供金級以外保護層級的資源池。</block>
  <block id="93e138c887e529cb6657f632aa3a3867" category="list-text">第三個StorageClass（「app-mysqldb」）將對應至「ontap-nas」後端的第四個虛擬儲存資源池、以及「ontap-san經濟」後端的第三個虛擬儲存資源池。這些是唯一提供mysqldb類型應用程式儲存池組態的集區。</block>
  <block id="a445ee76dc7da803a09c273595c3555c" category="list-text">第四個StorageClass（「protection－silver－creditpoints－20k」）將對應至第三個虛擬儲存資源池（位於「ONTAP－NAS－flexgroup」後端）、第二個虛擬儲存資源池（位於「ONTAP－san」後端）。這些資源池是唯一能以20000個信用點數提供金級保護的資源池。</block>
  <block id="a2d5d3b55b3cff0e83e0c8feac3dfb45" category="list-text">第五個StorageClass（'creditpoint-5k'）將對應到第二個位於「ONTAP-NAS經濟」後端的虛擬儲存資源池、以及位於「ONTAP-SAN」後端的第三個虛擬儲存資源池。這些是唯一提供5000個信用點數的資源池產品。</block>
  <block id="dc92c330959507a128db0801090f9e0d" category="paragraph">Astra Trident將決定選取哪個虛擬儲存資源池、並確保符合儲存需求。</block>
  <block id="4cc2b9916e7383e5fa29dc6188159e32" category="summary">後端定義了Astra Trident與儲存系統之間的關係。它告訴Astra Trident如何與該儲存系統通訊、以及Astra Trident如何從該儲存系統配置磁碟區。安裝Astra Trident之後、下一步是建立後端。「TridentBackendConfig」自訂資源定義（CRD）可讓您直接透過Kubernetes介面建立及管理Trident後端。您可以使用「kubecll」或Kubernetes發佈的等效CLI工具來執行此作業。</block>
  <block id="a8e174c63ac21920b8405ffddc39214a" category="doc">使用kubecl建立後端</block>
  <block id="913a4b06671d1e04e6582a85afe3abbe" category="section-title">TridentBackendConfig</block>
  <block id="d2031a5a319b9363cf98da6b1509598a" category="paragraph">「TridentBackendConfig」（「tbc」、「tbconfig」、「tbackendconfig」）是前端、名稱為CRD、可讓您使用「kubectl」來管理Astra Trident後端。Kubernetes與儲存管理員現在可以直接透過Kubernetes CLI建立及管理後端、而不需要使用專屬的命令列公用程式（「tridentctl」）。</block>
  <block id="b44c2fd5cefc815abed7e31c0fa8c8ac" category="paragraph">建立「TridentBackendConfig」物件之後、會發生下列情況：</block>
  <block id="858fafdff7fa27f202ae0eb981c6dff0" category="list-text">Astra Trident會根據您提供的組態自動建立後端。內部代表的是「TridentBackend」（「tbe」、「tridentbackend」）、CR。</block>
  <block id="40640dd98ca175d098c1c765b1e148d9" category="list-text">《TridentBackendConfig》與由Astra Trident所建立的《TridentBackend》有獨特的關聯。</block>
  <block id="1efc3a14ca6dc7c90db79e02f3abe7d5" category="paragraph">每個「TridentBackendConfig」都有一對一的對應、並有「TridentBackend」。前者是提供給使用者設計及設定後端的介面、後者是Trident代表實際後端物件的方式。</block>
  <block id="c9038f47fe0df535b6bf5619c9ff629e" category="admonition">「TridentBackend」CRS是由Astra Trident自動建立的。您*不應該*修改這些項目。如果您想要更新後端、請修改「TridentBackendConfig」物件來執行此動作。</block>
  <block id="9c3385530cf6e460576e5f6e7cc1b912" category="paragraph">請參閱下列範例、以瞭解「TridentBackendConfig」CR的格式：</block>
  <block id="c84ef67352bb6783ff2881f9f2821c2a" category="inline-link">Trident安裝程式</block>
  <block id="f13a06ff6eab87969a9f96765f31ed9c" category="paragraph">您也可以查看中的範例<block ref="6511e50af21389f9e77db56e03f6dd72" category="inline-link-rx"></block> 所需儲存平台/服務的範例組態目錄。</block>
  <block id="06df669f3ef6f929e9b58c9f47b65310" category="inline-link-macro">儲存驅動程式的後端組態資訊</block>
  <block id="182839d8f6b2bdde60e1d972422cf3a2" category="paragraph">「show」會採用後端特定的組態參數。在此範例中、後端使用「ONTAP-san」儲存驅動程式、並使用此處表格列出的組態參數。如需所需儲存驅動程式的組態選項清單、請參閱 <block ref="5f2d139eefa7c36061f4d97161be02ea" category="inline-link-macro-rx"></block>。</block>
  <block id="92051c832f01d9070a7ed71d1ce523c5" category="paragraph">在《TridentBackendConfig》（CRR）中新推出的「sPEC」一節也包含「認證」和「刪除原則」欄位：</block>
  <block id="5ab961de690e071f0dc1c0dabac7fd89" category="list-text">「認證資料」：此參數為必填欄位、包含用於驗證儲存系統/服務的認證資料。此設定為使用者建立的Kubernetes Secret。認證資料無法以純文字格式傳遞、因此會產生錯誤。</block>
  <block id="9f11e03722a7b912083c63fc68f4dd7b" category="list-text">「刪除原則」：此欄位可定義刪除「TridentBackendConfig」時應發生的情況。可能需要兩種可能的值之一：</block>
  <block id="d09d50d3f84f9c585492818f491a2497" category="list-text">「刪除」：這會同時刪除「TridentBackendConfig」和相關後端。這是預設值。</block>
  <block id="f0c89ce27bf4c43949ad8f26a4f586bb" category="list-text">「保留」：刪除「TridentBackendConfig」（TridentBackendConfig）CR時、後端定義仍會存在、並可使用「tridentctl」進行管理。將刪除原則設為「保留」可讓使用者降級至較早版本（21.04之前）、並保留建立的後端。此欄位的值可在建立「TridentBackendConfig」之後更新。</block>
  <block id="7f2208582df334d090d35357eb5d6901" category="admonition">後端名稱是使用「sPEC.backendName」來設定。如果未指定、則會將後端名稱設為「TridentBackendConfig」物件（metadata.name）的名稱。建議使用「sPEC.backendName」明確設定後端名稱。</block>
  <block id="317e77f416ffd109037a657fffa1e7f7" category="admonition">使用「tridentctl」建立的後端沒有關聯的「TridentBackendConfig」物件。您可以建立「TridentBackendConfig」（TridentBackendConfig）的CR、選擇以「kubectl」管理這類後端。必須謹慎指定相同的組態參數（例如「s.pec.backendName」、「sec.storagePrefix」、「sPEec.storageDriverName」等）。Astra Trident會自動將新建立的「TridentBackendConfig」連結至預先存在的後端。</block>
  <block id="625cc9b8ccc34496dc2b3fcffb7e384a" category="section-title">步驟總覽</block>
  <block id="a867c4bbc8d632a517f22b7377b9b8ed" category="paragraph">若要使用「kubecll」建立新的後端、您應該執行下列動作：</block>
  <block id="4db4699aa0126dfb06878d7e07c0abdf" category="inline-link">Kubernetes機密</block>
  <block id="7e5e1bb39eefe4eec7a88b845126d41d" category="list-text">建立<block ref="fcce7b7bd05b6b012eabe3df8de04808" category="inline-link-rx"></block>。此機密包含Astra Trident與儲存叢集/服務通訊所需的認證資料。</block>
  <block id="c39d193a9cc4084cc6c7964e1bb5efd8" category="list-text">建立「TridentBackendConfig」物件。其中包含有關儲存叢集/服務的詳細資訊、並參考上一步建立的機密。</block>
  <block id="286b0035cf59742ffe54696b798f2368" category="paragraph">建立後端之後、您可以使用「kubecl Get tbc &lt;tbc-name&gt;-n &lt;trident命名空間&gt;」來觀察其狀態、並收集其他詳細資料。</block>
  <block id="a8c4d0cb53af2c6e334f5c58890021d6" category="paragraph">建立包含後端存取認證的秘密。這是每個儲存服務/平台所獨有的功能。以下是範例：</block>
  <block id="04402bf69acac56c72a55c0e4ac2165c" category="paragraph">下表摘要說明每個儲存平台的機密必須包含的欄位：</block>
  <block id="94cec86c6eef229009007e6d00d54ef1" category="cell">儲存平台機密欄位說明</block>
  <block id="1e6947ac7fb3a9529a9726eb692c8cc5" category="cell">秘密</block>
  <block id="c11257eff6563de2c05e353770c514ca" category="cell">欄位說明</block>
  <block id="93c5bebdea9c94a0740fe6fd9bb250f0" category="paragraph">ClientID</block>
  <block id="012e85295e2f1f744cfb8757f8dd4830" category="paragraph">應用程式註冊的用戶端ID</block>
  <block id="a3c559e0541e9bb860178ce6fe414224" category="cell">適用於 GCP Cloud Volumes Service</block>
  <block id="ee64ef6c307cfcfe5c0f085471cd61fa" category="paragraph">Private金鑰ID</block>
  <block id="1e31c22f827d25c5973eee697baace79" category="paragraph">私密金鑰的ID。GCP服務帳戶API金鑰的一部分、具有CVS管理員角色</block>
  <block id="156a17333e77a3c504018cae5ada8c3b" category="paragraph">Private金鑰</block>
  <block id="8e0708b67ba6ce0f70a948152e7e7895" category="paragraph">私密金鑰：GCP服務帳戶API金鑰的一部分、具有CVS管理員角色</block>
  <block id="25de05ab7f10e99b499db62e0b89ad33" category="cell">元素（NetApp HCI / SolidFire）</block>
  <block id="2a6ba72e93aa7fa676d07973ed2716bb" category="paragraph">端點</block>
  <block id="41eba2d95ecaf35c8bd3a972c263ffe4" category="paragraph">MVIP、適用於SolidFire 採用租戶認證的不含用戶身分證明的叢集</block>
  <block id="253b40ae359ba25b56231803430c4873" category="cell">ONTAP</block>
  <block id="14c4b06b824ec593239362517f538b29" category="paragraph">使用者名稱</block>
  <block id="6e1b40351708d93ce8c387f6f8ca7533" category="paragraph">連線至叢集/ SVM的使用者名稱。用於認證型驗證</block>
  <block id="5f4dcc3b5aa765d61d8327deb882cf99" category="paragraph">密碼</block>
  <block id="4d3fd9a7ab4c84b857fc26b2633237d0" category="paragraph">連線至叢集/ SVM的密碼。用於認證型驗證</block>
  <block id="19dce7ac7f5290fc8fa218ad0c858df5" category="paragraph">用戶端權限金鑰</block>
  <block id="8c5e8d4f9acf9295e1a96feef0c0b516" category="paragraph">用戶端私密金鑰的Base64編碼值。用於憑證型驗證</block>
  <block id="039e9d80fa53ba861c06b590ba3f9d34" category="paragraph">chap使用 者名稱</block>
  <block id="a7128cd45d4a277fe5c6ed6f6c4238f7" category="paragraph">傳入使用者名稱。如果useCHAP=true則需要。適用於「ONTAP-SAN」和「ONTAP-san經濟」</block>
  <block id="f9d0dc78b203f2c1106dc0c7d58a5397" category="paragraph">chapInitiator機密</block>
  <block id="2f573af61fb37b4f1c5e2def2341b7c4" category="paragraph">CHAP啟動器密碼。如果useCHAP=true則需要。適用於「ONTAP-SAN」和「ONTAP-san經濟」</block>
  <block id="2ebe107bb3bc9551fbb0e5033046931c" category="paragraph">chapTargetUsername</block>
  <block id="e945f079b3e50bd5722f056b72282608" category="paragraph">目標使用者名稱。如果useCHAP=true則需要。適用於「ONTAP-SAN」和「ONTAP-san經濟」</block>
  <block id="4ab84a55744951d967033db9b64f6b27" category="paragraph">chapTargetInitiator機密</block>
  <block id="61b50fba255c10a4a2b5f7cf8276849a" category="paragraph">CHAP目標啟動器機密。如果useCHAP=true則需要。適用於「ONTAP-SAN」和「ONTAP-san經濟」</block>
  <block id="73d583a1445e1497ec3adaa011e2724c" category="paragraph">在此步驟中建立的機密會參照下一步所建立之「TridentBackendConfig」物件的「sapec.ecent」欄位。</block>
  <block id="80a6c6a7044e3f06bb524f88ac2058f4" category="section-title">步驟2：建立TridentBackendConfig CR</block>
  <block id="3394622f88ed2c82c85e92e908879095" category="paragraph">您現在可以建立「TridentBackendConfig」的CR了。在此範例中、使用「ONTAP-SAN」驅動程式的後端是使用「TridentBackendConfig」物件建立、如下所示：</block>
  <block id="967688089cfc07a6c8e893bce5186445" category="paragraph">現在您已經建立了「TridentBackendConfig」（TridentBackendConfig）CR、您就可以驗證其狀態。請參閱下列範例：</block>
  <block id="edc9d2e179d9bd8effd5277699967aff" category="paragraph">已成功建立後端、並連結至「TridentBackendConfig」CR。</block>
  <block id="ecb5320e6f020f2c2dcad7a6268111ed" category="paragraph">階段可以採用下列其中一個值：</block>
  <block id="35ef366711dba4820492cd153e2bc30d" category="list-text">「綁定」：「TridentBackendConfig」CR與後端相關聯、後端包含「configRef」設定為「TridentBackendConfig」的CR uid。</block>
  <block id="f2edf590deb30828e48e7290aa78e788" category="list-text">《Unbound》：使用「」表示。「TridentBackendConfig」物件不會繫結至後端。根據預設、所有新建立的「TridentBackendConfig」CRS均處於此階段。階段變更之後、就無法再恢復為Unbound（未綁定）。</block>
  <block id="895ba30a6f39f0691ad851fe26560431" category="list-text">「刪除」：「TridentBackendConfig」的「刪除原則」已設定為刪除。刪除「TridentBackendConfig」CR時、它會轉換為「刪除」狀態。</block>
  <block id="0550ab6955adf5805cf2d00b7c592718" category="list-text">如果後端不存在持續磁碟區宣告（PVCS）、刪除「TridentBackendConfig」（TridentBackendConfig）會導致Astra Trident刪除後端、以及刪除「TridentBackendConfig」（TridentBackendConfig）。</block>
  <block id="ffd02eb489e62222a00391567d0bad81" category="list-text">如果後端上有一個或多個PVCS、則會進入刪除狀態。隨後、「TridentBackendConfig」CR也會進入刪除階段。只有刪除所有的PVCS之後、才會刪除後端和「TridentBackendConfig」。</block>
  <block id="39d978e14d4d8c9f19589af0d4e72661" category="list-text">「遺失」：與「TridentBackendConfig」CR相關的後端意外或刻意刪除、而「TridentBackendConfig」CR仍有刪除後端的參考資料。無論「刪除原則」值為何、「TridentBackendConfig」CR仍可刪除。</block>
  <block id="8375bdbfbc291bcedc60e7555e3dc43a" category="list-text">「未知」：Astra Trident無法判斷與「TridentBackendConfig」CR相關的後端狀態或存在。例如、如果API伺服器沒有回應、或是缺少「tridentbackends.trident.netapp.io` CRD」。這可能需要使用者介入。</block>
  <block id="fdf3d4560a801cb64c255cc2790fe9cc" category="inline-link-macro">後端更新和後端刪除</block>
  <block id="57867491a75119ccf33f6ed8a434ff8e" category="paragraph">在此階段、成功建立後端！還有多種作業可以額外處理、例如 <block ref="9f5a7b55f1a44b55d5336cefd3bf688e" category="inline-link-macro-rx"></block>。</block>
  <block id="4dca0b80562cc590644c1acfada17219" category="section-title">（選用）步驟4：取得更多詳細資料</block>
  <block id="22f66c61dd35abb0ae1840a7e38ae1b9" category="paragraph">您可以執行下列命令來取得有關後端的詳細資訊：</block>
  <block id="aab3a73056ee2962dff0130da0538454" category="paragraph">此外、您也可以取得「TridentBackendConfig」的YAML/Json傾印。</block>
  <block id="9fae9b8b2e8f0d5b91654165a5dacc1f" category="paragraph">《backendInfo》（backendInfo）包含了針對「TridentBackendConfig」（TridentBackendConfig）的CR而建立的後端「backendName」（背端名稱）和「backendUUID」（背端UUID）。「lastoperationStatus」欄位代表上次執行的「TridentBackendConfig」（TridentBackendConfig）CR狀態、可由使用者觸發（例如、使用者在「show」中變更內容）、或由Astra Trident觸發（例如、Astra Trident重新啟動期間）。可能是「成功」或「失敗」。「階段」代表「TridentBackendConfig」與後端之間的關係狀態。在上述範例中、「階段」具有界限值、這表示「TridentBackendConfig」CR與後端相關聯。</block>
  <block id="7b7587593fc7d381339d450faa35dfa9" category="paragraph">您可以執行「kubeclt -n triident描述tbc &lt;tbc-cr-name&gt;」命令、以取得事件記錄的詳細資料。</block>
  <block id="6dc07da7e54d697726bb349fb693fa8b" category="inline-link-macro">請參閱此處</block>
  <block id="c732962a4a01ea5f406ec66e50e98903" category="admonition">您無法使用「tridentctl」來更新或刪除包含相關「TridentBackendConfig」物件的後端。若要瞭解在「tridentctl」和「TridentBackendConfig」之間切換的步驟、 <block ref="8d6bc70a41f48e3f72c3f5ea8752090b" category="inline-link-macro-rx"></block>。</block>
  <block id="24ca391029d6df294c5d5b8f1fe5b4eb" category="summary">瞭解如何使用ONTAP NetApp NAS驅動程式設定功能的功能。ONTAP</block>
  <block id="4d80e2460d711b841338dfbeea2ca8c1" category="paragraph">深入瞭解如何使用ONTAP 功能性和功能性NAS驅動程式來設定功能性的後端。ONTAP Cloud Volumes ONTAP</block>
  <block id="df3afb1ce4cf5592326d7f536313cbc9" category="list-text"><block ref="df3afb1ce4cf5592326d7f536313cbc9" category="inline-link-macro-rx"></block></block>
  <block id="6a60ddae29750feed1e12421a92ea824" category="list-text"><block ref="6a60ddae29750feed1e12421a92ea824" category="inline-link-macro-rx"></block></block>
  <block id="fe328cbae90d1a295c7e45733450d711" category="summary">Astra Trident可自動在Kubernetes叢集中的節點上安裝所需的NFS和iSCSI工具。</block>
  <block id="878a6c37d04e0b8f6746f8b1caf14789" category="doc">自動準備工作節點</block>
  <block id="360deb71f11973ab55dca824207c8594" category="paragraph">Astra Trident可自動在Kubernetes叢集中的節點上安裝所需的「NFS」和「iSCSI」工具。這是*試用版功能*、*不適用於*正式作業叢集。目前、此功能適用於執行* CentOS、RHEL及Ubuntu *的節點。</block>
  <block id="c105a7b612eafd056a1525c7dea9ddda" category="paragraph">針對這項功能、Astra Trident提供新的安裝旗標：「-enable節點準備」、適用於以「tridentctl」部署的安裝。對於使用Trident運算子的部署、請使用布林選項「enableNodePrep」。</block>
  <block id="f6aec0bd36e5ab01303aa37ab52ec8d8" category="admonition">「啟用節點準備」安裝選項可讓Astra Trident安裝、並確保在工作節點上掛載磁碟區時、NFS和iSCSI套件及/或服務會執行。這是*試用版功能*、適用於*不符合*正式作業使用資格的開發/測試環境。</block>
  <block id="f587ac26702eec76a28d335e634449b1" category="paragraph">當使用「tridentctl」部署的Astra Trident安裝包含「-enable節點準備」旗標時、會發生以下情況：</block>
  <block id="7a63850885709e4125994faba4bd1667" category="list-text">在安裝過程中、Astra Trident會登錄其執行的節點。</block>
  <block id="c1ebfd51cbff72f2afbe7f30f827eda5" category="list-text">當提出持續磁碟區宣告（PVc）要求時、Astra Trident會從其管理的其中一個後端建立PV。</block>
  <block id="5b70ed42b3c8f8528cef50ad01425fb3" category="list-text">在Pod中使用永久虛擬磁碟時、需要使用Astra Trident將磁碟區掛載到執行Pod的節點上。Astra Trident會嘗試安裝所需的NFS/iSCSI用戶端公用程式、並確保所需的服務處於作用中狀態。這是在掛載磁碟區之前完成的。</block>
  <block id="ac5aafb0e9591a4bede4be4f37f141cf" category="paragraph">在第一次嘗試掛載磁碟區時、只需準備一次工作節點。只要Astra Trident以外的任何變更都不會接觸到「NFS」和「iSCSI」公用程式、所有後續的Volume掛載就會成功。</block>
  <block id="bf3c2b9140b25189d7032529446cfaf4" category="paragraph">如此一來、Astra Trident就能確保Kubernetes叢集中的所有節點都具備必要的公用程式、以掛載及附加磁碟區。對於NFS磁碟區、匯出原則也應該允許掛載磁碟區。Trident可以自動管理每個後端的匯出原則、也可以管理頻外的匯出原則。</block>
  <block id="c109878131f34375d85b7eff9721dcde" category="summary">瞭解如何在安裝Astra Trident時建立及使用元素後端。</block>
  <block id="d1d184cecc23825cff20fabf3cdfb862" category="list-text">支援的儲存系統、可執行Element軟體。</block>
  <block id="4055116469942da7f6ed83abcf57d0a4" category="list-text">提供給NetApp HCI / SolidFire叢集管理員或租戶使用者的認證、以管理磁碟區。</block>
  <block id="d5fa5f22855b065d96647dfb0c06d685" category="inline-link-macro">工作節點準備資訊</block>
  <block id="fa81a6b0253aea3dd9eccc6f72c94371" category="list-text">您所有的Kubernetes工作節點都應該安裝適當的iSCSI工具。請參閱 <block ref="33b3e91de73abed89a447676724b5cce" category="inline-link-macro-rx"></block>。</block>
  <block id="c443982ebc2d61b1fdf8348209939f8b" category="paragraph">「Poolidfire - san」儲存驅動程式支援兩種Volume模式：檔案和區塊。對於「檔案系統」磁碟區模式、Astra Trident會建立一個磁碟區並建立檔案系統。檔案系統類型由StorageClass指定。</block>
  <block id="02017e70674a0c740b2b95fbb0cc2aa1" category="paragraph">無檔案系統。原始區塊裝置。</block>
  <block id="e1f3ce04f7f587f86c154146eace2807" category="admonition">Astra Trident在做為增強型的csi資源配置程式時使用CHAP。如果您使用的是CHAP（這是「csi」的預設值）、則不需要進一步準備。建議將「UseCHAP」選項明確設定為搭配非「csi Trident」使用CHAP。否則請參閱 <block ref="195a24f2e3cd9264b9f38d5f581c56cd" category="inline-link-macro-rx"></block>。</block>
  <block id="156ef6dbbdc5c1984194012f4d3505a5" category="admonition">Volume存取群組僅受Astra Trident的傳統非csi架構支援。當Astra Trident設定為以「csi」模式運作時、會使用CHAP。</block>
  <block id="03362d64938adda17736eff8a3b091cc" category="paragraph">如果未設定「存取群組」或「UseCHAP」、則適用下列其中一項規則：</block>
  <block id="44b5e5595eea45ebf8e49f88409afdaa" category="list-text">如果偵測到預設的「Trident」存取群組、就會使用存取群組。</block>
  <block id="f3bf91f3dbbbaec039ad830cc87a1013" category="list-text">如果未偵測到存取群組、且Kubernetes版本為1.7或更新版本、則會使用CHAP。</block>
  <block id="2353a0a3a06283f07550efc7bad8a90e" category="cell">永遠是「solidfire-san」</block>
  <block id="f4210b28f3cf7c1f7e6e328bb42c6060" category="cell">「S指_」+儲存設備（iSCSI）IP位址SolidFire</block>
  <block id="b07ca7de83de58a699966c9bc9003020" category="cell">儲存設備（iSCSI）IP位址和連接埠</block>
  <block id="749df53d02481e75dd919dddf42fbbef" category="cell">套用到磁碟區的任意JSON-格式化標籤集。</block>
  <block id="251f1fc42c38ca55f30e5e9d11dac168" category="cell">要使用的租戶名稱（如果找不到、請建立）</block>
  <block id="4381b3c378885de93e2166f240096338" category="cell">將iSCSI流量限制在特定的主機介面</block>
  <block id="5ff567e0863a47346f44f87ed793f508" category="cell">《UseCHAP》</block>
  <block id="d390e6782f0a0af41ea0397e46b5368e" category="cell">使用CHAP驗證iSCSI</block>
  <block id="32738663b16444872e4e5721c7c37660" category="cell">《存取群組》</block>
  <block id="c4ca01925aae0c37398f0b30a4ce1273" category="cell">要使用的存取群組ID清單</block>
  <block id="e64099a24f6ef8bbbdb23c2a803cd065" category="cell">尋找名為「Trident」的存取群組ID</block>
  <block id="fcca02e29a08e37c6faf37a418b8d5c8" category="admonition">對於所有建立的磁碟區、Astra Trident會在儲存資源池上的所有標籤配置時、複製到備用儲存LUN。儲存管理員可以定義每個儲存資源池的標籤、並將儲存資源池中建立的所有磁碟區分組。這是根據後端組態中提供的一組可自訂標籤、方便區分磁碟區的方法。</block>
  <block id="a52b8d71eedc2812fe762b3ec88bfc2e" category="section-title">範例1：三種磁碟區類型的Solidfire-san驅動程式後端組態</block>
  <block id="3185240fb49cba19667fbdf639f3271e" category="paragraph">此範例顯示使用CHAP驗證的後端檔案、並建立具有特定QoS保證的三種Volume類型模型。您很可能會使用「IOPS」儲存類別參數來定義儲存類別、以使用每個類別。</block>
  <block id="d030a0e9c177498f4267bf1a6a4eab28" category="section-title">範例2：採用虛擬儲存資源池的Solidfire-san驅動程式的後端和儲存類別組態</block>
  <block id="87af0508250ed6f900914914280a5eaf" category="paragraph">在下圖所示的範例後端定義檔中、會針對所有儲存資源池設定特定的預設值、將「type」設為Silver。虛擬儲存資源池是在「儲存區」區段中定義的。在此範例中、有些儲存資源池會設定自己的類型、有些資源池則會覆寫上述設定的預設值。</block>
  <block id="e4af8ad03936f6a7724e17f6e83c09c8" category="paragraph">第一個StorageClass（「Poolidfire gold-s4」）會對應至第一個虛擬儲存集區。這是唯一提供黃金級效能的「Volume Type QoS」（Volume Type QoS）。最後一個StorageClass（「Poolidfire Silver」）會呼叫任何提供銀級效能的儲存資源池。Astra Trident將決定選取哪個虛擬儲存資源池、並確保符合儲存需求。</block>
  <block id="4d0d37d727675761e4c0e324eb57ca2f" category="list-text"><block ref="4d0d37d727675761e4c0e324eb57ca2f" category="inline-link-macro-rx"></block></block>
  <block id="5f3124ab7224f89a36fbb64fd2ebda15" category="summary">瞭解如何透過ONTAP Astra Trident安裝來建立及使用支援NetApp的SAN驅動程式。本節提供後端組態範例、以及如何將後端對應至StorageClass的詳細資料。</block>
  <block id="ab4ce1634362493e6de248d103136787" category="cell">《使用CHAP》</block>
  <block id="3d6bb44641a25033325da197fbb8a670" category="cell">使用CHAP驗證iSCSI以供ONTAP 支援不支援的SAN驅動程式使用[布林值]</block>
  <block id="7c6b65d42434282f1555f13b40e9fd25" category="cell">《chapInitiator機密》</block>
  <block id="c8a7a6136447a56280ecf99e3ed87d65" category="cell">CHAP啟動器密碼。如果是"useCHAP=true"、則為必要項目</block>
  <block id="948938ec6491061ccf17c7ae8eafbd26" category="cell">《chapTargetInitiator機密》</block>
  <block id="48db71efc42dda989b98744160575f4f" category="cell">CHAP目標啟動器機密。如果是"useCHAP=true"、則為必要項目</block>
  <block id="28687fafefb2992ff7856dcfd2c29e1f" category="cell">「chapUsername」</block>
  <block id="e3f84c141fd3f4682dfb31e0d71c7f5f" category="cell">傳入使用者名稱。如果是"useCHAP=true"、則為必要項目</block>
  <block id="62fbbf4cfd0cc0a82f953199d14a61e3" category="cell">《chapTargetUsername》</block>
  <block id="a379a576b788ab047d5e6405ff4f3511" category="cell">目標使用者名稱。如果是"useCHAP=true"、則為必要項目</block>
  <block id="dba7349d856fb1f0791cb0f6c700266f" category="paragraph">對於「ONTAP-san」驅動程式、預設為使用SVM的所有資料LIF IP、並使用iSCSI多重路徑。為「ONTAP-san」驅動程式的dataLIF指定IP位址、會強制它們停用多重路徑、並只使用指定的位址。</block>
  <block id="9f86d18c38ffc3e7be07fb38b682a8be" category="admonition">建立後端時、請記住、建立後無法修改「dataLIF」和「儲存前置字元」。若要更新這些參數、您需要建立新的後端。</block>
  <block id="2fbf62d46404d999a0e6179621b359a3" category="paragraph">「igroupName」可設定為ONTAP 已在該叢集上建立的igroup。如果未指定、Astra Trident會自動建立名為Trident的igroup -&lt;後端UUID &gt;。如果提供預先定義的igroupName、則如果要在環境之間共用SVM、NetApp建議使用每個Kubernetes叢集的igroup。這是Astra Trident自動維護IQN新增/刪除的必要條件。</block>
  <block id="22599fe16404024d4ce4c8111293b8c2" category="paragraph">後端也可以在建立後更新igroup：</block>
  <block id="bc47775cbee2d365887513f379efaf66" category="list-text">可以更新igroupName、以指向在Astra Trident以外的SVM上建立及管理的新igroup。</block>
  <block id="3e01e438ad7180641957b0d7d9716f65" category="list-text">可以省略igroupName。在此案例中、Astra Trident會自動建立及管理Trident -&lt;backend-UUUUID&gt; igroup。</block>
  <block id="73e65f4bf1c67cf81e3531ab80adee7e" category="paragraph">在這兩種情況下、仍可繼續存取Volume附件。未來的Volume附件將使用更新的igroup。此更新不會中斷對後端磁碟區的存取。</block>
  <block id="8a89357317a0c827764c86bc08ee62bd" category="paragraph">可以為「managementLIF」選項指定完整網域名稱（FQDN）。</block>
  <block id="88afceb4bf710fa1663fc5c08b2b1bda" category="paragraph">所有ONTAP 的不完整驅動程式也可設定為IPv6位址。請務必使用「-use IPv6」旗標來安裝Trident。必須謹慎定義方括弧內的「managementLIF」IPv6位址。</block>
  <block id="18bfd4fb5bd53bc4e45e393e24c47255" category="paragraph">若要讓ONTAP-SAN驅動程式使用CHAP、請在後端定義中將「useCHAP」參數設為「true」。然後Astra Trident會設定並使用雙向CHAP做為後端所指定SVM的預設驗證。請參閱 <block ref="8665da470a88e198066a0307a2be351b" category="inline-link-macro-rx"></block> 以瞭解其運作方式。</block>
  <block id="f9f7357cc7873819dbc075deb62cba4b" category="paragraph">對於「ONTAP-san經濟」驅動程式、「limitVolume Sizes」選項也會限制其管理的qtree和LUN磁碟區大小上限。</block>
  <block id="29669b1b587897fc488d8e332600d528" category="admonition">Astra Trident在所有使用「ONTAP-san」驅動程式建立的磁碟區的「Comments」（註解）欄位中設定資源配置標籤。針對所建立的每個Volume、FlexVol 將會在顯示於其儲存資源池中的「Comments」（註解）欄位中填入所有標籤。儲存管理員可以定義每個儲存資源池的標籤、並將儲存資源池中建立的所有磁碟區分組。這是根據後端組態中提供的一組可自訂標籤、方便區分磁碟區的方法。</block>
  <block id="036c0eabd455d8a92d350429f2f5747e" category="cell">要指派給所建立磁碟區的調適性QoS原則群組。選擇每個儲存集區/後端的其中一個qosPolicy或adaptiveQosPolicy</block>
  <block id="fab51d2bc90465982b0994bc86e69db9" category="admonition">對於使用「ONTAP-san」驅動程式建立的所有磁碟區、Astra Trident會在FlexVol the支援LUN中繼資料的情況下、為該系統的功能增加10%的容量。LUN的配置大小與使用者在PVc中要求的大小完全相同。Astra Trident在FlexVol 整個過程中增加10%的速度（顯示ONTAP 在畫面上可用的尺寸）。使用者現在可以取得所要求的可用容量。此變更也可防止LUN成為唯讀、除非可用空間已充分利用。這不適用於ONTAP-san經濟型。</block>
  <block id="824d88f50ab9e39778b0ef5bc2516b2f" category="paragraph">對於定義「快照保留區」的後端、Astra Trident會計算磁碟區大小、如下所示：</block>
  <block id="4e762198289d9294de9c1cbb3f0b26b6" category="paragraph">1.1是額外10%的Astra Trident加入FlexVol 到the支援LUN中繼資料的功能。對於「快照保留區」= 5%、而PVc要求= 5GiB、磁碟區總大小為5.79GiB、可用大小為5.5GiB。「volume show（Volume show）命令應顯示類似以下範例的結果：</block>
  <block id="e6e049b4753c744e95db32b0eeed8d5c" category="paragraph">目前、只有調整大小、才能將新計算用於現有的Volume。</block>
  <block id="19fd94d2657fdd90c44f1fcd72890482" category="admonition">如果您在NetApp ONTAP 支援Astra Trident的NetApp上使用Amazon FSX、建議您指定lifs的DNS名稱、而非IP位址。</block>
  <block id="f9e7424816477078eb0e49bf4eb4c87e" category="section-title">ONTAP - SAN驅動程式搭配憑證型驗證</block>
  <block id="9d6b2226030e3a797fc7ff6dbd810f66" category="section-title">ONTAP與雙向CHAP的SAN驅動程式</block>
  <block id="b0a5c44c844418c2a5474a0d4c19182c" category="paragraph">這是最小的後端組態範例。此基本組態會建立一個「ONTAP-SAN」後端、並將「useCHAP」設為「true」。</block>
  <block id="08f9dab0885378aea00f731ad9e52901" category="section-title">ONTAP-san經濟驅動程式</block>
  <block id="22aec9ab9f9270747cb10c5bd593c1ab" category="paragraph">以下是「ONTAP-san經濟」驅動程式的iSCSI範例：</block>
  <block id="b928e0aee19c1e2cc91c85e8a0856936" category="summary">請使用此處提供的指標來疑難排解安裝及使用Astra Trident時可能遇到的問題。</block>
  <block id="231cf4c70d866b616c21baddaeed0696" category="doc">疑難排解</block>
  <block id="8ef0ab9bbedaa7608c9abed7c7213218" category="admonition">如需Astra Trident的協助、請使用「tridentctl logs -A -n trident」建立支援套裝組合、並將其傳送至「NetApp支援&lt;取得協助&gt;」。</block>
  <block id="40e41fb2db11266b8f751c0d5c67cba0" category="inline-link">NetApp知識庫（需要登入）</block>
  <block id="01005ecf4349194d1ec13d0ba516c9e5" category="admonition">如需疑難排解文章的完整清單、請參閱<block ref="57f5c759ada931c6a2051314ca6ee99e" category="inline-link-rx"></block>。您也可以找到Astra相關疑難排解問題的相關資訊<block ref="695f48b1d8b7348c0e2828947d24161e" category="inline-link-rx"></block>。</block>
  <block id="163fb9eb00818e2c7109900db1a3cc82" category="section-title">一般疑難排解</block>
  <block id="f504c27d1ad305a988958b64f34468cb" category="list-text">如果Trident pod無法正常啟動（例如、當Trident pod卡在「ContainerCreating」階段、且只有兩個可用的容器）、則執行「kubechtl -n trident描述部署Trident」和「kubectl -n trident描述pod trident -」 提供更多洞見。取得kubelet記錄（例如透過「journalctl -xeu kubelet」）也很有幫助。</block>
  <block id="05d68d1b7214c73141ed12aaed0c2ab5" category="list-text">如果Trident記錄中的資訊不足、您可以根據安裝選項、將「-d」旗標傳給安裝參數、嘗試啟用Trident的偵錯模式。</block>
  <block id="bc6de9cad530a57dba08ff711f4a6b5f" category="paragraph">然後使用「/tridentctl logs -n triident」確認偵錯設定、並在記錄中搜尋「level =偵錯msg」。</block>
  <block id="8e95ae46f32b05cf983c93e608530e36" category="list-text">與營運者一起安裝</block>
  <block id="94912f7fb206038e8527957b44dfbf25" category="paragraph">這會重新啟動所有Trident Pod、可能需要數秒鐘的時間。您可以查看輸出「kubecll Get pod - n triident」中的「年齡」欄位來檢查。</block>
  <block id="6a304a6cf7cd8c90bac892ab0fb9c134" category="paragraph">對於Astra Trident 20.07和20.10、請使用「tprov」取代「torc」。</block>
  <block id="79b91d0489c081de6794796638793787" category="list-text">與Helm一起安裝</block>
  <block id="d356d628089d439d75e3f85564372658" category="list-text">安裝試用版</block>
  <block id="87248f7afe198418bdbedd919695631e" category="list-text">您也可以在後端定義中加入「debugTraceFlags」、以取得每個後端的偵錯記錄。例如、在Trident記錄中加入「debugTraceFlags：｛"API"：true、「method」：true、｝」以取得API呼叫和方法反向。現有的後端可設定「debugTraceFlags」、設定為「tridentctl後端更新」。</block>
  <block id="6cc37a0664d7f97f87d34eadef23dbad" category="list-text">使用RedHat CoreOS時、請確定已在工作節點上啟用「iscsid」、並預設為啟動。您可以使用OpenShift機器組態或修改點火模板來完成此作業。</block>
  <block id="4582245538a41243a95713a7d0c21b64" category="list-text">使用Trident時可能會遇到的常見問題<block ref="4568986ef6397d7c901269fc0e190ede" category="inline-link-rx"></block> 當租戶和用戶端機密來自權限不足的應用程式登錄時。如需Trident需求的完整清單、請參閱 <block ref="c09112d17e34405b7a5c3d246f91583f" category="inline-link-macro-rx"></block> 組態：</block>
  <block id="7f0ecdfa510b31b01d331c2760643b83" category="list-text">如果將PV掛載到容器時發生問題、請確定已安裝並執行「rpcbind」。使用主機作業系統所需的套件管理程式、檢查「rpcbind」是否正在執行。您可以執行「stystemctl狀態rpcbind」或其等效項目、來檢查「rpcbind」服務的狀態。</block>
  <block id="78aeadc89feb4cf244398a7d35a0d656" category="list-text">如果Trident後端回報雖然曾經工作、但仍處於「失敗」狀態、則可能是因為變更與後端相關的SVM/admin認證資料所致。使用「tridentctl update backend」更新後端資訊、或是退回Trident pod、將可修正此問題。</block>
  <block id="f5d517b06fc0b1af5d599776e2f6f1d6" category="inline-link">這篇部落格</block>
  <block id="dd5955dd3991dcacca2b395215df8ecd" category="list-text">如果您要升級Kubernetes叢集和（或）Trident以使用beta Volume Snapshot、請確定已完全移除所有現有的Alpha Snapshot CRS。然後、您可以使用「tridentctl obliviate alpha-snapsnapshot crd」命令來刪除Alpha Snapshot CRD。請參閱<block ref="f3109660248c628e79ddf256944df58b" category="inline-link-rx"></block> 瞭解移轉Alpha快照所需的步驟。</block>
  <block id="b851cfc28cd6e5cb9aaf87bdb59a68aa" category="list-text">如果在容器執行時間安裝Trident with Docker時遇到權限問題、請嘗試使用「-in cluster =fals'」旗標來安裝Trident。這不會使用安裝程式Pod、也不會因為「Trident安裝程式」使用者而造成權限問題。</block>
  <block id="6f7d49547ff47cfaf1fd93d134b603be" category="list-text">使用「uninstall參數&lt;uninstalling Trident &gt;」來在執行失敗後進行清理。根據預設、指令碼不會移除Trident所建立的客戶需求日、即使在執行中的部署中、也能安全地解除安裝及再次安裝。</block>
  <block id="f1112223b41fddc71fd6a626582dfb78" category="inline-link">Trident版本</block>
  <block id="c731d984dfa8e536efa9efa455347faa" category="list-text">如果您想要降級至舊版Trident、請先執行「tridenctl uninstall」命令來移除Trident。下載所需的<block ref="f3d78353f8dac3e49bbefeb5f6a2383b" category="inline-link-rx"></block> 並使用「tridentctl install」命令進行安裝。只有在沒有建立新的PV、且尚未對現有的PV/後端/儲存類別進行任何變更時、才考慮降級。由於Trident現在使用CRD來維護狀態、因此所有建立的儲存實體（後端、儲存類別、PV和Volume Snapshot）都有「Associated CRD objects &lt;Kubernetes CustomResourcesDefinition Objects&gt;」、而非寫入先前安裝的Trident版本所使用之PV的資料。*移回舊版時、新建立的PV將無法使用。**對物件所做的變更、例如後端、PV、儲存類別和Volume快照（已建立/更新/刪除）、在降級*時、Trident將無法看到。Trident安裝的舊版Trident所使用的PV、仍可供Trident查看。返回舊版不會中斷已使用舊版建立之PV的存取、除非已升級。</block>
  <block id="7dc9f8824c461c84d9bb1563a0615526" category="list-text">若要完全移除Trident、請執行「tridentctl obliviate crd」命令。這會移除所有CRD物件、並取消定義客戶需求日。Trident將不再管理任何已配置的PV。</block>
  <block id="e7fc3eac0c0cea530e0f52e3ddf37079" category="admonition">之後需要從頭重新設定Trident。</block>
  <block id="51748ba3d16ecfd8c45c7ebf2043b738" category="list-text">成功安裝之後、如果某個永久虛擬磁碟卡在「Pending」（擱置）階段、執行「KECBECTL描述永久虛擬磁碟」可提供有關Trident為何無法為此永久虛擬磁碟配置PV的其他資訊。</block>
  <block id="a900bd1dbd5690f78a30ca74d138d0b7" category="section-title">使用操作員疑難排解不成功的Trident部署</block>
  <block id="0e89989064bf4afdc37fd5a7be4f607d" category="paragraph">如果您使用運算子來部署Trident、則「TridentOrchestrator」的狀態會從「安裝」變更為「安裝」。如果您看到「失敗」狀態、而且操作員本身無法恢復、您應該執行下列命令來檢查操作員的記錄：</block>
  <block id="df9771dbb13da45493e576499910c0b4" category="paragraph">追蹤Trident運算子容器的記錄可以指出問題所在。例如、其中一個問題可能是無法從無線環境中的上游登錄擷取所需的容器映像。</block>
  <block id="0fd4c6187c561958bc76052df7774593" category="paragraph">若要瞭解Trident安裝失敗的原因、您應該看看「TridentOrchestrator」狀態。</block>
  <block id="1e054f4c292a5388d6318461fe73d749" category="paragraph">此錯誤表示已存在用於安裝Trident的「TridentOrchestrator」。由於每個Kubernetes叢集只能有一個Trident執行個體、因此營運者可確保在任何指定時間只存在一個可建立的作用中「TridentOrchestrator」。</block>
  <block id="568fcf9beb0dbd37c57dff251a3164ed" category="paragraph">此外、觀察Trident Pod的狀態、通常會指出是否有不正確的情況。</block>
  <block id="f89c17ddb9f8bdaf5c95a466d5f6a500" category="paragraph">您可以清楚看到、由於未擷取一或多個容器映像、所以Pod無法完全初始化。</block>
  <block id="d57d1a6de03b2ddf3ee54f680152e2b6" category="paragraph">若要解決此問題、您應該編輯「TridentOrchestrator」。或者、您也可以刪除「TridentOrchestrator」、然後使用修改後的準確定義來建立新定義。</block>
  <block id="a8ee4098038ba3eb2d8c3093ddfe6536" category="section-title">疑難排解使用tridentctl進行不成功的Trident部署</block>
  <block id="021e9ae5361eb14975bf9a30f99770f5" category="paragraph">為了協助您找出問題所在、您可以使用「-d'」引數再次執行安裝程式、這會開啟偵錯模式、並協助您瞭解問題所在：</block>
  <block id="01539f4f1fd20792cbbae6bb0506cc20" category="paragraph">在解決此問題之後、您可以依照下列步驟清理安裝、然後再次執行「tridentctl install」命令：</block>
  <block id="b9966b5f76510c4c81d397b732dc0ced" category="summary">請先檢閱支援的前端、後端及主機組態、開始著手。</block>
  <block id="5a2ebfb8baa378cfcfcba58bbb1380c2" category="doc">需求</block>
  <block id="0582c93c9857a8b6d0380be79128eefc" category="admonition">若要瞭解Astra Trident使用的連接埠、請參閱 <block ref="c6b87a878d50568ac1e654ad3964af7b" category="inline-link-macro-rx"></block>。</block>
  <block id="c777be7f669397b0a376fe32ca5cd9c3" category="section-title">支援的前端（協調器）</block>
  <block id="74aefc05d193afd5c50a0df882997656" category="paragraph">Astra Trident支援多個容器引擎和協調器、包括：</block>
  <block id="76df2d4e2a105a35b5db1ce7b060bbe1" category="list-text">Anthos on -Prem（VMware）和Anthos on裸機1.8、1.9、1.10</block>
  <block id="679683afa169f4c501ded1ebe8a942e2" category="list-text">Kubernetes 1.18或更新版本（最新版本：1.23）</block>
  <block id="37696641960d6c73a7dadab603c1877e" category="list-text">Mirantis Kubernetes Engine 3.4</block>
  <block id="41b5e6bb7f3d484ece37970d944243a6" category="list-text">OpenShift 4.7、4.8、4.9、4.10.</block>
  <block id="201eb37826a33e35adff9119f25946bd" category="paragraph">這些版本支援Trident運算子：</block>
  <block id="5596419ed8318cabbcb138ef27fd3035" category="inline-link">錯誤修正公告</block>
  <block id="f2f0da9b50bd2001bc802c121fc76254" category="admonition">Red Hat OpenShift Container Platform使用者若使用4.6-8以下的任何版本、可能會看到其初始化程式名稱.iSCSI檔案為空白。這是RedHat所識別的錯誤、可透過OpenShift 4.6-8加以修正。請參閱<block ref="ac064f2337a2fc6c16c562bc9e386352" category="inline-link-rx"></block>。NetApp建議您在OpenShift 4.6.8及更新版本上使用Astra Trident。</block>
  <block id="8fad5c21cf613e120f249eadc62cda2f" category="paragraph">Astra Trident也能與其他全管理且自我管理的Kubernetes產品搭配使用、包括Google Kubernetes Engine（GKE）、Amazon Elastic Kubernetes Services（EKS）、Azure Kubernetes Service（KS）、Rancher及VMware Tanzu Portfolio。</block>
  <block id="f787cd4b6963b13f12fa53131f58ef6c" category="section-title">支援的後端（儲存）</block>
  <block id="843e2f0c722d25903a6010b62ac4f13b" category="paragraph">若要使用Astra Trident、您需要下列一或多個支援的後端：</block>
  <block id="117bdbda976fe8b3212bc3b6327a0a1b" category="list-text">Cloud Volumes ONTAP</block>
  <block id="ff617c70912e62b6adb0266e42f9d4f5" category="list-text">FAS/AFF/選取9.3或更新版本</block>
  <block id="1d3d126b8a5bad69c46ed03734beed47" category="list-text">NetApp All SAN Array ASA （ESAN）</block>
  <block id="0f6e0df69462b7a5d101ec1a3fa8a376" category="list-text">NetApp HCI / Element軟體11或更新版本</block>
  <block id="c7c7a6a5641f33e348244f9c43010e16" category="section-title">功能需求</block>
  <block id="8c67111ad59dd108156a3e7c9a32b63c" category="paragraph">下表摘要說明此Astra Trident版本的可用功能及其支援的Kubernetes版本。</block>
  <block id="21021ea0e52be8e9c599f4dff41e5be0" category="cell">功能</block>
  <block id="80afba45eb055fc9bdc48c90d1debd06" category="cell">Kubernetes版本</block>
  <block id="10f295a61d2a793ac8936a69cf458654" category="cell">需要功能閘道？</block>
  <block id="f336592ca417cff322b935bc0eeaff8f" category="cell">csi Trident</block>
  <block id="51c52843a7958626357cfc8e1ef94e50" category="paragraph">1.17及更新版本</block>
  <block id="bafd7322c6e97d25b6299b5d6fe8920b" category="paragraph">否</block>
  <block id="e830b7e4d1fb7f84600876af87cb4381" category="cell">Volume Snapshot</block>
  <block id="ea8ed249117e76cb53766e218fe2b7c7" category="cell">來自Volume Snapshot的PVc</block>
  <block id="28dcded20f550dcad1bd9bb03a5bbe73" category="cell">iSCSI PV調整大小</block>
  <block id="1673543ed032e46f3572ba65bc070693" category="cell">資訊雙向CHAP ONTAP</block>
  <block id="176e16df4faab1a1e06e9585c813d5fe" category="cell">動態匯出原則</block>
  <block id="1f7219b07d5bce7feec002a9f4dc2201" category="cell">Trident運算子</block>
  <block id="bf0d42cfb33347700a1060d7b0cf07c1" category="cell">自動工作者節點準備（試用版）</block>
  <block id="443432948b68bb63d707ce7ecc4a021a" category="cell">csi拓撲</block>
  <block id="af7c8216a3289efe1a298a19c00b8b8c" category="section-title">已測試的主機作業系統</block>
  <block id="57b3e1695eb7d16642702fbce3837b86" category="paragraph">依預設、Astra Trident會在容器中執行、因此會在任何Linux工作者上執行。不過、這些員工必須能夠使用標準NFS用戶端或iSCSI啟動器來掛載Astra Trident提供的磁碟區、視您使用的後端而定。</block>
  <block id="814a65adc75608da31ab5685f9b1c1ce" category="paragraph">儘管Astra Trident並未正式「支援」特定作業系統、但下列Linux套裝作業系統仍可正常運作：</block>
  <block id="597a56086e1f9d7ca5e8f55c40a0153a" category="list-text">受OpenShift Container Platform支援的RedHat CoreOS（RMCOS）版本</block>
  <block id="4fa506be8cc1c8c936a3eff8a374fe26" category="list-text">RHEL或CentOS 7.4或更新版本</block>
  <block id="2d736ed9cdbf58b500e9715daeb267e6" category="list-text">Ubuntu 18.04或更新版本</block>
  <block id="11ea58814ce429c3e3254a63f8cde7a4" category="paragraph">「tridentctl」公用程式也可在任何這些Linux版本上執行。</block>
  <block id="13d80777c8fd43e555c1f5b1b72d7ef0" category="section-title">主機組態</block>
  <block id="62df396fbf0c4fd30e1e851335e8b26b" category="paragraph">視使用中的後端而定、應該在叢集中的所有員工上安裝NFS和/或iSCSI公用程式。請參閱 <block ref="8e0b40cac942de59585b1131f9197d7b" category="inline-link-macro-rx"></block> 以取得更多資訊。</block>
  <block id="2139fe384d5ae165545994dff01961d9" category="section-title">儲存系統組態</block>
  <block id="dc5ac69fee94d861f0bed64729b712cf" category="paragraph">Astra Trident可能需要對儲存系統進行一些變更、才能使用後端組態。請參閱 <block ref="49641f5ab61d7a6ce07b1b6ba31204f8" category="inline-link-macro-rx"></block> 以取得詳細資料。</block>
  <block id="923680056b0f0258907f498670b4ead1" category="section-title">Container映像和對應的Kubernetes版本</block>
  <block id="ee50d481128d1543f9945b4a4f3fbe9d" category="paragraph">對於空拍安裝、下列清單是安裝Astra Trident所需的容器映像參考資料。使用「tridentctl images)」命令來驗證所需的容器映像清單。</block>
  <block id="aa92c4c233bc01609d957e469736b699" category="cell">Container映像</block>
  <block id="3b29886980a3307188a882bdc7cad63b" category="cell">v1.17.0版</block>
  <block id="bd366d7eff02dab7788621c07458488c" category="list-text">NetApp/Trident：22.04.0</block>
  <block id="2e7762de21d705936d61fb36a7138a5c" category="list-text">NetApp/Trident自動支援：22.04</block>
  <block id="b0b4b8e52878f03279584f43bc961472" category="list-text">k8s.gcr.io/sig-storage / csi佈建程式：v2.2.2</block>
  <block id="52d5de12f37c2ff6a4de253d20947ca2" category="list-text">k8s.gcr.io/sig-storage / csi附加程式：v3.4.0</block>
  <block id="b940865cd29b95c004f3c7f7ba60de73" category="list-text">k8s.gcr.io/sig-storage / csi大小調整程式：v1.4.1</block>
  <block id="ca2e728c8f17fef48811518aaed4de43" category="list-text">k8s.gcr.io/sig-storage / csi快照記錄：v3.0.3</block>
  <block id="719605430ab8445a9b97c7e6a4d03f30" category="list-text">k8s.gcr.io/sig-storage / csi節點驅動程式登錄程式：v2.5.0</block>
  <block id="6c2d28c058f7c688140000721ee0d18f" category="list-text">NetApp/Trident營運者：22.04.0（選用）</block>
  <block id="b8f1a143b913482d06bc0abdd94e9fc7" category="cell">v1.18.0</block>
  <block id="79f59ba516b478a970a428a795414034" category="cell">v1.19.0版</block>
  <block id="4b977ef7367155e20f954fe7b0a00c4f" category="cell">v1.20.0</block>
  <block id="6f0b081bef5e745ef2429ef74472d9bd" category="cell">1.21.0版</block>
  <block id="681d715b456f6d29a501b8f132e941a1" category="cell">1.22.0版</block>
  <block id="73e93ad328287e5ce4c06228cfdba2bf" category="cell">1.23.0版</block>
  <block id="721d66fc3896f0caf2122a92b3f1c017" category="admonition">在Kubernetes版本1.20及更新版本上、只有在「v1」版本提供「volumesnapshots.snapshot.storage」CRD的情況下、才能使用已驗證的「k8s.gcr.io/sig-storage / csi快照：v4.x」映像。如果「v1Beta1」版本使用/不使用「v1」版本來提供CRD、請使用已驗證的「k8s.gcr.IO/SIG-storage / cscs-snapshotter：v3.x」影像。</block>
  <block id="a60c2f57df655a9ac5fcaa0750886195" category="summary">如果您剛開始使用Kubernetes、請依照指示安裝Kubernetes來試用。這些說明提供了一個裸機、單節點叢集、Trident可與該叢集整合以供示範之用。</block>
  <block id="62bdbe048d174b559cb770f9ebaf0895" category="doc">歡迎試用</block>
  <block id="e8dadc588901af436e2c6036acf23973" category="inline-link-macro">NetApp試用</block>
  <block id="476652843c9581434ab31739d97c955a" category="paragraph">NetApp提供立即可用的實驗室映像、您可以透過申請 <block ref="eb9c34df0ed196dd801ef85207c8bf2c" category="inline-link-macro-rx"></block>。測試磁碟機提供您一個沙箱環境、其中安裝並設定了三節點Kubernetes叢集和Astra Trident。這是熟悉Astra Trident並探索其特色的絕佳方式。</block>
  <block id="8685ac2061f9dca7ab48f41e0871f7af" category="inline-link-macro">Kubeadm安裝指南</block>
  <block id="37bdb0f602c1d2a2a6f285533e4ce5c8" category="paragraph">另一個選項是查看 <block ref="c7dbb75618a5e106a360075f923cb87f" category="inline-link-macro-rx"></block> 由Kubernetes提供。</block>
  <block id="2cf0c4e99dd3c0b2e7e0f63af3531622" category="admonition">您不應該在正式作業中使用這些指令所建置的Kubernetes叢集。請使用經銷商提供的正式作業部署指南、建立正式作業就緒的叢集。</block>
  <block id="e3ecede511471cf67c294e427e2f012e" category="paragraph">如果這是您第一次使用Kubernetes、請熟悉這些概念和工具 <block ref="22f850f308b2d2016502017a1dcd1044" category="inline-link-macro-rx"></block>。</block>
  <block id="55847a7d73d44b84804f47ee7863b80f" category="summary">部署Astra Trident之後、您可以繼續建立後端、建立儲存類別、配置磁碟區、以及將磁碟區掛載至Pod。</block>
  <block id="0b0ca016c0d99a4845777aeeebb032ac" category="section-title">步驟1：建立後端</block>
  <block id="4f374e8dd911d1e70f7b7a53fdac1f2a" category="paragraph">您現在可以繼續建立後端、由Astra Trident用來配置磁碟區。若要這麼做、請建立包含必要參數的「backend.json」檔案。不同後端類型的組態檔範例可在「shame-INPUT」目錄中找到。</block>
  <block id="8b389d7be97d6c697a4e775ff8338905" category="paragraph">請參閱 <block ref="49641f5ab61d7a6ce07b1b6ba31204f8" category="inline-link-macro-rx"></block> 如需如何為後端類型設定檔案的詳細資訊、請參閱。</block>
  <block id="af445e1d9a0a481ba7f9b5f01df23a3d" category="paragraph">如果建立失敗、表示後端組態有問題。您可以執行下列命令來檢視記錄、以判斷原因：</block>
  <block id="00715976efdc0cc3b7c5a8512fb0e08d" category="inline-link-macro">疑難排解</block>
  <block id="936067ad00da88d877acb024c96f3129" category="paragraph">解決問題之後、只要返回此步驟的開頭、然後再試一次即可。如需更多疑難排解秘訣、請參閱 <block ref="fa8c952f2dea85664a3e3e5dc210aa4c" category="inline-link-macro-rx"></block> 區段。</block>
  <block id="0cf7ce61dd48f9396923c05ab8f5e302" category="section-title">步驟2：建立儲存類別</block>
  <block id="8c566ff50efde64c700b1188e862c328" category="inline-link">儲存類別</block>
  <block id="c44e939795fbf61079e70122d3e77735" category="paragraph">Kubernetes使用者使用指定的持續磁碟區宣告（PVCS）來配置磁碟區<block ref="bc70014ff50467618a31ef39142ab151" category="inline-link-rx"></block> 依名稱。使用者會隱藏詳細資料、但儲存類別會識別該類別所使用的資源配置程式（本例中為Trident）、以及該類別對資源配置程式的意義。</block>
  <block id="56cc6184a3bc4387f839993b204e4c5f" category="paragraph">建立儲存類別Kubernetes使用者要指定何時需要磁碟區。類別的組態需要建構您在上一個步驟中建立的後端、以便Astra Trident使用它來配置新的磁碟區。</block>
  <block id="45a1f9131ca1bec07f47f45a194d9d58" category="paragraph">最簡單的儲存類別是以安裝程式隨附的「slam-filed/storage－class-csi．yaml.templ」檔案為基礎、以儲存驅動程式名稱取代「_backend_typ__」。</block>
  <block id="b4987be37083b7196f23d63ddd5d56df" category="paragraph">這是Kubernetes物件、所以您可以使用「kubectl」在Kubernetes中建立。</block>
  <block id="a191af7083288f9d9556f3ebcd821a34" category="paragraph">現在您應該會看到Kubernetes和Astra Trident中的* basic、csi *儲存類別、而Astra Trident應該已經在後端探索集區。</block>
  <block id="3bdc1ec6969d1615bb58d7f0443bf1c2" category="section-title">步驟3：配置第一個Volume</block>
  <block id="a58b17a231318aa42ed47bfe0be43447" category="inline-link">持續磁碟區宣告</block>
  <block id="512b66e66e82ba09d70c3e9f784aa8af" category="paragraph">現在您可以動態配置第一個Volume了。這是透過建立Kubernetes來完成<block ref="95c09f225fe48abca705fd090f5f4c89" category="inline-link-rx"></block> （PVc）物件。</block>
  <block id="61e8eac65ddef26d4c4230d88cae8498" category="paragraph">為使用您剛建立之儲存類別的磁碟區建立一個永久虛擬磁碟。</block>
  <block id="b357acbdc339437d16e4e967ecc6d0c2" category="paragraph">請參閱「shame-INPUT / PVC-base-csi。yaml」範例。請確定儲存類別名稱符合您所建立的名稱。</block>
  <block id="2fe8954464ccf22d2d06423b358f38a7" category="section-title">步驟4：在Pod中掛載磁碟區</block>
  <block id="366556d176e685870d134b7fc6e9ca3c" category="paragraph">現在讓我們掛載磁碟區。我們將推出一個將PV掛載到「/usr/share/ngines/html」下的「恩靈思」Pod。</block>
  <block id="6f5eca6ad9143d35bb33a1a17df3a848" category="paragraph">此時、Pod（應用程式）不再存在、但磁碟區仍然存在。如果需要、您可以從其他Pod使用。</block>
  <block id="3ba419ecccf23f33a6bae5d23f206fdd" category="paragraph">若要刪除磁碟區、請刪除請款：</block>
  <block id="1a00c9156117d9ec9fa3e45d5a757d04" category="paragraph">您現在可以執行其他工作、例如：</block>
  <block id="ce2c6a300f520205e891fc45009ec4c3" category="inline-link-macro">設定其他後端。</block>
  <block id="642bfa81920103d4177bb3fdf6f9186f" category="list-text"><block ref="642bfa81920103d4177bb3fdf6f9186f" category="inline-link-macro-rx"></block></block>
  <block id="93e8ba41e1ebcadc1338cc7f75109210" category="inline-link-macro">建立其他儲存類別。</block>
  <block id="daa40449d28fbb16d2bcd8a8434d05e6" category="list-text"><block ref="daa40449d28fbb16d2bcd8a8434d05e6" category="inline-link-macro-rx"></block></block>
  <block id="13c852fce58f7c6981fa0a952dcd76af" category="summary">Trident運算子可讓您使用「TridentOrchestrator」規格中的屬性、自訂Astra Trident的安裝方式。</block>
  <block id="b9d69225e5cf4da0389ed6b1f6b66a10" category="doc">自訂Trident營運者部署</block>
  <block id="02e0835b3015839cde731027c217d70b" category="paragraph">請參閱下表以取得屬性清單：</block>
  <block id="c9db68ea6cff44f42ac5acbbfccec399" category="cell">用於安裝Astra Trident的命名空間</block>
  <block id="a67cf6b087ff88dbfacec8375928995c" category="cell">「Debug」</block>
  <block id="4f72bc786a1a01d5a1a8bc09d33334cc" category="cell">啟用Astra Trident的偵錯功能</block>
  <block id="d293f031e5664526b25f3a65012401b7" category="cell">《IPv6》</block>
  <block id="3dd791c4864e77ae6cf11572e2d7b374" category="cell">透過IPv6安裝Astra Trident</block>
  <block id="077e99fe42ced522b462656cffffe09c" category="cell">「k8stimeout」</block>
  <block id="4448b73eac083e33b7142f0e5790fac5" category="cell">Kubernetes作業逾時</block>
  <block id="e4d71bf2abad047425f4463e27bb83b0" category="cell">30秒</block>
  <block id="42cf123e93ecc5c0297652edbc547fc0" category="cell">「ilenceAutoSupport」</block>
  <block id="4a213b7c3b997ffb0794b25909381d16" category="cell">請勿AutoSupport 自動將此套裝組合傳送至NetApp</block>
  <block id="34d0f4a447cd1d7f59000d3be2c39320" category="cell">「enableNodePrep」</block>
  <block id="2472256a6487b0917d32f6a044a4e0ac" category="cell">自動管理工作節點相依性（* BETA *）</block>
  <block id="2bccac20e55391730a985f9819e1cc41" category="cell">「autosupportImage」</block>
  <block id="84448c234dfdfd2a7367341fd4b56a80" category="cell">遙測的容器影像AutoSupport</block>
  <block id="deb59c9b1f7c5aab7803950edd48fbdb" category="cell">「NetApp/Trident自動支援：21.04.0」</block>
  <block id="f4a6821b04b9ce6b90148068341347b6" category="cell">「autosupportProxy」</block>
  <block id="7f54ca385f028308d19e228ce0534a47" category="cell">代理伺服器的位址/連接埠、用於傳送AutoSupport 「遙測」功能</block>
  <block id="256acfe307251e7444859851d87d5735" category="cell"><block ref="256acfe307251e7444859851d87d5735" category="inline-link-rx"></block></block>
  <block id="e9f06180af644cfa6e5d20bd67c03bc5" category="cell">解除安裝</block>
  <block id="076bc379a24183ce77834bac007ca852" category="cell">用來解除安裝Astra Trident的旗標</block>
  <block id="cad060d2f14dbf08315c20014ed31daa" category="cell">記錄格式</block>
  <block id="acfc4a8e6d53bad27d4e2d393bfff61e" category="cell">要使用的Astra Trident記錄格式[text、json]</block>
  <block id="20cd815523e5806aec29a57282b0d49f" category="cell">"文字"</block>
  <block id="7610c5cc7910022402c4fbd450d889ce" category="cell">「TridentImage」</block>
  <block id="20f408a3276af1f7f1bf02ba374786ca" category="cell">要安裝的Astra Trident映像</block>
  <block id="896185b87765c519346253a5f54ecbe4" category="cell">「NetApp/Trident：21.04」</block>
  <block id="8088435dc0e1c8b85217d850d3e7a602" category="cell">「影像登錄」</block>
  <block id="4f25f4cca5c1939f4a728d2678e719f7" category="cell">內部登錄的路徑、格式為「&lt;登錄FQDN &gt;[:port]（/子路徑）」</block>
  <block id="1f147978ca8c4561ff70857129f3fa13" category="cell">"k8s.gcr.io/sig-storage（k8s 1.17+）或kay.io/k8scsi"</block>
  <block id="e6b96cbb467923e86672bb25db5ecebb" category="cell">《kubeletDir</block>
  <block id="31aad37dce0c28e12908582a0d63736a" category="cell">主機上的kubelet目錄路徑</block>
  <block id="5b9febd4bd647dae5abfddaf99b9c540" category="cell">"/var/lib/kubelet"</block>
  <block id="b6e0e2c4168573f0ed61c842470342ba" category="cell">《有線》</block>
  <block id="4e33345575b5a443dec89767624a1ee8" category="cell">要刪除以執行完整移除Astra Trident的資源清單</block>
  <block id="2d30d1348c4d2533a165827a22516caa" category="cell">「imagePullSecrets」</block>
  <block id="f73bb4a0bc9913e7fc6db5f9e5f2afeb" category="cell">從內部登錄擷取映像的機密</block>
  <block id="b89df534de66f446ec6482f9d7898bb2" category="cell">「controllerPluginNodeSelector」</block>
  <block id="15cfc4bea44cee69551eb577fb0dcd8a" category="cell">執行Trident控制器csi外掛程式之Pod的其他節點選取器。格式與pod.spec.nodeSelector相同。</block>
  <block id="8d414af35aeb82413205fa45551a5545" category="cell">無預設值；選用</block>
  <block id="df1f367efe879ec0030f43610e29c5af" category="cell">「控制器插件」</block>
  <block id="2fba8e7843d1d343f2fe29feeca4b34d" category="cell">覆寫執行Trident控制器csi外掛程式之Pod的容錯能力。格式與po.spec.TBolerations相同。</block>
  <block id="47a441037628a3c0f0edb0daccb33f99" category="cell">「nodePluginNodeSelector」</block>
  <block id="109ef057002ce8b5901039ee5b81df88" category="cell">執行Trident Node SCSI外掛程式之Pod的其他節點選取器。格式與pod.spec.nodeSelector相同。</block>
  <block id="f297db5a937924105908a365d9d4c4ff" category="cell">「nodePluginBolerations」</block>
  <block id="01fae47efea3407f5bc27a09eea8709c" category="cell">覆寫執行Trident Node SCSI外掛程式之Pod的容錯能力。格式與po.spec.TBolerations相同。</block>
  <block id="d4d1a6713550b631ed2a47905a5ac4fa" category="admonition">「pec.namespace`」在「TridentOrchestrator」中指定、以表示要安裝哪個命名空間Astra Trident。此參數*無法在安裝Astra Trident之後更新*。嘗試這樣做會導致「TridentOrchestrator」狀態變更為「失敗」。Astra Trident不打算跨命名空間移轉。</block>
  <block id="c1aa6523e4a912445f9d4b8b9fb560be" category="admonition">自動工作節點準備是*測試版功能*、僅適用於非正式作業環境。</block>
  <block id="4352a1b4e004cf57ac04661a18de43aa" category="inline-link-macro">將Pod指派給節點</block>
  <block id="b3b67fd79d24b4873c8164c750c21798" category="admonition">如需格式化Pod參數的詳細資訊、請參閱 <block ref="7b3a69fdac08c769183925679da4c365" category="inline-link-macro-rx"></block>。</block>
  <block id="0b3c55a2173aa8e730bca967a8dd7cf5" category="paragraph">您可以在定義「TridentOrchestrator」時、使用上述屬性來自訂安裝。範例如下：</block>
  <block id="82ac2196255f9b53a51cdc28bcf73966" category="paragraph">以下是另一個範例、說明如何使用節點選取器來部署Trident：</block>
  <block id="27421a0c5ebcff7855c7c87dc579b371" category="paragraph">如果您想要自訂超出「TridentOrchestrator」引數範圍的安裝、您應該考慮使用「tridentctl」來產生可視需要修改的自訂Yaml資訊清單。</block>
  <block id="aa452927f1dec9709a523a0de496d6c5" category="summary">您可以使用「tridentctl」來部署Astra Trident。</block>
  <block id="e0e3d7f1aacdf4a8196132549709430c" category="doc">使用tridentctl部署</block>
  <block id="4a052772dca278b7be31d54ca9f21831" category="inline-link-macro">基本概念</block>
  <block id="e029dd3737acab556b62bda0be50840c" category="admonition">如果您尚未熟悉 <block ref="0342248ee22d08eaf42465a29ddd67ec" category="inline-link-macro-rx"></block>現在正是這麼做的好時機。</block>
  <block id="be932f6f71d4b0b1a7f80c2e5b584b34" category="admonition">若要自訂部署、請參閱 <block ref="b336c95c8f5c7bbe82e004b1378c2302" category="inline-link-macro-rx"></block>。</block>
  <block id="df2aaa5fa27e9bdafcb6bb0a4367b7d6" category="paragraph">若要部署Astra Trident、必須符合下列先決條件：</block>
  <block id="6a64bc5a34f75dde015dc7dd8ece8c61" category="list-text">您擁有支援的Kubernetes叢集的完整權限。</block>
  <block id="3a1ac050b1160a02cbd3c9ea84228191" category="list-text">您可以存取支援的NetApp儲存系統。</block>
  <block id="6a477d2ddba6ea3bc12088f821ce4e64" category="list-text">您可以從所有Kubernetes工作節點掛載磁碟區。</block>
  <block id="6d8c90e9c1152c55e27e8166d128b927" category="list-text">您的Linux主機已安裝並設定為管理您要使用的Kubernetes叢集。</block>
  <block id="c40e5b69838954fb37e4c3a433e341a8" category="list-text">您已將「KUBECCONFIG」環境變數設定為指向Kubernetes叢集組態。</block>
  <block id="fe116e93fbfba0aec359f5fde363784c" category="inline-link-macro">具備Astra Trident所需的閘道</block>
  <block id="6cb07e07cf0a13978f0d7384acc48f1a" category="list-text">您已啟用 <block ref="53fb1a9f15d8db1182d68d20590366cf" category="inline-link-macro-rx"></block>。</block>
  <block id="dd3de2609b612d76ef4c71b97b8d6100" category="inline-link">請依照他們的步驟啟用CLI存取</block>
  <block id="c585967fa32d82c5e3c24bd63926c6a0" category="list-text">如果您使用Kubernetes搭配Docker Enterprise、<block ref="57562caf1c76e1a261b7e2f8c3d113f9" category="inline-link-rx"></block>。</block>
  <block id="b430504ce0f6755a2be91a9a221c144e" category="paragraph">您知道嗎？太棒了！讓我們開始吧。</block>
  <block id="ed000d2029e135f34f854fa4e820940b" category="admonition">如需自訂部署的相關資訊、請參閱 <block ref="b336c95c8f5c7bbe82e004b1378c2302" category="inline-link-macro-rx"></block>。</block>
  <block id="f7fca6c4035d50dff676b2d20fe511ba" category="section-title">步驟1：判斷Kubernetes叢集的資格</block>
  <block id="ea8cda06a0e70ad34c1b9ab1b7135105" category="inline-link-macro">支援的Kubernetes叢集</block>
  <block id="665cf0ff23392f7e380041a2b34a5f5a" category="paragraph">首先您需要登入Linux主機、然後驗證它是否正在管理_工作_、 <block ref="ac355729d1ddc95a290738ca862fed08" category="inline-link-macro-rx"></block> 您擁有必要的權限。</block>
  <block id="8a0f5f61d4ea2fb3a2f0ee6de4b7cf40" category="admonition">使用OpenShift時、您可以在所有範例中使用「oc"而非「kubecll」、而且您應該先執行「ocLogin -u system:admin」或「ocLogin -u kube-admin」、以*系統：admin*登入。</block>
  <block id="09ea6b05f579a1e9903c54dfcd6a0dc9" category="paragraph">若要檢查Kubernetes版本、請執行下列命令：</block>
  <block id="d14fa1adb2805f01b2a616f5ef9d25be" category="paragraph">若要查看您是否具有Kubernetes叢集管理員權限、請執行下列命令：</block>
  <block id="f67b776be47148789a46badee3f77607" category="paragraph">若要驗證是否可以從Docker Hub啟動使用映像的Pod、並透過Pod網路連線至儲存系統、請執行下列命令：</block>
  <block id="b80293f6b9048d95e7f975e831ef4da6" category="paragraph">識別Kubernetes伺服器版本。安裝Astra Trident時會使用此功能。</block>
  <block id="57786106edaa9a7d85847431f0aa5559" category="section-title">步驟2：下載並解壓縮安裝程式</block>
  <block id="f838f032d9e83a6229936c3a7784f752" category="admonition">Trident安裝程式會建立Trident pod、設定用來維護其狀態的CRD物件、並初始化執行動作的csi sidecars、例如資源配置和將磁碟區附加至叢集主機。</block>
  <block id="7358b1fd077fa65f88fff87888fd2547" category="inline-link">Trident安裝程式套裝組合</block>
  <block id="92c4cf66727cb67866ebf0c3ec416382" category="paragraph">您可以下載的最新版本<block ref="e796e94083ba305bee55a53ec1dc755d" category="inline-link-rx"></block> 從_下載_區段擷取。</block>
  <block id="31dfa917b0ab09bc8fa9aa62c5b68b9b" category="paragraph">例如、如果最新版本為21.07.1：</block>
  <block id="9b7632bed019c72ffa74193e1808fd78" category="section-title">步驟3：安裝Astra Trident</block>
  <block id="326f6498f188018e71d4ea9c3a240042" category="paragraph">執行「tridentctl install」命令、在所需的命名空間中安裝Astra Trident。</block>
  <block id="ed1112be79a7a22fdbf9b294f3ed718b" category="paragraph">安裝程式完成後、看起來會是這樣。根據Kubernetes叢集中的節點數量、您可能會看到更多的Pod：</block>
  <block id="1c3da07a8a73bf0d4070c8c4b10d14c8" category="inline-link-macro">部署後工作</block>
  <block id="e3828f7a456f3c91d25ec19bbf457e6d" category="paragraph">如果您看到類似上述範例的輸出、表示您已完成此步驟、但尚未完整設定Astra Trident。請繼續進行下一步。請參閱 <block ref="6bfdfe984198635473da869595980b46" category="inline-link-macro-rx"></block>。</block>
  <block id="a0015d3671af62700240db94388892fb" category="paragraph">但是、如果安裝程式未成功完成、或您看不到*執行中*的「Trident - csi -&lt;產生的id&gt;」、則表示平台未安裝。</block>
  <block id="e09245effc62059e51f926fad603e413" category="inline-link-macro">疑難排解</block>
  <block id="a03102a9f58cbddc7c8c4a6a8e198bc0" category="admonition">如需部署期間的疑難排解問題、請參閱 <block ref="d5a4e07afa9c1e3e2869e1c17ce11b3d" category="inline-link-macro-rx"></block> 區段。</block>
  <block id="732d0805e41f2db48aa120c357324ee4" category="summary">您可以使用Trident運算子或Tridentctl來部署Astra Trident。</block>
  <block id="42f8643eb52a942747937327c72c8361" category="doc">部署總覽</block>
  <block id="deef9d6bf4083f81d7bd15ae0c9121b6" category="admonition">從22.04版開始、每次安裝Astra Trident時、AES金鑰就不會再重新產生。在這個版本中、Astra Trident會安裝一個新的秘密物件、並在安裝過程中持續存在。這表示22.04中的「tridentctl」可以解除安裝Trident的舊版、但舊版無法解除安裝22.04安裝。</block>
  <block id="2a4a70c87489dab5d6f93148a8c11c3d" category="section-title">選擇部署方法</block>
  <block id="c41362d320971e4e8dbaa3c6a25fbdf8" category="paragraph">若要判斷要使用哪種部署方法、請考慮下列事項：</block>
  <block id="6e43a74295a2af0eedc17051e56d7e1c" category="section-title">為什麼我應該使用Trident運算子？</block>
  <block id="4f5dbc74e3448e08fe0e7bfd62876fc8" category="inline-link-macro">Trident運算子</block>
  <block id="567dcfd6302e5511c1b546a4df21a679" category="inline-link-macro">需求</block>
  <block id="eed9d9604d323a4bec2ced419db3354b" category="paragraph">。 <block ref="78ab30a4c6a9648b8dd64a71e4da2aa2" category="inline-link-macro-rx"></block> 是動態管理Astra Trident資源及自動化設定階段的絕佳方法。必須滿足一些先決條件。請參閱 <block ref="746f08a8296c9ad74e67283046d6876c" category="inline-link-macro-rx"></block>。</block>
  <block id="6f5bda8b751f36b2d937ca475d3d67ed" category="paragraph">Trident營運者提供以下幾項優點：</block>
  <block id="ae2987cb5fe6e18d8d8713ac5616010c" category="section-title">自我修復功能</block>
  <block id="48b572c20004f23dbcac3e03dede686a" category="paragraph">您可以監控Astra Trident安裝、並主動採取措施來處理問題、例如刪除部署或意外修改部署。當操作員設定為部署時、會建立一個「Trident - oper-&lt;generated -id&gt;' pod」。此Pod可將「TridentOrchestrator」的CR與Astra Trident安裝建立關聯、確保只有一個作用中的「TridentOrchestrator」。換句話說、操作人員可確保叢集中只有一個Astra Trident執行個體、並控制其設定、確保安裝具有冪等特性。當對安裝進行變更（例如刪除部署或節點取消設定）時、操作員會分別識別並修正這些變更。</block>
  <block id="69ef8379c893c23746ed9a34e42c57c7" category="section-title">輕鬆更新現有安裝</block>
  <block id="0f2d0458d6fc7f6d4317735207021e82" category="paragraph">您可以輕鬆地與營運者一起更新現有的部署。您只需要編輯「TridentOrchestrator」、就能更新安裝內容。例如、假設您需要啟用Astra Trident來產生偵錯記錄的案例。</block>
  <block id="9b5a5950e97bab4497fbaaaf8c5fadc8" category="paragraph">若要這麼做、請修補您的「TridentOrchestrator」、將「pec.debug`」設為「true」：</block>
  <block id="c9534512c045771d255bf1068862beec" category="paragraph">更新「TridentOrchestrator」之後、營運者會處理更新並修補現有安裝。這可能會觸發建立新的Pod、以據此修改安裝。</block>
  <block id="1b77eea7dc5cf10bc0ad9e1c69131aae" category="section-title">自動處理Kubernetes升級</block>
  <block id="f456a413d0506028374e871768a5f176" category="paragraph">當叢集的Kubernetes版本升級至支援的版本時、營運者會自動更新現有的Astra Trident安裝、並加以變更、以確保其符合Kubernetes版本的要求。</block>
  <block id="d1aae6ea63eb5e7fe6a9fcea5f671406" category="admonition">如果叢集升級至不受支援的版本、則操作員將無法安裝Astra Trident。如果操作員已安裝Astra Trident、則會顯示警告、指出Astra Trident安裝在不受支援的Kubernetes版本上。</block>
  <block id="fc6b134742229ab95b893ec9c711b3f2" category="section-title">為什麼要使用Helm？</block>
  <block id="9326f3d9245c1501e5438ffa40011972" category="paragraph">如果您有其他使用Helm管理的應用程式、從Astra Trident 21.01開始、您也可以使用Helm來管理部署。</block>
  <block id="0f22c891238a7408704280567046b005" category="section-title">何時應該使用tridenctl？</block>
  <block id="c67fd1b99934afa248dfeb285a9a4191" category="inline-link-macro">試用</block>
  <block id="5e8800ee18d9ba2737f70cf6fea5358c" category="paragraph">如果您現有的部署必須升級至、或是想要高度自訂部署、請參閱使用 <block ref="bbba36f756eac01f0bd418bf08e6f580" category="inline-link-macro-rx"></block>。這是部署Astra Trident的傳統方法。</block>
  <block id="992d57abd493d38bda22d9ebcaaee856" category="section-title">在部署方法之間移動的考量</block>
  <block id="4f4cd969ebbb49473d74a80bfd59025e" category="paragraph">不難想像需要在部署方法之間移動的情況。在嘗試從「tridentctl」部署移至以營運者為基礎的部署之前、您應該考慮下列事項：</block>
  <block id="62f2d30ac579a0d9c48f7e9af4709419" category="list-text">請務必使用相同的方法來解除安裝Astra Trident。如果您已使用「tridentctl」部署、您應該使用適當版本的「tridentctl」二進位來解除安裝Astra Trident。同樣地、如果您是與營運者一起部署、您也應該編輯「TridentOrchestrator」、並設定「shpec.uninstall=true」來解除安裝Astra Trident。</block>
  <block id="6c85b80ffcdbeb3004a53881f1c1517d" category="list-text">如果您想要移除並使用「tridentctl」來部署Astra Trident、請先編輯「TridentOrchestrator」、然後設定「shipec.uninstall=true」來解除安裝Astra Trident。然後刪除「TridentOrchestrator」和營運者部署。然後您可以使用「tridentctl」安裝。</block>
  <block id="67ccf99745298db9f1f4f60c814a2b14" category="list-text">如果您有手動的操作員型部署、而且想要使用以Helm為基礎的Trident操作員部署、您應該先手動解除安裝操作員、然後再執行Helm安裝。如此一來、Helm就能部署具有所需標籤和註釋的Trident運算子。如果您不這麼做、則Helm型Trident營運者部署將會失敗、並顯示標籤驗證錯誤和註釋驗證錯誤。如果您的部署是「tridentctl」型部署、則可以使用Helm型部署、而不會發生問題。</block>
  <block id="30c8006f6e30b48cb471941d09dc21cc" category="section-title">瞭解部署模式</block>
  <block id="47bd3e1ef636594512d55b147acaaff7" category="paragraph">有三種方法可以部署Astra Trident。</block>
  <block id="e9ae623c81f6793165935a11caf208d7" category="section-title">標準部署</block>
  <block id="1c116faa754a12fc9d2268596b076e8e" category="paragraph">在Kubernetes叢集上部署Trident會導致Astra Trident安裝程式執行兩項作業：</block>
  <block id="2344f699f8a17dcc73e51dd0cebc6f44" category="list-text">透過網際網路擷取Container映像</block>
  <block id="3571f2c25b314afef195d39c88bd9f51" category="list-text">建立部署和/或節點取消設定、在Kubernetes叢集中的所有合格節點上執行Astra Trident Pod。</block>
  <block id="7c3f361ece5e08ed30d45bef79680ec2" category="paragraph">這類的標準部署可透過兩種不同方式執行：</block>
  <block id="3ee6b5e142a466872153196fc7ef6dcc" category="list-text">使用「tridentctl install」</block>
  <block id="80bede3741fe5e63f3218cf6d74c7a18" category="list-text">使用Trident運算子。您可以手動或使用Helm來部署Trident運算子。</block>
  <block id="33515d7582595afb015b366316a74170" category="paragraph">這種安裝模式是安裝Astra Trident的最簡單方法、適用於大多數不受網路限制的環境。</block>
  <block id="2b4393c0483ca76851a031e3e29fa399" category="section-title">離線部署</block>
  <block id="8b115025dda49a5d962758844e90a452" category="inline-link">Trident影像</block>
  <block id="72df3b7d5f8e79581be68db816189e82" category="inline-link">Trident AutoSupport 的圖片</block>
  <block id="bce707f4572096decf6c60bb5636eefb" category="paragraph">若要執行無線部署、您可以在叫用「tridentctl install」時、使用「-image-registry」旗標來指向私有映像登錄。如果使用Trident運算子進行部署、您也可以在「TridentOrchestrator」中指定「s.pec.imageRegistry」。此登錄應包含<block ref="2352a006645179366e38df69d0f9f618" category="inline-link-rx"></block>、<block ref="7bacde8b4a2cd45903f29d77cc1c5e5e" category="inline-link-rx"></block>以及Kubernetes版本所需的csi sidecar映像。</block>
  <block id="91255a4adf69521acddc8c1d55903014" category="paragraph">若要自訂部署、您可以使用「tridentctl」來產生Trident資源的資訊清單。這包括部署、取消程式集、服務帳戶、以及Astra Trident在安裝過程中所建立的叢集角色。</block>
  <block id="4c774e8a2d80dbc16b0bf55be6c7b358" category="paragraph">如需自訂部署的詳細資訊、請參閱下列連結：</block>
  <block id="711011f15ff69da45006043e93ed8981" category="inline-link-macro">自訂您的營運者型部署</block>
  <block id="8f863c0ccd38c8782b36eedbea08fc5b" category="list-text"><block ref="8f863c0ccd38c8782b36eedbea08fc5b" category="inline-link-macro-rx"></block></block>
  <block id="85cda507040c129ee606d4d8df583b90" category="inline-link-macro">自訂「tridentctl」型部署</block>
  <block id="16486d6f9e6411719306bdb76f0b34fa" category="list-text"><block ref="16486d6f9e6411719306bdb76f0b34fa" category="inline-link-macro-rx"></block></block>
  <block id="d18dc7a4e8caf207dc9c1b49eda35b70" category="admonition">如果您使用的是私有映像儲存庫、則應在私有登錄URL結尾加上Kubernetes 1.17之前的版本「/k8scsi」或Kubernetes 1.17之後的版本「/sig-storage」。在使用私有註冊表進行「tridentctl」部署時、您應該搭配「-trident映像」和「-autocomple-image」來搭配「-image登錄」。如果您使用Trident運算子來部署Astra Trident、請確定Orchestrator CR在安裝參數中包含「tridentImage」和「autosupportImage」。</block>
  <block id="47c0166da57a75ed65ddb766c838a91c" category="section-title">遠端部署</block>
  <block id="761bf14d8b8339a8f345e63dc12c36bb" category="paragraph">以下是遠端部署程序的高階概觀：</block>
  <block id="37dbca6cb8ca55a471ebc072575c0a46" category="list-text">在遠端機器上部署適當版本的「kubecll」、以便部署Astra Trident。</block>
  <block id="02ed10abbc71334918b1acb54df6e3f3" category="list-text">從Kubernetes叢集複製組態檔、然後在遠端機器上設定「KUBECCONFIG」環境變數。</block>
  <block id="da693b77cde91654c6296abe8f901988" category="list-text">啟動「kubectl Get nodes」命令、確認您可以連線至所需的Kubernetes叢集。</block>
  <block id="df65ec31c6f96e95301e3c6ff8863335" category="list-text">使用標準安裝步驟、從遠端機器完成部署。</block>
  <block id="25c11af81bf0b01ce7b0f24ddc9f7136" category="section-title">其他已知組態選項</block>
  <block id="ffedfe711d36cdc8c41927063ae77027" category="paragraph">在VMware Tanzu產品組合產品上安裝Astra Trident時：</block>
  <block id="8ded34c5caad3971bb6d0a2b202d7b32" category="list-text">叢集必須支援特殊權限的工作負載。</block>
  <block id="dbe38f4f0d856b41827e6e4531720a5e" category="list-text">「-kubelet-dir」旗標應設定為kubelet目錄的位置。依預設、這是「/var/vcap/data/kubelet」。</block>
  <block id="4dc3529fbf05312075f0aa52f9c0908e" category="paragraph">使用「-kubelet-dir」指定kubelet位置、已知適用於Trident運算子、Helm及「tridentctl」部署。</block>
  <block id="ccb0658b39bdba7456d6a536d2d07732" category="summary">Trident的安裝程式可讓您自訂屬性。</block>
  <block id="bbe2bfefd5797bb567e3da92f68ce8d1" category="doc">自訂試用部署</block>
  <block id="eabcee1fa9f08716f26be6d1b73360fe" category="paragraph">Trident安裝程式可讓您自訂屬性。例如、如果您已將Trident映像複製到私有儲存庫、則可以使用「-trident映像」來指定映像名稱。如果您已將Trident映像及所需的csi sidecar映像複製到私有儲存庫、最好使用「-image-registry」交換器來指定該儲存庫的位置、此開關的格式為「&lt;registry FQDN（登錄FQDN）&gt;[:port]」。</block>
  <block id="6fdfbf3444ce4e12e3375405bdd10237" category="paragraph">若要讓Astra Trident自動為您設定工作節點、請使用「-enable節點準備」。如需其運作方式的詳細資訊、請參閱 <block ref="144c3ced0f46507a846b2964eace5739" category="inline-link-macro-rx"></block>。</block>
  <block id="d924f91616fe4accc876113a346ee8ad" category="admonition">自動工作節點準備是*試用版功能*、僅適用於非正式作業環境。</block>
  <block id="8355509d170c8a61d236e927a5fcc6e2" category="paragraph">如果您使用Kubernetes的發佈方式、而其中的「kubelet」將資料保留在通常「/var/lib/kubelet」以外的路徑上、您可以使用「-kubelet-dir」來指定替代路徑。</block>
  <block id="47cd697cf3c9dcf916f70a0007956c1d" category="paragraph">如果您需要自訂安裝、而不需要安裝程式的引數允許、也可以自訂部署檔案。使用「-generame-custom-yaml」參數、可在安裝程式的「設置」目錄中建立下列Yaml檔案：</block>
  <block id="0858f0ee003d52951161848adffe1b31" category="list-text">《三叉叢集繫結.yaml》</block>
  <block id="af73689aedfa47bd2a7cf144917b0642" category="list-text">《三叉部署：yaml》</block>
  <block id="1d53fd876245951bb003eb47849ff39d" category="list-text">《三叉怪怪怪怪怪怪怪怪怪怪怪怪怪怪怪怪怪怪怪怪怪怪</block>
  <block id="b17dbe8acaeca82c72d25948de03eefc" category="list-text">《Trident - clusterroy.yaml》</block>
  <block id="ecb2b56a094cc1cbd3ac263b23d91f8b" category="list-text">《三叉魔魔怪、yaml》</block>
  <block id="c5e462ae653234d0ea0e98a000e62a97" category="list-text">《Trident服務：yaml》</block>
  <block id="f1347677de6873f8ddce6d736cba9a63" category="list-text">《Trident命名空間.yaml》</block>
  <block id="2539c7e25ada2a2cdae0eb4c4633b893" category="list-text">「Trident服務帳戶」。yaml</block>
  <block id="385d099ed91e83dbe20ea05fbed68e22" category="paragraph">產生這些檔案之後、您可以根據自己的需求加以修改、然後使用「-use自訂-yaml」來安裝自訂部署。</block>
  <block id="237bc513b62b16e8ddd1661150fb7f94" category="summary">您可以與Trident運算子一起部署Astra Trident。您可以手動或使用Helm來部署Trident運算子。</block>
  <block id="cba9c445dab954e3483f9e5bef9f12c5" category="doc">與Trident營運者一起部署</block>
  <block id="705db3afa1c1d4451f7b0f7f8552f1b5" category="list-text">您擁有執行Kubernetes 1.17及更新版本之受支援Kubernetes叢集的完整權限。</block>
  <block id="f9589cad119238efbce2b063d5225fb4" category="section-title">使用Helm部署Trident運算子</block>
  <block id="8a414e5c564a0c9e7a0f799a3c8cf47c" category="paragraph">使用Helm執行列出的步驟來部署Trident運算子。</block>
  <block id="dc2d0674739dcd145f5287a7d619ee05" category="paragraph">除了上述先決條件之外、若要使用Helm部署Trident運算子、您還需要下列項目：</block>
  <block id="8f5e62e2d03d87aeaafa8d4776fb7a79" category="list-text">Kubernetes 1.17及更新版本</block>
  <block id="2e1b3f44683eee188be985693c4af5e1" category="list-text">Helm版本3</block>
  <block id="9c99c91edd7eddead4f870a324f880bd" category="list-text">新增Trident的Helm儲存庫：</block>
  <block id="bfd69e00e956b426c17001fc7ae7afbe" category="list-text">使用「helm install」命令並指定部署名稱。請參閱下列範例：</block>
  <block id="e088e1f9fcd6d6a9509bd529db24c8f3" category="admonition">如果您尚未建立Trident的命名空間、可以將「-cree-namespace"參數新增至「helm install」命令。然後、Helm會自動為您建立命名空間。</block>
  <block id="e366a20246a41520da551be510c1d658" category="paragraph">安裝期間有兩種傳遞組態資料的方法：</block>
  <block id="a61e25800624ce452a1c4082ce082d9b" category="list-text">-`-Values（或`-f'）：指定具有置換的Yaml檔案。這可以多次指定、最右邊的檔案會優先。</block>
  <block id="7dc8a47a7055ee868486daae4c256916" category="list-text">-Set'：在命令列上指定置換項目。</block>
  <block id="f64fcf716c27478cdc36b1f36306d5eb" category="paragraph">例如、若要變更預設值「debug」、請執行下列「-set」命令：</block>
  <block id="24da04b0777d00c6fe43de99895058bd" category="paragraph">Helm圖表中的「values.yaml」檔案提供金鑰清單及其預設值。</block>
  <block id="1294c366742670bd28702f7cafffc981" category="paragraph">「helm清單」會顯示安裝的詳細資料、例如名稱、命名空間、圖表、狀態、 應用程式版本、修訂編號等。</block>
  <block id="3470548c691fb90c7ea544350c2c7052" category="section-title">手動部署Trident運算子</block>
  <block id="8f3f1888bbf317edb14f0f439c7d142f" category="paragraph">執行所列步驟、手動部署Trident運算子。</block>
  <block id="619cde7335e798082dc3bfdbe30708a0" category="paragraph">首先您需要登入Linux主機、然後確認它正在管理_運作_、 <block ref="ac355729d1ddc95a290738ca862fed08" category="inline-link-macro-rx"></block> 您擁有必要的權限。</block>
  <block id="e420b75ec3bc014e3f69c43b2383768b" category="admonition">使用OpenShift時、請在所有範例中使用「oc"而非「kubecll」、然後先執行「ocLogin -u system:admin」或「occ login-u kube-admin」、以*系統：admin*登入。</block>
  <block id="3b4c548466953befff1962ac2426cb8e" category="paragraph">若要查看Kubernetes版本是否晚於1.17、請執行下列命令：</block>
  <block id="b51ca564a2763a36e8eff661a1e45814" category="section-title">步驟2：下載並設定營運者</block>
  <block id="2078c81a90072659fba28be2f6863a52" category="admonition">從21.01開始、Trident運算子就是叢集範圍。若要使用Trident營運者來安裝Trident、必須建立「TridentOrchestrator」自訂資源定義（CRD）並定義其他資源。在安裝Astra Trident之前、您應該先執行這些步驟來設定操作員。</block>
  <block id="76e266ddd09c36b072fda03f840a24df" category="list-text">下載最新版本的<block ref="d4cf8040e05d7d00be7e40a7abf8ee09" category="inline-link-rx"></block> 從_下載_區段擷取。</block>
  <block id="f3d3e6090d613a233f190256fd5f4fa3" category="list-text">使用適當的CRD資訊清單來建立「TridentOrchestrator」CRD。之後您將建立一個「TridentOrchestrator」自訂資源、以產生操作者的安裝。</block>
  <block id="2fd9409a1ac929d355820ffd5accc531" category="list-text">建立「TridentOrchestrator」CRD之後、請建立下列作業者部署所需的資源：</block>
  <block id="cb410399b5d1d9b73f065ed14123f45d" category="list-text">營運者的服務帳戶</block>
  <block id="8078c9a60d1b454fe7572e23c307625e" category="list-text">叢集角色和叢集角色繫結至服務帳戶</block>
  <block id="5e5472e17b92112eb99dbbae729e1a4b" category="list-text">專屬的PodSecurity原則</block>
  <block id="dbbf8c6ec95775d28c3c6da1878bf8c3" category="list-text">營運者本身</block>
  <block id="3eb35ab5560d306167480f5846c3f66a" category="paragraph">Trident安裝程式包含定義這些資源的資訊清單。根據預設、運算子會部署在「Trident」命名空間中。如果「Trident」命名空間不存在、請使用下列資訊清單來建立名稱空間。</block>
  <block id="9d010a8f9df48de6abe7351f048fe2f7" category="list-text">若要在預設的「三叉」命名空間以外的命名空間中部署運算子、您應該更新「serviceaccount.yaml」、「clusterrolebind.yaml」和「oper.yaml」等資訊清單、然後產生「bundle.yaml」。</block>
  <block id="16f1c44dd25afde65aacbc201617651f" category="paragraph">執行下列命令、以更新Yaml清單、並使用「kustomization、yaml」產生您的「bunder.yaml」：</block>
  <block id="05f465d1f3f89d87686947655659abc3" category="paragraph">執行下列命令以建立資源並部署營運者：</block>
  <block id="a0fa1784e85c80577b8b123157bd45da" category="list-text">若要在部署後驗證操作員的狀態、請執行下列步驟：</block>
  <block id="1c76f442bb494f18915f305a59518ed1" category="paragraph">營運者部署成功建立一個在叢集中其中一個工作節點上執行的Pod。</block>
  <block id="a770ca95121cc795b602f9af6af024fb" category="admonition">Kubernetes叢集中只應有*一個運算子執行個體*。請勿建立Trident營運者的多個部署。</block>
  <block id="b22134de94bce671f8ac945536b7497c" category="section-title">步驟3：建立TridentOrchestrator並安裝Trident</block>
  <block id="5693b155707eefef50a904b3b1523862" category="paragraph">您現在可以使用運算子來安裝Astra Trident！這需要建立「TridentOrchestrator」。Trident安裝程式隨附建立「TridentOrchestrator」的範例定義。這將開始在「Trident」命名空間中安裝。</block>
  <block id="eda3cb9b284c6edd303631dd83beca97" category="inline-link-macro">自訂您的Trident部署</block>
  <block id="df1a9b2505f9a695dab238c459f4c11e" category="paragraph">Trident運算子可讓您使用「TridentOrchestrator」規格中的屬性、自訂Astra Trident的安裝方式。請參閱 <block ref="5d22c6b05e889509f3b16bf34345783f" category="inline-link-macro-rx"></block>。</block>
  <block id="f463fa7de78b2d3c00a2d47f9fc4ca50" category="paragraph">「TridentOrchestrator」的狀態會指出安裝是否成功、並顯示安裝的Trident版本。</block>
  <block id="ec53a8c4f07baed5d8825072c89799be" category="cell">狀態</block>
  <block id="2763f33c904a183bd0ef06f9c4fb4403" category="cell">安裝</block>
  <block id="64162845794ff7262e665deec58a84f5" category="cell">營運者使用此「TridentOrchestrator」CR來安裝Astra Trident。</block>
  <block id="98dd43dfae05b11befe1f140e0ec787a" category="cell">已安裝</block>
  <block id="2fe2cc0adf9b69a871d33ba220695cd4" category="cell">Astra Trident已成功安裝。</block>
  <block id="c2aaea4dacecce78b34302e41fcef75e" category="cell">正在解除安裝</block>
  <block id="c27ff0e050a671f2eab32a372c9636bd" category="cell">操作員正在解除安裝Astra Trident、因為是「shpec.uninstall=true」。</block>
  <block id="b78846123fdd78d5ab62451b855194e3" category="cell">已解除安裝</block>
  <block id="f8a32612e33c768b5fa0dd033d91ce8d" category="cell">Astra Trident已解除安裝。</block>
  <block id="d7c8c85bf79bbe1b7188497c32c3b0ca" category="cell">失敗</block>
  <block id="273b9a9e933220f1963cbac7a7a46645" category="cell">營運者無法安裝、修補、更新或解除安裝Astra Trident；營運者將自動嘗試從此狀態恢復。如果此狀態持續存在、您將需要疑難排解。</block>
  <block id="6909beea5b50605780e3411f879fe916" category="cell">正在更新</block>
  <block id="3201d58137fab497dea740d761a9733b" category="cell">營運者正在更新現有的安裝。</block>
  <block id="902b0d55fddef6f8d651fe1035b7d4bd" category="cell">錯誤</block>
  <block id="efaeca66375c8663b6d1d64f4886f267" category="cell">不使用「TridentOrchestrator」。另一個已經存在。</block>
  <block id="06a69b41e25711d4ae5a561ed9518f18" category="paragraph">在安裝過程中、「TridentOrchestrator」的狀態會從「安裝」變更為「安裝」。如果您觀察到「失敗」狀態、而操作者無法自行恢復、則應檢查操作者的記錄。請參閱 <block ref="d5a4e07afa9c1e3e2869e1c17ce11b3d" category="inline-link-macro-rx"></block> 區段。</block>
  <block id="a62e37b5d24190e57c50856ed67d1f30" category="paragraph">您可以查看已建立的Pod、確認Astra Trident安裝是否已完成：</block>
  <block id="cb61ddc6afc630830f76a754c29c509e" category="paragraph">您也可以使用「tridentctl」來檢查安裝的Astra Trident版本。</block>
  <block id="017115d0fb78b96eca56297dcaae750a" category="paragraph">現在您可以繼續建立後端。請參閱 <block ref="6bfdfe984198635473da869595980b46" category="inline-link-macro-rx"></block>。</block>
  <block id="75f3d382f074f14c775efb5cf2f23c30" category="summary">部署Astra Trident時、請使用此處列出的建議。</block>
  <block id="ea355214fd4bc7c57f471bd92918879b" category="doc">部署</block>
  <block id="d89d3b3161292ef0c65342cbe80e883f" category="section-title">部署至專屬命名空間</block>
  <block id="13d28e8dfc702e3456e0767dff9a128a" category="inline-link">命名空間</block>
  <block id="79a77cdda2a2513aee654190c73f15ab" category="paragraph"><block ref="c41296e544cd0faaa4fe4e8b22535287" category="inline-link-rx"></block> 在不同的應用程式之間提供管理分離、是資源共用的障礙。例如、某個命名空間的某個永久虛電路無法從另一個命名空間使用。Astra Trident為Kubernetes叢集中的所有命名空間提供PV資源、並因此運用具有較高權限的服務帳戶。</block>
  <block id="853cf568613b7eec1486421468e18b9b" category="paragraph">此外、存取Trident Pod可能會讓使用者存取儲存系統認證和其他敏感資訊。請務必確保應用程式使用者和管理應用程式無法存取Trident物件定義或Pod本身。</block>
  <block id="2c8e89de5c6bf68b180cff5fea545167" category="section-title">使用配額和範圍限制來控制儲存使用量</block>
  <block id="74444eaf90c31d151645e59dcab0468d" category="inline-link">儲存配額機制</block>
  <block id="1d81c150d54eae0c49d9cfeb8d493b0f" category="inline-link">範圍限制</block>
  <block id="94104e476fe547cf6237480cacae5ed5" category="paragraph">Kubernetes有兩項功能、一旦結合、就能提供強大的機制來限制應用程式的資源使用量。。<block ref="bff513af91e6751aca3d34ef714e3b91" category="inline-link-rx"></block> 可讓系統管理員針對每個命名空間來實作全域和儲存類別的容量和物件數使用限制。此外、請使用<block ref="dbe9770513b0f7245f1fe016d20ebb70" category="inline-link-rx"></block> 確保在將要求轉送至資源配置程式之前、永久虛擬機器要求的最小值和最大值都在內。</block>
  <block id="4f9253eda0573e387f86d7777aafff03" category="inline-link">如何運用配額</block>
  <block id="923169151e05d28a3474b2a033666297" category="paragraph">這些值是以每個命名空間為基礎來定義、這表示每個命名空間都應該定義符合其資源需求的值。如需相關資訊、請參閱此處<block ref="5b289b2ffde01314d8b0d038aabd709b" category="inline-link-rx"></block>。</block>
  <block id="698aa9df4c2c5470599821c3d10620dd" category="summary">Kubernetes叢集通常由兩種類型的節點組成、每種節點負責不同的功能層面。</block>
  <block id="6e8775bd755a8835ce86806d669677ea" category="doc">儲存組態</block>
  <block id="7054a9a8c9f6d4b0bcf8cfe758a2e14d" category="paragraph">NetApp產品組合中的每個儲存平台都有獨特的功能、無論應用程式是否為容器化的應用程式帶來好處。Trident可搭配ONTAP 使用沒有一個平台比其他平台更適合所有應用程式和案例、不過在選擇平台時、應考慮應用程式和管理裝置團隊的需求。</block>
  <block id="ac5112696fd64ee051846c666ebebebe" category="paragraph">您應該遵循主機作業系統的基礎最佳實務做法、以及您所使用的傳輸協定。或者、您可能想要考慮在可用的情況下、將應用程式最佳實務做法與後端、儲存類別和永久虛擬基礎架構設定整合、以最佳化特定應用程式的儲存。</block>
  <block id="efc9d085ca2f3a152c786357e9359c03" category="section-title">最佳實務做法ONTAP Cloud Volumes ONTAP</block>
  <block id="a3f99d5d44515cf922e6b525de736173" category="paragraph">瞭解設定ONTAP 適用於Cloud Volumes ONTAP Trident的功能性及功能性的最佳實務做法。</block>
  <block id="76d50c7d0f100e6264e0d57727d099f1" category="paragraph">以下建議是設定ONTAP 以容器化工作負載為基礎的功能指南、這些功能會消耗Trident動態配置的磁碟區。每個項目都應考量及評估是否適合您的環境。</block>
  <block id="3fb21976d2729216782dd61ffed84a54" category="section-title">使用Trident專用的SVM</block>
  <block id="fa4e21d3612a3f737c7a4ac7ebf24950" category="paragraph">儲存虛擬機器（SVM）可隔離ONTAP 及管理各個客戶在一個系統上的區隔。將SVM專用於應用程式可委派權限、並可套用最佳實務做法來限制資源使用量。</block>
  <block id="3dc5510a67688b81f0d6d0db440da909" category="paragraph">SVM管理有多種選項可供選擇：</block>
  <block id="fe425a9419fa4d05d42131c26306e4f1" category="list-text">在後端組態中提供叢集管理介面、以及適當的認證、然後指定SVM名稱。</block>
  <block id="e2160df70bcda0ee43cb3c66dc22c719" category="list-text">使用ONTAP 支援功能的支援中心或CLI、為SVM建立專屬的管理介面。</block>
  <block id="2bf2fa2c1c3a6e10095db72759cc9983" category="list-text">與NFS資料介面共用管理角色。</block>
  <block id="5cf4c2e89b362842d77f4e4209c4ef99" category="paragraph">在每種情況下、介面都應該位於DNS中、而且在設定Trident時、應該使用DNS名稱。這有助於推動一些DR案例、例如不使用網路身分保留功能的SVM-DR。</block>
  <block id="6a392b5e005fffe32231c94dc96a1605" category="inline-link">SVM-DR</block>
  <block id="2b4a6ee2db063653d6076884295a3854" category="paragraph">不過、您並不偏好為SVM設定專屬或共享的管理LIF、不過您應該確保網路安全性原則符合您選擇的方法。無論如何、管理LIF都應透過DNS存取、以達到最大的靈活度<block ref="f5e9502989ce78934689806ebb69606a" category="inline-link-rx"></block> 與Trident搭配使用。</block>
  <block id="4a0ee008d3379206a925ade3a9e707dd" category="section-title">限制最大Volume數</block>
  <block id="e5e09031843479ef9ef8cbbd4c2f404c" category="inline-link">NetApp Hardware Universe</block>
  <block id="400a5d259a812effb5b7df506bf020ef" category="paragraph">根據軟體版本和硬體平台、系統可提供最大的Volume數。ONTAP請參閱<block ref="bb9c67b5a4c15a85b5e6aa6c9afd0285" category="inline-link-rx"></block> 針對您的特定平台和ONTAP 版本、決定確切的限制。當磁碟區數用盡時、資源配置作業不僅會針對Trident、也會針對所有儲存要求失敗。</block>
  <block id="39da19b7dd55941b6cdabf34befc0b4c" category="paragraph">Trident的「ONTAP-NAS」和「ONTAP-SAN」驅動程式會為每個建立的Kubernetes持續Volume（PV）提供FlexVolume。「ONTAP-NAS-P節約」驅動程式可為每200個PV建立約一個FlexVolume（可設定為50到300個）。「ONTAP-san經濟型」驅動程式可為每100個PV建立約一個FlexVolume（可設定為50到200個）。若要避免Trident佔用儲存系統上的所有可用磁碟區、您應該在SVM上設定限制。您可以從命令列執行此動作：</block>
  <block id="f36680e3d3cb96c74d2f1a54c3c4a0fa" category="paragraph">「最大用量（max volume）的值會根據您環境的幾項特定條件而有所不同：</block>
  <block id="5f6d1abb6889904ee0375b2fc6c8f078" category="list-text">在叢集中現有的Volume數量ONTAP</block>
  <block id="029383c13d9ad2c5ba18a16f8fbe2002" category="list-text">您預期在Trident外部配置其他應用程式的Volume數量</block>
  <block id="02f4ac473b944a63551d51d727b5bb49" category="list-text">Kubernetes應用程式預期會使用的持續磁碟區數量</block>
  <block id="1d3555f20ac0a2897a1596631b5fb27a" category="paragraph">「最大容量」值是ONTAP 指在整個叢集中所有節點上配置的總Volume、而非在個別ONTAP 的節點上配置的總Volume。因此ONTAP 、您可能會遇到一些情況、例如、某個叢集節點的資源配置量可能遠高於或低於其他節點。</block>
  <block id="46710fe77f663864a23e02a880a9ae53" category="inline-link">集合體</block>
  <block id="8eb27359ed8f69eb07c318fcd224ba66" category="paragraph">舉例ONTAP 來說、雙節點的「叢集」最多可裝載2000個FlexVolumes。將最大Volume數設為1250似乎非常合理。不過、如果只有<block ref="acf6cbef6ee0ef07ee3fe13269233be8" category="inline-link-rx"></block> 從某個節點指派給SVM、或是從某個節點指派的集合體無法根據（例如、由於容量）進行資源配置、則另一個節點會成為所有Trident資源配置磁碟區的目標。這表示在達到「最大磁碟區」值之前、該節點可能會達到磁碟區限制、進而影響使用該節點的Trident和其他Volume作業。*您可以確保叢集中每個節點的集合體都指派給Trident使用的SVM、數量相等、藉此避免這種情況。*</block>
  <block id="7ef3217c984ef7f973d389e434be312c" category="section-title">限制Trident所建立的Volume大小上限</block>
  <block id="031b203330c3abb94f6fa406ff721de4" category="paragraph">若要設定Trident可建立的磁碟區大小上限、請在「backend.json」定義中使用「limitVolume Sizes」參數。</block>
  <block id="1c19414de17c9992b25b0a1b02a52715" category="paragraph">除了控制儲存陣列的磁碟區大小、您也應該善用Kubernetes功能。</block>
  <block id="85c0f9773e01224a56713ea4e6d83b86" category="section-title">設定Trident使用雙向CHAP</block>
  <block id="8b7c80a4394c7e64aa891100d57a755f" category="paragraph">您可以在後端定義中指定CHAP啟動器和目標使用者名稱和密碼、並在SVM上啟用Trident啟用CHAP。Trident使用後端組態中的「useCHAP」參數來驗證iSCSI連線、以ONTAP CHAP作為後端點。Trident 20.04及更新版本提供雙向CHAP支援。</block>
  <block id="2596e59ce5cd0d1b0066656f191365d0" category="section-title">建立並使用SVM QoS原則</block>
  <block id="560417d4f795b7e1176a40db8e4ccca8" category="inline-link">預防欺凌</block>
  <block id="4870168b0713fe3089cf587858fc3b40" category="paragraph">運用ONTAP 套用至SVM的SVM的SQoS原則、限制Trident佈建磁碟區所耗用的IOPS數量。這對我們有幫助<block ref="1b59d76842e8b78d6111d3e73e9cd404" category="inline-link-rx"></block> 或失控的容器、避免影響Trident SVM以外的工作負載。</block>
  <block id="d6ab867679686745d96bea839929a6de" category="paragraph">您可以在幾個步驟中建立SVM的QoS原則。如ONTAP 需最準確的資訊、請參閱您的版次更新文件。以下範例建立QoS原則、將SVM可用的總IOPS限制為5000。</block>
  <block id="c790de304b7ca0097f2133cf9da4e657" category="paragraph">此外、如果ONTAP 您的版本支援此功能、您可以考慮使用QoS下限來保證容器化工作負載的處理量。調適性QoS與SVM層級原則不相容。</block>
  <block id="38c0b69f6b2ee691e1ba568134513414" category="paragraph">容器化工作負載專用的IOPS數量取決於許多層面。其中包括：</block>
  <block id="ddbd18591c9b7378c6187dbd9179e1f0" category="list-text">使用儲存陣列的其他工作負載。如果有其他工作負載與Kubernetes部署無關、請善用儲存資源、確保這些工作負載不會意外受到不良影響。</block>
  <block id="5da5727b396cee5b024364d989fe253b" category="list-text">預期的工作負載會在容器中執行。如果將在容器中執行高IOPS需求的工作負載、低QoS原則會導致不良體驗。</block>
  <block id="e6f229b5d5d2421c4306920759828212" category="paragraph">請務必記住、在SVM層級指派的QoS原則會導致所有已配置給SVM的磁碟區共用相同的IOPS集區。如果其中一種或少數幾種容器化應用程式的IOPS需求較高、可能會成為其他容器化工作負載的一大功臣。如果是這種情況、您可能需要考慮使用外部自動化來指派每個Volume QoS原則。</block>
  <block id="ac2167b1e02d575eb6ddfe4e58f5cdcf" category="admonition">如果您的版本早於ONTAP 9.8、您應該將QoS原則群組指派給SVM * Only *。</block>
  <block id="9992cae6c17055c750a849c5f6135eb2" category="section-title">為Trident建立QoS原則群組</block>
  <block id="76a3e54f72b3a7224429f111e58f836c" category="inline-link">保證QoS的處理量</block>
  <block id="edb2313b52b4c42008f0531bd6a05e49" category="paragraph">服務品質（QoS）可確保關鍵工作負載的效能不會因競爭工作負載而降級。支援QoS原則群組的QoS選項可用於磁碟區、並可讓使用者定義一或多個工作負載的處理量上限。ONTAP如需QoS的詳細資訊、請參閱<block ref="721a1778a2025ec5868484b3888c0186" category="inline-link-rx"></block>。您可以在後端或儲存資源池中指定QoS原則群組、並將其套用至該資源池或後端中建立的每個磁碟區。</block>
  <block id="0394fb1288eac4cd3d40bcd991e079e9" category="paragraph">包含兩種QoS原則群組：傳統和可調適。ONTAP傳統原則群組可在IOPS中提供最大（或最小）的單位處理量（在較新版本中）。調適性QoS會自動將處理量調整至工作負載大小、並隨著工作負載大小變更、維持IOPS與TBs的比率。當您在大型部署中管理數百個或數千個工作負載時、這項優勢就相當顯著。</block>
  <block id="f5acc65a21daed9bb8e91cb5cdd0ae52" category="paragraph">建立QoS原則群組時、請考量下列事項：</block>
  <block id="6d5fcf300cd9e9239c26ce37b0919fca" category="list-text">您應該在後端組態的「故障」區塊中設定「qosPolicy」金鑰。請參閱下列後端組態範例：</block>
  <block id="32160c2368452bf7d86bcffae7f142be" category="list-text">您應該為每個Volume套用原則群組、以便每個Volume都能獲得原則群組指定的整個處理量。不支援共用原則群組。</block>
  <block id="b2365e059850d5e32885189655bf469c" category="inline-link">Sof 9.8 QoS命令ONTAP</block>
  <block id="23225608cf33a6c6a4aec9126514b0e1" category="paragraph">如需QoS原則群組的詳細資訊、請參閱<block ref="40468e984a92fba9003857701268163a" category="inline-link-rx"></block>。</block>
  <block id="d5d2a5bc92eea85a4dd11a642ed8a170" category="section-title">限制Kubernetes叢集成員存取儲存資源</block>
  <block id="0f2b74d1b972675eb3d4efe7d8c3ed16" category="paragraph">限制存取Trident所建立的NFS磁碟區和iSCSI LUN、是Kubernetes部署安全態勢的重要元件。這樣做可防止非Kubernetes叢集一部分的主機存取磁碟區、並可能意外修改資料。</block>
  <block id="9602ec8691c1a564016f9fd8086139f1" category="paragraph">請務必瞭解命名空間是Kubernetes中資源的邏輯邊界。假設相同命名空間中的資源可以共用、但重要的是、沒有跨命名空間功能。這表示即使PV是全域物件、但只有在同一個命名空間中的Pod才能存取它們。*確保命名空間在適當時用於提供分隔是非常重要的。*</block>
  <block id="1162be0546226cff2cbd973cd2140d33" category="paragraph">大多數組織對於Kubernetes內容中的資料安全性、主要關注的是、容器中的程序可以存取掛載到主機的儲存設備、但不適用於容器。 <block ref="962cfea7b49ca7b2d398d891b4313cb5" category="inline-link-rx"></block> 旨在防止這類入侵。不過、有一個例外：特殊權限容器。</block>
  <block id="7b10e929cc2e0061dfb50042a0203c79" category="inline-link">Pod安全性原則</block>
  <block id="76db1afb772160283f7f86cdd67c35f8" category="paragraph">與正常情況相比、特權容器的執行主機層級權限大幅增加。依預設不會拒絕這些功能、因此請務必使用停用該功能<block ref="e5ab4ede40a4a6a5f5684247585b5fb0" category="inline-link-rx"></block>。</block>
  <block id="5fabba1d91abcfb09b6049897727e91c" category="paragraph">對於需要從Kubernetes和外部主機存取的磁碟區、儲存設備應以傳統方式進行管理、由系統管理員引進PV、而非由Trident管理。這可確保只有在Kubernetes和外部主機中斷連線且不再使用磁碟區時、才會銷毀儲存磁碟區。此外、也可以套用自訂匯出原則、以便從Kubernetes叢集節點和Kubernetes叢集以外的目標伺服器存取。</block>
  <block id="4b4f0cfc14f082f2397c1c96efa18fc1" category="paragraph">對於具有專屬基礎架構節點（例如OpenShift）或其他無法排程給使用者應用程式的節點的部署、應使用個別的匯出原則來進一步限制對儲存資源的存取。這包括為部署至這些基礎架構節點的服務（例如OpenShift Metrics和記錄服務）、以及部署至非基礎架構節點的標準應用程式建立匯出原則。</block>
  <block id="e38f5be5ff6a8a362870a032acdf5d2f" category="section-title">使用專屬的匯出原則</block>
  <block id="2f05855ad489343ae535c8f17eaa6f34" category="paragraph">您應該確保每個後端都有一個匯出原則、只允許存取Kubernetes叢集中的節點。Trident可從20.04版開始自動建立及管理匯出原則。如此一來、Trident就能限制對Kubernetes叢集中節點所配置之磁碟區的存取、並簡化節點的新增/刪除作業。</block>
  <block id="28af9e32119f59018dd5d887ad93ccd4" category="paragraph">或者、您也可以手動建立匯出原則、並以一或多個匯出規則填入、以處理每個節點存取要求：</block>
  <block id="4ae1e64986504dce6897746ebc9d2786" category="list-text">使用「vserver匯出原則建立」ONTAP 的flexcli命令來建立匯出原則。</block>
  <block id="cd0a9fca1fb3ba0fcdd98d0e87cb78a9" category="list-text">使用「vserver匯出原則規則create」ONTAP 的CLI命令、將規則新增至匯出原則。</block>
  <block id="bc3a2f6421da1e870583cfb0b9cf4a91" category="paragraph">執行這些命令可讓您限制哪些Kubernetes節點可以存取資料。</block>
  <block id="bd82c82b218c96acc3c66f92a723ce74" category="section-title">停用應用程式SVM的showmount</block>
  <block id="613655fb3db9bdbe0f795ee9424fc1fe" category="paragraph">「show mount」功能可讓NFS用戶端查詢SVM、以取得可用的NFS匯出清單。部署到Kubernetes叢集的Pod可針對資料LIF發出「show mount -e」命令、並接收可用掛載的清單、包括無法存取的掛載。雖然這本身並不是安全威脅、但它確實提供不必要的資訊、可能有助於未獲授權的使用者連線至NFS匯出。</block>
  <block id="08f1d9a2f49f56965b640bc15796cd61" category="paragraph">您應該使用SVM層級ONTAP 的CLI命令來停用「show mount」：</block>
  <block id="648e0e1a6a98e76bdfe9780c42dacb6b" category="section-title">最佳實務做法SolidFire</block>
  <block id="89f93e411a40f5c6365a4703e004f15b" category="paragraph">瞭解設定SolidFire Trident之用的功能完善的功能。</block>
  <block id="52f311b56fcd9d4fb074918af9b7c7f9" category="section-title">建立SolidFire 支援帳戶</block>
  <block id="b0dd2707e9f12b5e1fda314748ffa386" category="paragraph">每SolidFire 個驗證帳戶都代表唯一的磁碟區擁有者、並會收到自己的挑戰握手驗證傳輸協定（CHAP）認證資料。您可以使用帳戶名稱和相對CHAP認證、或是透過Volume存取群組、來存取指派給帳戶的磁碟區。帳戶最多可指派2、000個磁碟區、但一個磁碟區只能屬於一個帳戶。</block>
  <block id="eaf4b71058f7db58997dfe694c62a96a" category="section-title">建立QoS原則</block>
  <block id="fd640dfd679c3a7e40aa99c3e08c8294" category="paragraph">如果您想建立並儲存可套用至許多Volume的標準化服務品質設定、請使用SolidFire 「服務品質（QoS）」原則。</block>
  <block id="41be5238fc563c2aac0a0e6ee4cf6e96" category="paragraph">您可以設定每個Volume的QoS參數。設定三個可設定的參數來定義QoS、以確保每個Volume的效能：最小IOPS、最大IOPS和爆發IOPS。</block>
  <block id="48e4bd34fd7a9e1233ea82bc818a3161" category="paragraph">以下是4KB區塊大小的可能最小、最大和尖峰IOPS值。</block>
  <block id="8e4988a1e5f387efce6f20e4f25a8e40" category="cell">IOPS參數</block>
  <block id="0b890b1926b90387673882e6ccae7fdc" category="cell">定義</block>
  <block id="96a22bf638896c990d26e043087fb6b0" category="cell">最小價值</block>
  <block id="31ce3cdcd67850870b616f75b555bbc5" category="cell">預設值</block>
  <block id="c9fb55be94277b8390352c215f32d44c" category="cell">最大價值（4KB）</block>
  <block id="b05f9ccd772b396ac1f5a05345a9d4f8" category="paragraph">最小IOPS</block>
  <block id="2b30c179facf62f8a2bdbd1b09b37b96" category="paragraph">保證磁碟區效能等級。</block>
  <block id="c0c7c76d30bd3dcaefc96f40275bdc0a" category="cell">50</block>
  <block id="3f74a886c7f841699690962c497d4f30" category="paragraph">15000</block>
  <block id="4f5a6f8b41826526724ba294b8e056bd" category="paragraph">最大IOPS</block>
  <block id="4e41c5ccaf1affa697729ea4d1e88554" category="paragraph">效能不會超過此限制。</block>
  <block id="e05695d29cb4a9339534e5a9c273fa14" category="paragraph">20萬</block>
  <block id="affd4aba1c5f696e972368c9eb698c65" category="paragraph">暴增IOPS</block>
  <block id="2734923c054f38d8ca66133414af4469" category="paragraph">在短時間暴增案例中允許的最大IOPS。</block>
  <block id="e2eb05f1ef7720127ac371ceddc6f433" category="admonition">雖然最大IOPS和爆發IOPS可設定為高達20、000、但實際的Volume最大效能卻受到叢集使用量和每節點效能的限制。</block>
  <block id="fa9b1a3006e0ba9ad904c059c0b9add6" category="inline-link">服務品質SolidFire</block>
  <block id="7363485d4653963c22d3ed43afd0003a" category="paragraph">區塊大小和頻寬會直接影響IOPS的數量。隨著區塊大小增加、系統會將頻寬增加至處理較大區塊大小所需的層級。隨著頻寬增加、系統能夠達到的IOPS數量也隨之減少。請參閱<block ref="c8976c50ed9f016849fdce232777cd31" category="inline-link-rx"></block> 如需QoS和效能的詳細資訊、請參閱。</block>
  <block id="b4657825f74ed622384dddf3a1d7d3b7" category="section-title">驗證SolidFire</block>
  <block id="9d3b5ff1cde828a63203f0465a34a967" category="paragraph">Element支援兩種驗證方法：CHAP和Volume Access Groups（VAG）。CHAP使用CHAP傳輸協定驗證主機到後端的驗證。Volume存取群組可控制對其所配置之Volume的存取。NetApp建議使用CHAP進行驗證、因為它更簡單、而且沒有擴充限制。</block>
  <block id="fc9e812321a3f9b0eab1b702a08bab4e" category="admonition">Trident搭配增強的csi佈置程式、可支援使用CHAP驗證。VAG只能在傳統的非csi操作模式下使用。</block>
  <block id="d23eaa75b7bd1405526da0e18b7290ac" category="paragraph">CHAP驗證（驗證啟動器是否為預定的Volume使用者）僅支援帳戶型存取控制。如果您使用CHAP進行驗證、則有兩個選項可供使用：單向CHAP和雙向CHAP。單向CHAP使用SolidFire 驗證帳戶名稱和啟動器密碼來驗證Volume存取。雙向CHAP選項提供最安全的驗證磁碟區方法、因為磁碟區會透過帳戶名稱和啟動器密碼來驗證主機、然後主機會透過帳戶名稱和目標密碼來驗證磁碟區。</block>
  <block id="42d135bea104c1079cebd1543c89e970" category="paragraph">但是、如果無法啟用CHAP且需要VAG、請建立存取群組、然後將主機啟動器和磁碟區新增至存取群組。您新增至存取群組的每個IQN都可以使用或不使用CHAP驗證來存取群組中的每個磁碟區。如果iSCSI啟動器設定為使用CHAP驗證、則會使用帳戶型存取控制。如果iSCSI啟動器未設定為使用CHAP驗證、則會使用Volume Access Group存取控制。</block>
  <block id="b4931a42b69dbf4e721e7b97873b1ebb" category="section-title">哪裡可以找到更多資訊？</block>
  <block id="2c3a4d5c923121574c10ea22c0474a01" category="inline-link">NetApp資料庫</block>
  <block id="65840df7365892d2abe1280cb6cdb1d2" category="paragraph">以下列出部分最佳實務做法文件。搜尋<block ref="4caccef7312f2c398bfbb419629c1a78" category="inline-link-rx"></block> 適用於最新版本。</block>
  <block id="d911b17f4f4cdcca62a04ad77aa9403d" category="paragraph">*《*》ONTAP</block>
  <block id="f9dd52d280693dc59e53b6e1fb7bd801" category="inline-link">NFS最佳實務與實作指南</block>
  <block id="40bb23d54df7f59219c18f15a346d9e5" category="list-text"><block ref="40bb23d54df7f59219c18f15a346d9e5" category="inline-link-rx"></block></block>
  <block id="a76193f5d9397d9c49ca283a20ccf649" category="inline-link">SAN管理指南</block>
  <block id="5bc9b097037d45aff954bf9bd632d4a4" category="list-text"><block ref="c745f55eb0c9991966e63f0608541bb1" category="inline-link-rx"></block> （適用於iSCSI）</block>
  <block id="5ca34d6ffc2a555b689542e3fbeeb7af" category="inline-link">適用於RHEL的iSCSI Express組態</block>
  <block id="36588ac65dcdb9b93916fb0ab708edb3" category="list-text"><block ref="36588ac65dcdb9b93916fb0ab708edb3" category="inline-link-rx"></block></block>
  <block id="ca7ab5ec4cba84fbef55956bb38759ce" category="paragraph">*元件軟體*</block>
  <block id="e809d9f88c2933195c4d2ab379c1b5dc" category="inline-link">設定SolidFire 適用於Linux的功能</block>
  <block id="ce0470e08aa854a8f93fa119434e8422" category="list-text"><block ref="ce0470e08aa854a8f93fa119434e8422" category="inline-link-rx"></block></block>
  <block id="d64280eb12d42bb67976ffba6d268e7b" category="paragraph">*《*》NetApp HCI</block>
  <block id="3bc72bedcc42d144356d4f933c48485d" category="inline-link">部署先決條件NetApp HCI</block>
  <block id="85bfffc1a1f7aaabd6cf58841640c308" category="list-text"><block ref="85bfffc1a1f7aaabd6cf58841640c308" category="inline-link-rx"></block></block>
  <block id="b52e411998b7d3a95ad5bd8a320bf271" category="inline-link">存取NetApp部署引擎</block>
  <block id="9d0da73b02655dd7861121905db229e2" category="list-text"><block ref="9d0da73b02655dd7861121905db229e2" category="inline-link-rx"></block></block>
  <block id="9aaca8cfd79770bc4944ccc477e37141" category="paragraph">*應用程式最佳實務做法資訊*</block>
  <block id="27a5e02bc2fadee43ace94805739a0c8" category="inline-link">MySQL ONTAP 的最佳實務做法</block>
  <block id="40d2eaf9adabe99a601c57eabf49e4d3" category="list-text"><block ref="40d2eaf9adabe99a601c57eabf49e4d3" category="inline-link-rx"></block></block>
  <block id="17efdd7d210511985714be299d595292" category="inline-link">MySQL SolidFire 的最佳實務做法</block>
  <block id="d03b53d8ec563c37e16ee8c900a75b96" category="list-text"><block ref="d03b53d8ec563c37e16ee8c900a75b96" category="inline-link-rx"></block></block>
  <block id="3aefe1a041af945f1fe8673bf775057b" category="inline-link">NetApp SolidFire 的功能與Cassandra</block>
  <block id="7e2b19f6f6bd1332efe1f7a698984670" category="list-text"><block ref="7e2b19f6f6bd1332efe1f7a698984670" category="inline-link-rx"></block></block>
  <block id="6e580111d3a8c12cdcd9522a4d3484c6" category="inline-link">Oracle SolidFire 的最佳實務做法</block>
  <block id="6db96715cefe9c4950ef722865494128" category="list-text"><block ref="6db96715cefe9c4950ef722865494128" category="inline-link-rx"></block></block>
  <block id="6448cf37496207be126495e5b05851de" category="inline-link">PostgreSQL SolidFire 的最佳實務做法</block>
  <block id="eb2c92a9d2d39fa7191d6e84d5c33bb5" category="list-text"><block ref="eb2c92a9d2d39fa7191d6e84d5c33bb5" category="inline-link-rx"></block></block>
  <block id="b062996d6ca590abe798d3db75561f79" category="paragraph">並非所有應用程式都有特定的準則、請務必與您的NetApp團隊合作並使用<block ref="4caccef7312f2c398bfbb419629c1a78" category="inline-link-rx"></block> 以尋找最新的文件。</block>
  <block id="463c6e3deb27d776ba0302b5b90f6607" category="paragraph">若要整合Astra Trident、下列設計與架構元素需要整合：驅動程式選擇與部署、儲存類別設計、虛擬儲存資源池設計、持續磁碟區宣告（PVc）、使用Astra Trident對儲存資源配置、磁碟區作業及OpenShift服務部署的影響。</block>
  <block id="1fdc23c8579638d050b7b219da011f2b" category="section-title">驅動程式選擇與部署</block>
  <block id="150d96898b109ac670a955fd616679fe" category="section-title">選擇ONTAP 一個後端驅動程式以供使用</block>
  <block id="3b81f3dbce48d5a5e5f6f338de47bb44" category="paragraph">共有四種不同的後端驅動程式可供ONTAP 使用。這些驅動程式會因使用的傳輸協定以及儲存系統上的磁碟區配置方式而有所差異。因此、請仔細考量要部署的驅動程式。</block>
  <block id="815a377da65ae5b66c84438c43416d82" category="paragraph">較高層級的應用程式若有需要共用儲存設備的元件（多個Pod存取相同的PVc）、則以NAS為基礎的驅動程式將是預設選擇、而區塊型iSCSI驅動程式則可滿足非共用儲存設備的需求。根據應用程式的需求、以及儲存設備和基礎架構團隊的舒適度來選擇傳輸協定。一般而言、大多數應用程式的差異不大、因此通常是根據是否需要共用儲存設備（如果有多個Pod需要同時存取）來決定。</block>
  <block id="3e5fda6b2fdf8b78a529ee58e0289c8d" category="paragraph">以下列出五個ONTAP 驅動程式供作幕後之用：</block>
  <block id="c2c889ded63fbe94cf7f1d5fe4747b2d" category="list-text">「ONTAP-NAS」：每個提供的PV都是ONTAP 完整的FlexVolume。</block>
  <block id="9418583a1b7e700d24bcc735aa4682b5" category="list-text">「ONTAP-NAS-EAS'：每個已配置的PV都是qtree、每個FlexVolume可設定的qtree數量（預設值為200）。</block>
  <block id="bc8f11db54909209ba09d55ee0b46990" category="list-text">「ONTAP-NAS-flexgroup」：每個PV均以ONTAP FlexGroup 完整的形式配置、並使用指派給SVM的所有集合體。</block>
  <block id="5e587346b7a212ee6429303276a1578b" category="list-text">「ONTAP-san」：每個已配置的PV都是其FlexVolume內的LUN。</block>
  <block id="85f6f5093b037b5bde3201d8136ee585" category="list-text">「ONTAP-san經濟」：每個配置的PV都是LUN、每個FlexVolume有可設定的LUN數量（預設值為100）。</block>
  <block id="f1d8371af632688748db007c98766ded" category="paragraph">在這三種NAS驅動程式之間選擇、會對應用程式可用的功能產生一些影響。</block>
  <block id="8a1187760a2c55e422a454a64e160291" category="paragraph">請注意、在下表中、並非所有功能都透過Astra Trident公開。如果需要這些功能、儲存管理員必須在資源配置後套用部分功能。上標註可區分每項功能和驅動程式的功能。</block>
  <block id="6252699c8e049f40eaf187092727a531" category="cell">ASNAS驅動程式ONTAP</block>
  <block id="9147e5e61a7b9260dec09f3a6eb3e5be" category="cell">快照</block>
  <block id="999cc42b236c7aee1157ff02d6f1bcd5" category="cell">複製</block>
  <block id="13bc190bfed9f972b3e33e3656737cdd" category="cell">動態匯出原則</block>
  <block id="ab0c646b4c5e36d9bcf8239d97fd1843" category="cell">多重附加</block>
  <block id="8f2db90dd4a6fbd95ba8f0bc54fd6b27" category="cell">QoS</block>
  <block id="9d723d04c40bfd81835c0766a698cf63" category="cell">調整大小</block>
  <block id="8c340dc334134096f68b880b42a8692c" category="cell">複寫</block>
  <block id="6bfc395e3d384b30d9f43ca45b1eeff7" category="cell">是註腳：5[]</block>
  <block id="7c078cb746c3dd22969c07747fd7f3fc" category="cell">是註腳：1[]</block>
  <block id="e4e9da2a7bd5e2b5b29c51299a1b787f" category="cell">是註腳：3[]</block>
  <block id="15861eb7768c6587d321b6010008930e" category="paragraph">Astra Trident提供2個ONTAP SAN驅動程式來支援功能如下所示。</block>
  <block id="f916141465c67326e5d7d980bff2880b" category="cell">支援SAN驅動程式ONTAP</block>
  <block id="4f546cdc5f90f7d264cde89d14c6e015" category="cell">雙向CHAP</block>
  <block id="e78e01b4457814be0584f80618e4659a" category="cell">是註腳：4[]</block>
  <block id="708ee6a923f9b4b3f2213d57632eaadc" category="verse-content-simple">上表的註腳：是註腳：1[]：不受Astra Trident管理是註腳：2[]：由Astra Trident管理、但不受PV精細控制是註腳：3[]：不受Astra Trident管理而非PV精細控制是註腳：4[]：支援原始區塊Volume是註腳：5[]：受Ci Trident支援</block>
  <block id="74b4b41be17ac9897921032dfd4e94a8" category="paragraph">非PV精細的功能會套用至整個FlexVolume、而所有PV（即共享FlexVols中的qtree或LUN）都會共用一個共同排程。</block>
  <block id="b483d59c54aea739f0806cf2f30c057e" category="paragraph">如以上表格所示、「ONTAP-NAS」與「ONTAP-NAS經濟」之間的大部分功能都相同。不過、由於「ONTAP - NAS經濟」驅動程式限制了以每個PV精細度控制排程的能力、因此這可能會特別影響您的災難恢復與備份規劃。對於想要在ONTAP 不支援的儲存設備上使用永久虛擬複製功能的開發團隊、只有在使用「ONTAP-NAS」、「ONTAP-SAN」或「ONTAP-SAN經濟」驅動程式時、才有可能做到這一點。</block>
  <block id="45f7f2e55c0930a28d1a9e481e602a09" category="admonition">「Poolidfire - san」驅動程式也能複製PVCS。</block>
  <block id="5ea8a1263c170a1b26153c03919a84f2" category="section-title">選擇Cloud Volumes ONTAP 一個後端驅動程式以供使用</block>
  <block id="986d46700a93c1b67573285912b2a857" category="paragraph">支援資料控管功能、並提供企業級的儲存功能、適用於各種使用案例、包括檔案共用、區塊層級儲存設備（NFS、SMB / CIFS及iSCSI）Cloud Volumes ONTAP 。Cloud Volume ONTAP 的相容驅動程式為「ONTAP-NAS」、「ONTAP-NAS經濟」、「ONTAP-SAN」和「ONTAP-SAN經濟」。適用於ONTAP Azure的Cloud Volume供應、適用於ONTAP GCP的Cloud Volume供應。</block>
  <block id="6b1a08ddb7e74488a9039997d4961ff8" category="section-title">選擇Amazon FSX ONTAP for Sfor Sfa的後端驅動程式</block>
  <block id="168b96624733268bb4b4ebfbebea0449" category="paragraph">Amazon FSX ONTAP for VMware可讓客戶運用熟悉的NetApp功能、效能和管理功能、同時充分發揮儲存AWS資料的簡易性、敏捷度、安全性和擴充性。FSX ONTAP for FSfor支援ONTAP的許多檔案系統功能和管理API。Cloud Volume ONTAP 的相容驅動程式為「ONTAP-NAS」、「ONTAP-NAAS-經濟」、「ONTAP-NAS-flexgroup」、「ONTAP-SAN」和「ONTAP-san經濟」。</block>
  <block id="d0030e26d7e1baf13ad36649449f3689" category="section-title">選擇NetApp HCI / SolidFire的後端驅動程式</block>
  <block id="e040ac9827d856d3ad8ae9ac0da92295" category="paragraph">NetApp HCI / SolidFire平台搭配使用的「Poolidfire」驅動程式、可協助管理員根據QoS限制、為Trident設定元素後端。如果您想要設計後端、以便針對Trident提供的磁碟區設定特定的QoS限制、請在後端檔案中使用「type」參數。管理員也可以使用「limitVolume Siz」參數、限制儲存設備上可建立的磁碟區大小。目前、磁碟區大小調整和磁碟區複寫等元素儲存功能不支援使用「Poolidfire - san」驅動程式。這些作業應透過Element Software Web UI手動完成。</block>
  <block id="77e9d6f249e4626d5b5c3aec863459d3" category="cell">驅動程式SolidFire</block>
  <block id="9ef2bbb12ff72558472202561a25058d" category="cell">CHAP</block>
  <block id="0929973a1c9993903f6193add75b3fcf" category="cell">是註腳：2[]</block>
  <block id="bccbad684880808562152ac1d82d7b73" category="verse-content-simple">註腳：是註腳：1[]：不受Astra Trident管理是註腳：2[]：支援原始區塊磁碟區</block>
  <block id="bb1da85f123c0dbedeb19d1f5c676112" category="section-title">選擇Azure NetApp Files 一個後端驅動程式以供使用</block>
  <block id="657e0fa57d574227dd7520919f55ff92" category="paragraph">Astra Trident使用「azure-NetApp-files」驅動程式來管理 <block ref="d617d79fbb5ee3bc8bd280353eeb1349" category="inline-link-macro-rx"></block> 服務：</block>
  <block id="1f65578a7accdff5ca6ff9f8dc42d9c6" category="inline-link-macro">Astra Trident的Azure NetApp Files 後端組態、適用於</block>
  <block id="e4eb3683baaad2a9ce9e264a37fb519e" category="paragraph">如需此驅動程式及其設定方式的詳細資訊、請參閱 <block ref="452e5754c64fc2b52b13e03114bfeff6" category="inline-link-macro-rx"></block>。</block>
  <block id="4da613089cbda3d7c19cb4b3f67c1f5d" category="cell">驅動程式Azure NetApp Files</block>
  <block id="8098b34f582537833b36b58273c3545b" category="cell">展開</block>
  <block id="2fdc8a66565228c15d355a7849997337" category="verse-content-simple">註腳：是註腳：1[]：不由Astra Trident管理</block>
  <block id="88d040295b5885489339e969bf92517c" category="section-title">選擇一套後端驅動程式Cloud Volumes Service 以供運用GCP進行功能</block>
  <block id="1d326a2a7f267c800fe3eafb89e5c7cd" category="inline-link-macro">服務類型</block>
  <block id="f888f12905dbaabc09dd3e50073d862f" category="paragraph">Astra Trident使用「GCP-CVS」驅動程式、在Cloud Volumes Service GCP後端連結到該功能。若要在Trident上設定GCP後端、您必須在後端檔案中指定「ProjectNumber」、「apiRegion」和「apiKey」。專案編號可在GCP入口網站找到、API金鑰必須取自您在GCP上設定Cloud Volumes API存取時所建立的服務帳戶私密金鑰檔案。Astra Trident可在兩個磁碟區中建立CVS磁碟區 <block ref="a3cd55e5a9ff014b76f6953040234c24" category="inline-link-macro-rx"></block>：</block>
  <block id="3481817b04a40b0420a940c0c9c1f82d" category="list-text">* CVS：基礎CVS服務類型、提供高分區可用度、效能等級有限/中等。</block>
  <block id="19de6287eaf342572d94a5e0b99c2823" category="list-text">* CVS效能*：效能最佳化的服務類型、最適合重視效能的正式作業工作負載。您可以從三種獨特的服務層級中進行選擇：「標準」、「優質」和「極致」。目前、要配置的CVS效能磁碟區大小下限為100 GiB、而CVS磁碟區則必須至少為300 GiB。CVS未來版本可能會移除此限制。</block>
  <block id="51e6e54f894aa900f8a1822598ef3c5a" category="admonition">使用預設CVS服務類型["scorageClass=software"部署後端時、使用者*必須取得GCP上子1TiB Volume功能的存取權*、才能取得相關專案編號和專案ID的存取權。這是Trident配置子1TiB磁碟區所需的功能。如果沒有、則對於小於600 GiB的PVCs、Volume建立*將會失敗*。使用 <block ref="0c921b807a9a638a24dd843d24ed0800" category="inline-link-macro-rx"></block> 以取得對低於1TiB磁碟區的存取權。</block>
  <block id="6219f23a135db2efc679d38117420cf0" category="cell">CVS for GCP驅動程式</block>
  <block id="439d990c21037b37b51c4373a7aa9811" category="paragraph">「GCP-CVS」驅動程式使用虛擬儲存資源池。虛擬儲存池會將後端抽象化、讓Astra Trident決定磁碟區的放置位置。系統管理員會在backend.json檔案中定義虛擬儲存池。儲存類別會使用標籤來識別虛擬儲存資源池。</block>
  <block id="3af6198d49c40c18f13c73c5ce15cf34" category="section-title">儲存層級設計</block>
  <block id="388bdf78cbb5b6bf4248ddf5613f7cc3" category="paragraph">需要設定並套用個別的儲存類別、才能建立Kubernetes儲存類別物件。本節將討論如何為應用程式設計儲存類別。</block>
  <block id="964c7dcda39ec7b9c8717c3369e2fc25" category="section-title">專為特定後端使用率而設計的儲存類別</block>
  <block id="a09acd5f665bdf96b6dce47f8d4265e3" category="paragraph">篩選功能可在特定的儲存類別物件內使用、以決定要搭配該特定儲存類別使用的儲存資源池或集區集區集區。儲存類別可設定三組篩選器：「儲存設備」、「其他儲存設備」及/或「排除儲存設備」。</block>
  <block id="fc01760e8c283c2f128543ae8b8a67cc" category="paragraph">「儲存池」參數有助於將儲存區限制在符合任何指定屬性的集區集區集區。「addionalStoragePools」參數可用來擴充Astra Trident用來進行資源配置的資源池集區集區、以及由屬性和「儲存池」參數所選取的資源池集區集區集區集區集區集區集區。您可以單獨使用參數或同時使用兩者、以確保已選取適當的儲存資源池集區集區。</block>
  <block id="74476e892d2681775eb41ec00a11e8da" category="paragraph">「exclude StoragePools」參數是用來明確排除列出的符合屬性的集區集區集區集區。</block>
  <block id="072c88043b516dbbbadd8bb0182445c7" category="section-title">模擬QoS原則的儲存類別設計</block>
  <block id="ab807e6bd2f9cb9872eed98161bdd4e1" category="paragraph">如果您想設計儲存類別來模擬服務品質原則、請建立儲存類別、並將「媒體」屬性設定為「HDD」或「SD」。根據儲存類別中提及的「媒體」屬性、Trident會選擇適當的後端、以提供「HDD」或「sd」集合體、以符合媒體屬性、然後將磁碟區的資源配置導向特定的集合體。因此、我們可以建立儲存等級Premium、將「媒體」屬性設為「sd」、可歸類為優質QoS原則。我們可以建立另一個儲存類別標準、將媒體屬性設為「HDD」、並將其歸類為標準QoS原則。我們也可以使用儲存類別中的「IOPS」屬性、將資源配置重新導向至可定義為QoS原則的元素應用裝置。</block>
  <block id="eb47104f276a8955680299ff2f4bd39d" category="section-title">儲存等級設計、可根據特定功能來使用後端</block>
  <block id="0bc0e72aefbf8f8ec0b28cc0486f98a2" category="paragraph">儲存類別可設計用於將Volume資源配置導向特定後端、啟用精簡與完整資源配置、快照、複製及加密等功能。若要指定要使用的儲存設備、請建立儲存設備類別、以指定啟用所需功能的適當後端。</block>
  <block id="f45e814b7c305f5341f031df78bf2f07" category="section-title">虛擬儲存資源池的儲存等級設計</block>
  <block id="bd755d43092fcea772b8e9ab21e9951e" category="paragraph">所有Astra Trident後端均可使用虛擬儲存資源池。您可以使用任何Astra Trident提供的驅動程式、為任何後端定義虛擬儲存池。</block>
  <block id="365b4529a5f01ced729944db23d237a5" category="paragraph">虛擬儲存資源池可讓系統管理員在後端建立抽象層級、以便透過儲存類別進行參考、以提高磁碟區在後端的靈活度與效率。不同的後端可以使用相同的服務類別來定義。此外、您也可以在相同的後端上建立多個儲存資源池、但其特性不同。當儲存類別設定為具有特定標籤的選取器時、Astra Trident會選擇符合所有選取器標籤的後端來放置磁碟區。如果「儲存類別」選取器標籤符合多個儲存資源池、Astra Trident會選擇其中一個來配置磁碟區。</block>
  <block id="830a7882918fba200333b9c6ea7db363" category="section-title">虛擬儲存資源池設計</block>
  <block id="ae2ddf83f2f62edc7ed33084b587d464" category="paragraph">建立後端時、您通常可以指定一組參數。系統管理員無法以相同的儲存認證和一組不同的參數來建立另一個後端。隨著虛擬儲存資源池的推出、此問題已獲得緩和。虛擬儲存資源池是後端與Kubernetes儲存類別之間引進的層級抽象、可讓系統管理員定義參數及標籤、並以不受後端限制的方式透過Kubernetes儲存類別做為選取元來參照。您可以使用Astra Trident為所有支援的NetApp後端定義虛擬儲存池。這份清單包括SolidFire/NetApp HCI、ONTAP 《關於Cloud Volumes Service GCP的功能、功能、功能、功能Azure NetApp Files 、功能、以及</block>
  <block id="3c4f3a478663d0f7aab5180da0b1356a" category="admonition">定義虛擬儲存集區時、建議您不要嘗試重新排列後端定義中現有虛擬集區的順序。此外、建議您不要編輯/修改現有虛擬資源池的屬性、改為定義新的虛擬資源池。</block>
  <block id="d96c9f641b35ec82dabdc46092afe1d0" category="section-title">設計虛擬儲存資源池、以模擬不同的服務層級/QoS</block>
  <block id="d7408ac84cade8c304e36b634d891b6d" category="paragraph">您可以設計虛擬儲存池來模擬服務類別。使用適用於Azure NetApp Files 支援功能的Cloud Volume Service for效益的虛擬資源池實作、讓我們來看看如何設定不同的服務類別。使用代表不同效能等級的多個標籤來設定ANF後端。將「最大效能」設定為適當的效能層級、並在每個標籤下加入其他必要的層面。現在請建立不同的Kubernetes儲存類別、以便對應至不同的虛擬儲存資源池。使用「parameters.selector`」欄位、每個StorageClass都會呼叫哪些虛擬資源池可用於裝載磁碟區。</block>
  <block id="85d73d477f633146bd32af7aaedd54da" category="section-title">設計虛擬集區以指派特定的層面集區</block>
  <block id="c011d5d6ca18de1df954b81c6bb49d4a" category="paragraph">可從單一儲存後端設計多個具有特定層面的虛擬儲存集區。若要這麼做、請使用多個標籤來設定後端、並在每個標籤下設定所需的層面。現在、請使用「parameters.selector`」欄位來建立不同的Kubernetes儲存類別、該欄位會對應至不同的虛擬儲存資源池。在後端上進行資源配置的磁碟區、將會在所選的虛擬儲存資源池中定義各個層面。</block>
  <block id="421f7dd5bb37a6401aa6326ad33dae20" category="section-title">會影響儲存資源配置的永久儲存設備特性</block>
  <block id="3800921d8c248cc0de59c64d110e570a" category="paragraph">超出所要求儲存類別的部分參數、可能會影響Astra Trident在建立永久虛擬儲存設備時的資源配置決策程序。</block>
  <block id="5ab83f35784f154d55ea7ab58c8e503b" category="section-title">存取模式</block>
  <block id="f3882c83b41b76a9fac2c57407f3ac2b" category="paragraph">透過永久虛擬網路申請儲存時、其中一個必填欄位是存取模式。所需的模式可能會影響所選的後端、以裝載儲存要求。</block>
  <block id="b72ab56468fdf0df298a89c3339b82c0" category="paragraph">Astra Trident會嘗試將所使用的儲存傳輸協定與根據下列對照表所指定的存取方法配對。這與基礎儲存平台無關。</block>
  <block id="cac415feda213697b27d3b6fce10d33a" category="cell">ReadWriteOnce</block>
  <block id="c24ad3d99a666c95edd149419c958ee0" category="cell">ReadOnlyMany</block>
  <block id="caa8dc1f4bb28d2d11226494cd05a123" category="cell">ReadWriteMany</block>
  <block id="cefb8ccdebef1940174b22e9d0ab530b" category="cell">是（原始區塊）</block>
  <block id="823f2153adc2211a0777560eafdcbad6" category="paragraph">如果要求將ReadWriteMany永久虛擬磁碟提交至Trident部署、但未設定NFS後端、則不會配置任何磁碟區。因此、申請者應使用適合其應用程式的存取模式。</block>
  <block id="5a51acb2538e54805c54d37ebb49c75d" category="section-title">Volume作業</block>
  <block id="26fad327e23b6b08dcc94300bfe1ed04" category="section-title">修改持續磁碟區</block>
  <block id="3b69d471bb98837ae6e267593bb38882" category="paragraph">持續磁碟區除了兩個例外、都是Kubernetes中不可變的物件。建立後、即可修改回收原則和大小。不過、這並不妨礙在Kubernetes外部修改磁碟區的某些部分。這可能是理想的做法、以便針對特定應用程式自訂磁碟區、確保容量不會意外耗用、或是單純地將磁碟區移至不同的儲存控制器。</block>
  <block id="f82b5505d8def4abda0bec52275bd411" category="admonition">Kubernetes樹狀目錄內建資源配置程式目前不支援NFS或iSCSI PV的磁碟區大小調整作業。Astra Trident支援同時擴充NFS和iSCSI磁碟區。</block>
  <block id="b1d1874782626fe3f391628ea493e6ef" category="paragraph">PV的連線詳細資料無法在建立後修改。</block>
  <block id="e68591655c8031177206e1e75728853f" category="section-title">建立隨需磁碟區快照</block>
  <block id="f557ce2b38683c13c1c1a070ce58a33d" category="paragraph">Astra Trident支援隨需磁碟區快照建立、並使用csi架構從快照建立PVCS。Snapshot提供便利的方法來維護資料的時間點複本、並使Kubernetes中的來源PV在生命週期上獨立不受影響。這些快照可用於複製PVCS。</block>
  <block id="f007c56a8eb121e8a696105e69aefa68" category="section-title">從快照建立磁碟區</block>
  <block id="e005d448313cdc2848d923f4c754e467" category="paragraph">Astra Trident也支援從Volume快照建立PersistentVolumes。為達成此目標、只要建立一個PersistentVolume Claim、並將「資料來源」提及為需要建立磁碟區的必要快照即可。Astra Trident會利用快照上的資料建立磁碟區、以處理此永久虛擬磁碟。有了這項功能、您可以跨區域複製資料、建立測試環境、完整取代毀損或毀損的正式作業磁碟區、或擷取特定檔案和目錄、然後將它們傳輸到其他附加磁碟區。</block>
  <block id="55a3309b0b6646e0ea6b47195bd3d4bd" category="section-title">在叢集中移動磁碟區</block>
  <block id="925b814524908630c07d45fc5a80028a" category="paragraph">儲存管理員能夠在ONTAP 整個叢集中的集合體和控制器之間、不中斷營運地將磁碟區移至儲存使用者。此作業不會影響Astra Trident或Kubernetes叢集、只要目的地Aggregate是Astra Trident所使用的SVM能夠存取的集合體。重要的是、如果新將Aggregate新增至SVM、則需要重新將其新增至Astra Trident來重新整理後端。這會觸發Astra Trident重新清查SVM、以便辨識新的Aggregate。</block>
  <block id="033dcaefcc578c987d32d4bdb6f6b1e2" category="paragraph">然而、Astra Trident並不支援跨後端移動磁碟區。這包括在同一個叢集內的SVM之間、叢集之間或不同的儲存平台（即使該儲存系統是連接至Astra Trident的儲存系統）。</block>
  <block id="302be77289f337115411c01846d9a489" category="paragraph">如果將磁碟區複製到其他位置、則磁碟區匯入功能可用於將目前的磁碟區匯入Astra Trident。</block>
  <block id="a059bca2035a0befa11f641fdabde223" category="paragraph">Astra Trident支援調整NFS和iSCSI PV的大小。這可讓使用者透過Kubernetes層直接調整磁碟區大小。所有主要的NetApp儲存平台皆可進行Volume擴充、包括ONTAP ：NetApp、SolidFire/NetApp HCI及Cloud Volumes Service 背後端點。若要稍後允許擴充、請在與磁碟區相關的StorageClass中將「owVolume Expansion」設為「true」。每當需要調整「持續Volume」的大小時、請在「持續Volume」中編輯「s.pec.resistices.resistices.storage」註釋、使其符合所需的Volume大小。Trident會自動調整儲存叢集上的磁碟區大小。</block>
  <block id="40a28a40c11a193f8911cf4143a6ae6a" category="section-title">將現有磁碟區匯入Kubernetes</block>
  <block id="62e0abd2d56d565a2b31e85b446fa800" category="paragraph">Volume匯入功能可將現有的儲存磁碟區匯入Kubernetes環境。目前支援的驅動程式有「ONTAP-NAS」、「ONTAP-NAs-flexgroup」、「Poolidfire - san」、「azure-NetApp-fil卻」和「GCP - CVS」。當將現有應用程式移轉至Kubernetes或發生災難恢復時、此功能非常實用。</block>
  <block id="5d9f64103cac7a58da69304bc3320e98" category="paragraph">使用ONTAP 支援功能的支援功能和「Poolidfire - san」驅動程式時、請使用命令「tridentctl import volume &lt;backend-name&gt;&lt;volume-name&gt;-f /path/PVC.yaml」、將現有的磁碟區匯入要由Astra Trident管理的Kubernetes。匯入Volume命令中使用的PVc Yaml或Json檔案會指向儲存類別、以將Astra Trident識別為資源配置程式。使用NetApp HCI / SolidFire後端時、請確定磁碟區名稱是唯一的。如果磁碟區名稱重複、請將磁碟區複製成唯一名稱、以便磁碟區匯入功能能夠區分它們。</block>
  <block id="555c97661fe540a8eabda5c4680e2f81" category="paragraph">如果使用「azure-netapp-files」或「gcp-CVS」驅動程式、請使用命令「tridentctl匯入Volume &lt;後端名稱&gt;&lt; Volume path&gt;-f /path/pcv.yaml」、將磁碟區匯入要由Astra Trident管理的Kubernetes。如此可確保唯一的Volume參考。</block>
  <block id="cb619cd0109686b5f82562b63e44a107" category="paragraph">執行上述命令時、Astra Trident會在後端找到磁碟區並讀取其大小。它會自動新增（必要時覆寫）設定的PVc Volume大小。Astra Trident接著會建立新的PV、Kubernetes則會將PVc繫結至PV。</block>
  <block id="3a8b25f50e2dcc298175abc8f6a71f82" category="paragraph">如果部署的容器需要特定匯入的PVc、則會保持擱置狀態、直到PVC/PV配對透過Volume匯入程序繫結為止。在PVC/PV配對繫結之後、如果沒有其他問題、則應啟動容器。</block>
  <block id="41603705958b86c3ec4ff21cfce13a5b" category="section-title">部署OpenShift服務</block>
  <block id="7e3c623b48b608f4c6380c2994ae5aa9" category="paragraph">OpenShift加值叢集服務可為叢集管理員和託管的應用程式提供重要功能。這些服務所使用的儲存設備可以使用節點本機資源進行資源配置、但這通常會限制服務的容量、效能、可恢復性及永續性。運用企業儲存陣列來提供這些服務的容量、可大幅改善服務品質、不過OpenShift和儲存管理員應該密切合作、以決定每個服務的最佳選項。Red Hat文件應充分運用、以判斷需求、並確保符合規模調整與效能需求。</block>
  <block id="6dd8f6c286b8e1a8c96c6309099f0003" category="section-title">登錄服務</block>
  <block id="68ee1c4c0da20bfd1e946df20351d4b9" category="inline-link-macro">NetApp.IO</block>
  <block id="34d357a7f8cc47e860d5fb0a317cf22d" category="paragraph">登錄的儲存設備部署與管理已記錄在中 <block ref="d5e1883ebd095c0eda96c44469e8197d" category="inline-link-macro-rx"></block> 在中 <block ref="ceb73d0582d40281d79011a1e5343e89" category="inline-link-macro-rx"></block>。</block>
  <block id="62ac236856a5a6aefd15133e967514c6" category="section-title">記錄服務</block>
  <block id="2f3052b6a2858bec8355ec56150f6a38" category="paragraph">如同其他OpenShift服務、記錄服務是使用Ansible搭配庫存檔案所提供的組態參數（即k.a.）來部署主機、提供給教戰手冊。其中包括兩種安裝方法：在初始OpenShift安裝期間部署記錄、以及在安裝OpenShift之後部署記錄。</block>
  <block id="541c717d8d2998609c0970b5e43c7401" category="admonition">從Red Hat OpenShift版本3.9起、官方文件建議您不要使用NFS來執行記錄服務、因為您擔心資料毀損。這是以Red Hat測試其產品為基礎。ONTAP的NFS伺服器沒有這些問題、可以輕鬆地回溯記錄部署。最後、記錄服務的通訊協定選擇取決於您、只要知道兩者在使用NetApp平台時都能順利運作、而且如果您偏好NFS、就沒有理由不使用NFS。</block>
  <block id="57cad4852c9c2e439f61728e0391fe7b" category="paragraph">如果您選擇使用NFS搭配記錄服務、則必須將Ansible變數「openshift_enable _unsupported_configurations」設為「true」、以避免安裝程式失敗。</block>
  <block id="be11c74c1dd7f307bb80183a90dc2067" category="section-title">開始使用</block>
  <block id="16e90b2336fdfec64b19194247422194" category="paragraph">記錄服務可選擇性地同時部署給應用程式、以及OpenShift叢集本身的核心作業。如果您選擇部署作業記錄、將變數「openshift_logging_use」指定為「true」、就會建立兩個服務執行個體。控制作業記錄執行個體的變數包含「ops」、而應用程式執行個體則不包含。</block>
  <block id="a9ccaa810b97a00e75bb1ea4100d0a9f" category="paragraph">根據部署方法設定Ansible變數非常重要、因為這樣才能確保基礎服務使用正確的儲存設備。讓我們來看看每種部署方法的選項。</block>
  <block id="c5c09113a6a6ae4b75868a9e96ea3cc3" category="inline-link-macro">RedHat OpenShift記錄文件</block>
  <block id="bc468c28ba57dbcb58de37265cd02436" category="admonition">下表僅包含與記錄服務相關的儲存組態變數。您可以在中找到其他選項 <block ref="e81826ec3b15492352776daada114990" category="inline-link-macro-rx"></block> 應根據您的部署情況來審查、設定及使用。</block>
  <block id="02098b11f876fe10c40b6106bd9864da" category="paragraph">下表中的變數會使用提供的詳細資料、產生Ansible教戰手冊、為記錄服務建立PV和PVc。這種方法的彈性遠低於OpenShift安裝後使用元件安裝方針、不過如果您有現有的磁碟區可用、這是一個選項。</block>
  <block id="47c14840d8e15331fa420b9b2f757cd9" category="cell">變動</block>
  <block id="3ec365dd533ddb7ef3d1c111186ce872" category="cell">詳細資料</block>
  <block id="9aa2fd43742cd5ed36b406b3f4b0fd8c" category="cell">"openshift_logging_storage _gin"</block>
  <block id="3260b06ea72e4931f5fb5106001fcc28" category="cell">設定為「NFS」、讓安裝程式為記錄服務建立NFS PV。</block>
  <block id="e95f43173c69a9ca544d4aaef28a4d90" category="cell">"openshift_logging_storage主機"</block>
  <block id="3a262c1d9bdec02b241c16b2c5f6dbbe" category="cell">NFS主機的主機名稱或IP位址。這應該設定為虛擬機器的資料LIF。</block>
  <block id="41aae586bb7044d7741fe9412aa81e03" category="cell">"openshift_logging_storage、nfs_directory"</block>
  <block id="bf2d137d8c669b07aae26040c7e5c0e0" category="cell">NFS匯出的掛載路徑。例如、如果磁碟區已連接為「/openshift_logging」、您就會將該路徑用於此變數。</block>
  <block id="88a9f7d18fabb82d63ac43c64ae6e735" category="cell">"openshift_logging_storage磁碟區名稱"</block>
  <block id="6f8782c23f3cb958d0de4fad76dabaed" category="cell">要建立之PV的名稱、例如「PV_ose記錄」。</block>
  <block id="789e0dc4bfc00f5c885a698d6ab34dff" category="cell">"openshift_logging_storage磁碟區大小"</block>
  <block id="b68f05ea52c8c80c07e6a4c0671c75bf" category="cell">NFS匯出的大小、例如「100Gi」。</block>
  <block id="2ab80b6965298dc6a178995bbedebe88" category="paragraph">如果您的OpenShift叢集已在執行中、因此已部署及設定Trident、則安裝程式可以使用動態資源配置來建立磁碟區。需要設定下列變數。</block>
  <block id="c2aecf833d743cbc47969cd85c67101e" category="cell">「openshift_logging_es _PVC_Dynamic」</block>
  <block id="540ad9a52084720ddb7f364fa8b304c6" category="cell">設為true可使用動態資源配置的磁碟區。</block>
  <block id="45a481a75749c5331e7e9fd7d89e473d" category="cell">「openshift_logging_es _PVC_storage _class_name」</block>
  <block id="837ffa1e281409660ed25582c5b1963f" category="cell">將在PVc中使用的儲存類別名稱。</block>
  <block id="cd3daa927272b5624e96d283365d5500" category="cell">「openshift_logging_es _PVC_size」</block>
  <block id="8f80d278a79cbc84b80a091713006022" category="cell">在永久虛擬磁碟中要求的磁碟區大小。</block>
  <block id="1bb0c7eeef4bbbefae080a294fd554b0" category="cell">「openshift_logging_es _PVC_prefix」</block>
  <block id="f870ec92e294a018a17afe7a614fb5bb" category="cell">記錄服務使用的PVCS前置詞。</block>
  <block id="e8c62e1f0f0773ae5ba6a7acad696b2d" category="cell">「openshift_logging_es _ops_PVC_Dynamic」</block>
  <block id="46e65a11ac398c02b8fce45a7cd5cf36" category="cell">設為「true」、以動態配置的磁碟區用於作業記錄執行個體。</block>
  <block id="8792c7234e14325cb68c493d20ab5154" category="cell">「openshift_logging_es _ops_PVC_storage儲存設備類別名稱」</block>
  <block id="d016f79f0ee104f3805d61e6a379fb9b" category="cell">作業記錄執行個體的儲存類別名稱。</block>
  <block id="048e768365962d7d520567f92aea8355" category="cell">「openshift_logging_es _ops_PVC_Size'</block>
  <block id="bc367f89ac597585e52d0eb58a5929ae" category="cell">作業執行個體的Volume要求大小。</block>
  <block id="155871626071d69cb283985a9f36bad2" category="cell">「openshift_logging_es_ops_PVC_prefix」</block>
  <block id="2a8f254749a466654f556c6466051133" category="cell">ops執行個體PVCS的前置詞。</block>
  <block id="e1b2d0d3228c29c069bcd139de306709" category="section-title">部署記錄堆疊</block>
  <block id="0409a0cfdfa4f3b3033503b8309442ff" category="paragraph">如果您將記錄部署為初始OpenShift安裝程序的一部分、則只需遵循標準部署程序即可。Ansible會設定及部署所需的服務和OpenShift物件、以便在可執行的完成後立即提供服務。</block>
  <block id="210ecadaccb6088b0dfbd2e6a0b5d0a0" category="inline-link-macro">RedHat OpenShift Container Platform 3.11文件</block>
  <block id="67f3e99678cc7c568f4ed29074cdc41c" category="paragraph">不過、如果您在初始安裝之後進行部署、Ansible將需要使用元件方針。不同版本的OpenShift可能會稍微改變此程序、因此請務必閱讀並遵循 <block ref="a2226808e95b8487c66dd3b8cbea118e" category="inline-link-macro-rx"></block> 適用於您的版本。</block>
  <block id="3dbf527ac3caf41ab150ec99a1737217" category="section-title">度量服務</block>
  <block id="12a5438ab4c44c9ad4dec6edc191eb7a" category="paragraph">度量服務可針對OpenShift叢集的狀態、資源使用率及可用度、提供寶貴的資訊給系統管理員。此外、也需要Pod自動擴充功能、許多組織會使用度量服務的資料來支付費用和/或顯示應用程式。</block>
  <block id="d0ed828e153e9bad2da040ddf6ad8f45" category="paragraph">如同記錄服務和OpenShift整體、Ansible可用於部署度量服務。此外、如同記錄服務、度量服務也可在叢集初始設定期間或使用元件安裝方法運作之後進行部署。下表包含在設定度量服務的持續儲存時、重要的變數。</block>
  <block id="69aa4440020e49c654aeb910f38c6bb9" category="admonition">下表僅包含與度量服務相關的儲存組態相關變數。文件中還有許多其他選項、您應該根據部署情況來檢閱、設定及使用。</block>
  <block id="4f692d78f978a73b157571022c1d1ba7" category="cell">"openshift_imization_storage類型"</block>
  <block id="30da7e263c0cffc34933d24a07fb097a" category="cell">"openshift_imization_storage主機"</block>
  <block id="adba8dd7dd2b027405b815c03a05dbf1" category="cell">NFS主機的主機名稱或IP位址。這應該設定為SVM的資料LIF。</block>
  <block id="3bafc264ad2a901d3be052a7f1cf2e44" category="cell">"openshift_imization_storage、nfs_directory"</block>
  <block id="459859e54ba90bc4145c54d1f1deecff" category="cell">NFS匯出的掛載路徑。例如、如果磁碟區已連接為「/openshift_度量」、您就會使用該路徑來處理此變數。</block>
  <block id="ca0f0d82f9c7cbc36df652cddd4b2f35" category="cell">"openshift_imization_storage磁碟區名稱"</block>
  <block id="eb10d02b22b02d7f543f867b8d31e7b0" category="cell">要建立之PV的名稱、例如「PV_ose度量」。</block>
  <block id="a3eeeafe923ac73e75b3bf33cdadb603" category="cell">"openshift_imization_storage磁碟區大小"</block>
  <block id="a56c731cfe96d228c7c0bcc57bc80d3d" category="cell">"openshift_imization_cassandra _PVC_prefix"</block>
  <block id="0da919d4045e4f38d294aaec73f5d57f" category="cell">用於度量PVCS的前置詞。</block>
  <block id="15bb3eef0b42a93e324977c289f2fd85" category="cell">"openshift_imization_cassandra _PVC_Size"</block>
  <block id="75929c9d67f1407282b5618fca4589e7" category="cell">要要求的磁碟區大小。</block>
  <block id="8ebb493e0ffdf7c1e850c67bc22f15c7" category="cell">"openshift_imensits_cassandra儲存設備類型"</block>
  <block id="aab0ec84a4da1dfd2b63896453f1e05d" category="cell">用於度量的儲存類型、必須設定為動態、Ansible才能建立具有適當儲存類別的PVCS。</block>
  <block id="460aaf3805271ec2e5dc35755fe317b1" category="cell">"openshift_imization_cassanda_PVC_storage _class_name"</block>
  <block id="0c55ca33e89539cd67eb0be3796547c5" category="cell">要使用的儲存類別名稱。</block>
  <block id="6c13e62eb53f29e7794d3807369299d2" category="section-title">部署度量服務</block>
  <block id="3e75d51468f5a99fdb50b75dafea32e8" category="paragraph">在您的主機/庫存檔案中定義適當的可Ansible變數後、使用Ansible部署服務。如果您是在OpenShift安裝時間進行部署、則會自動建立及使用PV。如果您使用元件教戰手冊進行部署、則在OpenShift安裝之後、Ansible會建立任何需要的PVCS、並在Astra Trident為其配置儲存設備之後、部署該服務。</block>
  <block id="bf1cadd7aa4e541e255df26af5451d85" category="inline-link-macro">RedHat的OpenShift部署指南</block>
  <block id="eb502d6483a644e9b6f61ca4719276d8" category="paragraph">上述變數及部署程序可能會隨OpenShift的每個版本而變更。請務必檢閱並遵循 <block ref="5ad72ffc1eda2c257c8947a0ad66dddb" category="inline-link-macro-rx"></block> 以供您的環境使用。</block>
  <block id="d03f8f06d8317baa619ceba8c71e0be3" category="summary">瞭解NetApp儲存平台提供的資料保護與可恢復性選項。Astra Trident可配置磁碟區、以充分利用其中的部分功能。對於每個應用程式、您都應該擁有完整的資料保護與還原策略、而且需要持續性。</block>
  <block id="7e7397a7b79323762c61941fc0e6b5f9" category="doc">資料保護</block>
  <block id="cfee9077e497a91b77466a20f58fcdff" category="paragraph">瞭解NetApp儲存平台提供的資料保護與可恢復性選項。Astra Trident可配置磁碟區、以充分利用其中的部分功能。對於每個應用程式、您都應該有持續性需求的資料保護與還原策略。</block>
  <block id="058d5afd2ccf1b3be426f9ad27ab2f41" category="section-title">備份etcd叢集資料</block>
  <block id="26beed33bbef26c53a76c2b450d8092c" category="paragraph">Astra Trident將其中繼資料儲存在Kubernetes叢集的「etcd」資料庫中。定期備份「etcd」叢集資料、對於在災難情況下恢復Kubernetes叢集而言、非常重要。</block>
  <block id="6b8252dd799aef1e72351975d4d39231" category="list-text">使用「etcctll snapshot SAVE」命令、您可以擷取「etcd」叢集的時間點快照：</block>
  <block id="54466a78f910aa9c206047e0a2afdae1" category="paragraph">此命令可藉由旋轉etcd容器來建立etcd快照、並將其儲存在「/Backup」目錄中。</block>
  <block id="1475db623f0eaa95e737c3463bae738f" category="list-text">發生災難時、您可以使用etcd快照來啟動Kubernetes叢集。使用「etcctll snapshot還原」命令、還原擷取至「/var/lib/etcd」資料夾的特定快照。還原之後、請確認「/var/lib/etcd」資料夾是否已填入「member」資料夾。以下是「etcdctl snapshot還原」命令的範例：</block>
  <block id="79ddedac8d398dd5b0c07d4319dcc009" category="list-text">初始化Kubernetes叢集之前、請複製所有必要的憑證。</block>
  <block id="bdad273c35514cf4ff054dc686b32002" category="list-text">使用「-ignore預先執行錯誤= DirAvailable」-var-lib-etcd標誌建立叢集。</block>
  <block id="6305ecb03aa7de9ef25f8415e859ea4b" category="list-text">叢集啟動後、請確定已啟動kube系統Pod。</block>
  <block id="8c416419987890cfcc65ea9e92da3cfa" category="list-text">使用「kubectl Get crd」命令來驗證Trident所建立的自訂資源是否存在、並擷取Trident物件、以確保所有資料都可用。</block>
  <block id="e5356885fecc2a90a54498a26b14b810" category="section-title">使用ONTAP 不含資訊的快照來恢復日期</block>
  <block id="c311aef86a7cd24a1d8755988091889b" category="paragraph">快照提供應用程式資料的時間點還原選項、因此扮演著重要角色。不過、快照本身並不是備份、因此無法防止儲存系統故障或其他災難。但是、在大多數情況下、它們都是一種方便、快速且簡單的資料恢復方法。瞭ONTAP 解如何使用「支援資料快照」技術來備份磁碟區、以及如何還原。</block>
  <block id="f0587fe4869074d7cfefe4e8bf02eaeb" category="list-text">如果未在後端定義快照原則、則預設使用「無」原則。如此一ONTAP 來、我們便無法自動擷取快照。不過、儲存管理員可以手動擷取快照、或是透過ONTAP 功能完善的管理介面變更快照原則。這不會影響Trident作業。</block>
  <block id="a5198a3ff669782d450e222946ec0482" category="list-text">Snapshot目錄預設為隱藏。這有助於實現使用「ONTAP-NAS」和「ONTAP-NAS經濟」驅動程式所配置之磁碟區的最大相容性。使用「ONTAP-NAS」和「ONTAP-NAS經濟」驅動程式時、請啟用「.snapshot」目錄、讓應用程式能夠直接從快照中恢復資料。</block>
  <block id="d34d16e8f00776a7cc63851ebd4e9395" category="list-text">使用「Volume Snapshot Restore」ONTAP （Volume Snapshot還原）CLI命令、將磁碟區還原至先前快照中記錄的狀態。還原快照複本時、還原作業會覆寫現有的Volume組態。建立Snapshot複本之後、對磁碟區中資料所做的任何變更都會遺失。</block>
  <block id="3225a41cc13787a78ef89153b870bffe" category="section-title">使用ONTAP 功能複寫資料</block>
  <block id="5bec6ef5bd67015d1da2f04dc2a24b80" category="paragraph">複寫資料對於防止儲存陣列故障所造成的資料遺失、扮演著重要的角色。</block>
  <block id="eb75aeb3b4b2b9734ba3e52f5483f0b2" category="inline-link">本文檔 ONTAP</block>
  <block id="40491088e02d790071b9ddbc3f95f983" category="admonition">如需ONTAP 深入瞭解有關資訊複寫技術的資訊、請參閱<block ref="dd7cb2553dd5eb568b9a23ce332fc9a4" category="inline-link-rx"></block>。</block>
  <block id="541959f741a3180066a37aee2adf7d01" category="section-title">SnapMirror儲存虛擬機器（SVM）複寫</block>
  <block id="794cb725c5631ad99b5b7c000307f0df" category="inline-link">SnapMirror</block>
  <block id="15bf9c06ed0c503c4ee904bf4b3a85a9" category="paragraph">您可以使用<block ref="a2a4907c93db22784422a1bc7047ac73" category="inline-link-rx"></block> 複寫完整的SVM、其中包括其組態設定及其磁碟區。發生災難時、您可以啟動SnapMirror目的地SVM、開始提供資料服務。還原系統時、您可以切換回主要系統。</block>
  <block id="8657190fa7a98fbc200c5c90a08cac65" category="paragraph">Astra Trident無法自行設定複寫關係、因此儲存管理員可以使用ONTAP的SnapMirror SVM複寫功能、將磁碟區自動複寫到災難恢復（DR）目的地。</block>
  <block id="bdb161b363522f5fc614f70c10792020" category="paragraph">如果您打算使用SnapMirror SVM複寫功能、或是目前正在使用此功能、請考慮下列事項：</block>
  <block id="34fb9af35ab36a2cead16ad98b140441" category="list-text">您應該為每個啟用SVM災難恢復的SVM建立不同的後端。</block>
  <block id="1c0b44a5294fd1ebbc8e78476cf29358" category="list-text">您應該設定儲存類別、以便在需要時、不要選取複寫的後端。這一點非常重要、因為如此一來、您就不必將不需要保護複寫關係的磁碟區配置到支援SVM-DR的後端。</block>
  <block id="21f180602301e7ac5b6cce6b6b7399e9" category="list-text">應用程式管理員應瞭解複寫資料所需的額外成本與複雜度、並在使用資料複寫之前、先決定恢復計畫。</block>
  <block id="59b50d3d22a40bf39d0e648e2d49092c" category="list-text">啟動SnapMirror目的地SVM之前、請先停止所有排程的SnapMirror傳輸、中止所有進行中的SnapMirror傳輸、中斷複寫關係、停止來源SVM、然後啟動SnapMirror目的地SVM。</block>
  <block id="7cf7bfd0b57a375894c362efd521d4a6" category="list-text">Astra Trident不會自動偵測SVM故障。因此，當發生故障時，系統管理員應該執行「tridentctl後端更新」命令，以觸發Trident的容錯移轉到新的後端。</block>
  <block id="1904adbabdda29d7a5ab43352f36c6ed" category="paragraph">以下是SVM設定步驟的總覽：</block>
  <block id="3c2f5fc4909af1c1359e564eb6db48b0" category="list-text">在來源與目的地叢集與SVM之間設定對等關係。</block>
  <block id="3b1329fc73441b5a106271d6f3497f1e" category="list-text">使用「副類型DP目的地」選項建立目的地SVM。</block>
  <block id="2ce677015d60734da686668ee7962dd0" category="list-text">建立複寫工作排程、以確保複寫會在所需的時間間隔執行。</block>
  <block id="e9eeea68d62192550b641463a212f6f7" category="list-text">使用「idente-preserve true」選項、建立從目的地SVM到來源SVM的SnapMirror複寫、以確保來源SVM組態和來源SVM介面複製到目的地。從目的地SVM初始化SnapMirror SVM複寫關係。</block>
  <block id="fb45980442af5aaba98c4d47ae4d3bfd" category="image-alt">顯示設定SVM所需的步驟。</block>
  <block id="1e4e7c145198bb50a238b75b451a761f" category="section-title">Trident的災難恢復工作流程</block>
  <block id="b955e2b8063ba57e27a4ab2b5317f40c" category="paragraph">Astra Trident 19.07及更新版本使用Kubernetes CRD來儲存及管理自己的狀態。它使用Kubernetes叢集的「etcd」來儲存中繼資料。我們假設Kubernetes的「etcd」資料檔案和憑證都儲存在NetApp FlexVolume上。此FlexVolume位於SVM中、與次要站台的目的地SVM有SnapMirror SVM-DR關係。</block>
  <block id="cc457da166ae89d5689724340cb13732" category="paragraph">下列步驟說明如何在發生災難時、使用Astra Trident來還原單一主Kubernetes叢集：</block>
  <block id="53ac5e7226086e14e63a8c160480dc72" category="list-text">如果來源SVM故障、請啟動SnapMirror目的地SVM。為達成此目的、您應該停止排程的SnapMirror傳輸、中止進行中的SnapMirror傳輸、中斷複寫關係、停止來源SVM、以及啟動目的地SVM。</block>
  <block id="2e22b90c5468159621965197ed565e28" category="list-text">從目的地SVM、將包含Kubernetes「etcd」資料檔案和憑證的磁碟區掛載到主機上、主機將設定為主節點。</block>
  <block id="40d502a83976e38daa5473f7aa22abae" category="list-text">複製所有必要的Kubernetes叢集憑證、這些憑證位於「/etc/Kubernetes /PKI」下、而etcd「m十二」檔案則位於「/var/lib/etcd」下。</block>
  <block id="ca8fc386b365ae9b5a3b4bbadae7d7f3" category="list-text">使用帶有「-ignore preflas-errors = DirAvailable - var-lib-etcd」旗標的「kubeadm init」命令建立Kubernetes叢集。Kubernetes節點使用的主機名稱應與來源Kubernetes叢集相同。</block>
  <block id="e0e99766128c0aba0f0aa6c04f32348c" category="list-text">執行「kubectl Get crd」命令、確認所有Trident自訂資源是否都已啟動並擷取Trident物件、以驗證所有資料是否可用。</block>
  <block id="5a869093fda46649157b8eb12219a2f2" category="list-text">執行「/tridentctl update backend &lt;backend-name&gt;-f &lt;backend-jser-file&gt;-n &lt;namedes&gt;'命令、更新所有必要的後端、以反映新的目的地SVM名稱。</block>
  <block id="dbd1e2ae426afc58b4818d42ea354b74" category="admonition">對於應用程式持續磁碟區、當目的地SVM啟動時、Trident所配置的所有磁碟區都會開始提供資料。使用上述步驟在目的地端設定Kubernetes叢集之後、所有的部署和Pod都會啟動、而且容器化應用程式應該能順利執行、不會發生任何問題。</block>
  <block id="d384359ca03c8d46191c719c57744679" category="section-title">SnapMirror Volume複寫</block>
  <block id="118fa9a7e0f8d0db1e27394b81880427" category="paragraph">SnapMirror Volume複寫是一項災難恢復功能、可從Volume層級的主要儲存設備進行容錯移轉至目的地儲存設備。ONTAPSnapMirror透過同步快照、在次要儲存設備上建立主要儲存設備的Volume複本或鏡射。</block>
  <block id="19f60a36276037e5b82b5096d2ba7a5c" category="paragraph">以下是ONTAP 關於SnapMirror Volume複寫設定步驟的總覽：</block>
  <block id="c4e9d0a10c58301ad78e9e9bf74f9229" category="list-text">在磁碟區所在的叢集與從磁碟區提供資料的SVM之間設定對等關係。</block>
  <block id="b1c132fa6284fd6d42f93781032cd962" category="list-text">建立SnapMirror原則、以控制關係的行為、並指定該關係的組態屬性。</block>
  <block id="d9934e78a9254dde4a227181c30fa2d2" category="inline-link">命令napmirror create</block>
  <block id="0a30bcd5b223c18be449821765a8ec07" category="list-text">使用建立目的地Volume與來源Volume之間的SnapMirror關係<block ref="bfbfdbcdb00ddafcc3e3ca740d1d316b" category="inline-link-rx"></block> 並指派適當的SnapMirror原則。</block>
  <block id="20872623d19783e0dbe00afcdcb9ba46" category="list-text">建立SnapMirror關係之後、請初始化關係、以便完成從來源磁碟區到目的地磁碟區的基礎傳輸。</block>
  <block id="af1fe101ed84f2b2bc465f0a9e92a35f" category="image-alt">顯示SnapMirror Volume複寫設定。</block>
  <block id="1d3ec4cce0f34c07e814ebbd88f5edd8" category="section-title">適用於Trident的SnapMirror Volume災難恢復工作流程</block>
  <block id="83e05258883cd6b92e2fe5b113f1ebc6" category="paragraph">下列步驟說明如何使用Astra Trident來復原單一主Kubernetes叢集。</block>
  <block id="b950aff3484c4c998d3b7a36ff1d6553" category="list-text">發生災難時、請停止所有排程的SnapMirror傳輸、並中止所有進行中的SnapMirror傳輸。中斷目的地與來源磁碟區之間的複寫關係、使目的地磁碟區變成讀取/寫入。</block>
  <block id="521637d2f234b6223688c168d29f6b72" category="list-text">從目的地SVM、將包含Kubernetes「etcd」資料檔案和憑證的磁碟區掛載到主機上、主機將設定為主節點。</block>
  <block id="d911c905c09c9615d35c97f404dd2884" category="list-text">使用帶有"-ignore preflas-errors = DirAvailable - var-lib-etcd"標記的"kubeadm init"命令來建立Kubernetes叢集。主機名稱應與來源Kubernetes叢集相同。</block>
  <block id="4b4d4e6a1634d2560e81a9a1821e2818" category="list-text">執行「kubectl Get crd」命令、確認所有Trident自訂資源是否都已啟動並擷取Trident物件、以確保所有資料都可用。</block>
  <block id="4f04020fc477f4ade26e46ae0ba44688" category="list-text">清理先前的後端、並在Trident上建立新的後端。指定目的地SVM的新管理與資料LIF、新SVM名稱及密碼。</block>
  <block id="f4a5d35c2f46c3a6ee69fd6aa2d1ed16" category="section-title">應用程式持續磁碟區的災難恢復工作流程</block>
  <block id="77983829e737f00a29b43edacbba355e" category="paragraph">下列步驟說明在發生災難時、如何為容器化工作負載提供SnapMirror目的地磁碟區：</block>
  <block id="aefd7239e178b3ae439ae7004435bd18" category="list-text">停止所有排程的SnapMirror傳輸、並中止所有進行中的SnapMirror傳輸。中斷目的地與來源磁碟區之間的複寫關係、使目的地磁碟區變成讀取/寫入。清除使用與來源SVM上磁碟區連結之PVc的部署。</block>
  <block id="c64f364f814f31948e0882b74d5ddfe1" category="list-text">使用上述步驟在目的地端設定Kubernetes叢集之後、請從Kubernetes叢集清除部署、PVCS和PV。</block>
  <block id="6973ba748ea89f06ab3640118969d780" category="list-text">指定新的管理與資料LIF、新的SVM名稱和目的地SVM密碼、在Trident上建立新的後端。</block>
  <block id="1fd415590fff525d8e3562951ed79081" category="list-text">使用「Trident匯入」功能、將所需的磁碟區匯入為與新的PVc繫結的PV。</block>
  <block id="99a01026c124f91b08d854efa31d450b" category="list-text">使用新建立的PVCS重新部署應用程式部署。</block>
  <block id="7a183359334a99fc80b796244313284c" category="section-title">使用元素快照來恢復資料</block>
  <block id="2d51cea50aa816e6be9c663c2ad2686a" category="paragraph">設定磁碟區的快照排程、並確保每隔一段時間擷取快照、以備份元素磁碟區上的資料。您應該使用元素UI或API來設定快照排程。目前無法透過「Poolidfire - san」驅動程式、將快照排程設定為磁碟區。</block>
  <block id="c42cc84c1560600f6f5986a958de0735" category="paragraph">在資料毀損的情況下、您可以使用元素UI或API、選擇特定的快照、然後手動將磁碟區復原至快照。這會還原自建立快照以來對磁碟區所做的任何變更。</block>
  <block id="d59b86d1714966230da7a00672e40912" category="summary">請使用此處列出的建議、確保您的Astra Trident安裝安全無虞。</block>
  <block id="2fae32629d4ef4fc6341f1751b405e45" category="doc">安全性</block>
  <block id="44a736677691eaca5e5d3d6b5c770b22" category="section-title">在自己的命名空間中執行Astra Trident</block>
  <block id="347d4c35796a862cf20cdcdebfe59e57" category="paragraph">防止應用程式、應用程式管理員、使用者及管理應用程式存取Astra Trident物件定義或Pod、以確保可靠的儲存並封鎖潛在的惡意活動、這一點非常重要。</block>
  <block id="47d7f9fac441e60d9523d256d02aa8ba" category="paragraph">若要將其他應用程式和使用者與Astra Trident區隔開、請務必在Kubernetes命名空間（「trident」）中安裝Astra Trident。將Astra Trident放在自己的命名空間中、可確保只有Kubernetes管理人員能夠存取Astra Trident Pod、以及儲存在命名式CRD物件中的成品（例如後端和CHAP機密）。您應該確保只允許系統管理員存取Astra Trident命名空間、進而存取「tridentctl」應用程式。</block>
  <block id="f40aef657c875e42158050f63dcfbb6f" category="section-title">使用CHAP驗證搭配ONTAP 使用支援SAN的功能</block>
  <block id="2738c60dc60977d9eb6af2bf2a98c193" category="paragraph">Astra Trident支援ONTAP 以CHAP為基礎的驗證功能、適用於各種SAN工作負載（使用「ONTAP-SAN」和「ONTAP-san經濟」驅動程式）。NetApp建議使用雙向CHAP搭配Astra Trident進行主機與儲存後端之間的驗證。</block>
  <block id="c34904efabe33827baaa88ebf031ffab" category="paragraph">針對使用SAN儲存驅動程式的幕後作業、Astra Trident可設定雙向CHAP、並透過「tridentctl」管理CHAP使用者名稱和機密。ONTAP請參閱 <block ref="eda040c33c51e3cee067cf2f06789687" category="inline-link-macro-rx"></block> 瞭解Astra Trident如何在ONTAP 不景點上設定CHAP。</block>
  <block id="97f83fd51c89f4f9d3fc271b9f7291ab" category="admonition">Trident 20.04及更新版本提供對支援不支援的CHAP ONTAP 。</block>
  <block id="d4e0ad8fd8e11d87eb431051692db344" category="section-title">使用CHAP驗證NetApp HCI 搭配不景和SolidFire 不景的後端</block>
  <block id="b6a8ac29724d88dfaec657edda424d98" category="paragraph">NetApp建議部署雙向CHAP、以確保主機與NetApp HCI 支援功能及SolidFire 支援功能之間的驗證。Astra Trident使用每個租戶包含兩個CHAP密碼的秘密物件。當Trident安裝為「csi佈建程式」時、它會管理CHAP機密、並將其儲存在個別PV的「tridentvolume」（Tridentvolume）CR物件中。建立PV時、「csi Astra Trident」會使用CHAP機密來啟動iSCSI工作階段、NetApp HCI 並透過CHAP與該系統進行通訊SolidFire 。</block>
  <block id="19cde2e69238c98382d677e2583cbc46" category="admonition">由csi Trident建立的磁碟區不會與任何Volume存取群組相關聯。</block>
  <block id="3179d8563cd49690a141c34c045dfab8" category="paragraph">在非csi前端中、磁碟區作為工作節點上的裝置附加作業是由Kubernetes處理。建立磁碟區之後、Astra Trident會呼叫NetApp HCI / SolidFire系統、以便在該租戶的機密資訊尚未存在時擷取機密資訊。然後、Astra Trident將機密傳給Kubernetes。位於每個節點上的Kubelet可透過Kubernetes API存取機密資料、並使用它們在存取磁碟區的每個節點與磁碟區所在的NetApp HCI / SolidFire系統之間執行/啟用CHAP。</block>
  <block id="34c4dac14496e9c45d92f345d9392fc8" category="summary">如果您未執行最新版本、則可取得舊版Astra Trident的文件。</block>
  <block id="ba09ee47d11962c1ccd13d7e1f10e6c5" category="doc">較早版本的文件</block>
  <block id="485e8e209b502a7975830960817b875e" category="paragraph">如果您未執行Astra Trident 22.04、則可取得先前版本的文件。</block>
  <block id="9f687b4e8cbf2fbb623b26b30fd92717" category="admonition">若為21：07之前的版本、您將被重新導向至舊版文件網站。</block>
  <block id="4af8991c21dff2f779496b8350d1124b" category="inline-link">Astra Trident 22.01</block>
  <block id="7669b0b69333e81c7c208aea3d1a3c6f" category="list-text"><block ref="7669b0b69333e81c7c208aea3d1a3c6f" category="inline-link-rx"></block></block>
  <block id="cce172403b73af5c2a4e93081affcc7f" category="inline-link">Astra Trident 21.10</block>
  <block id="606b9e83fb467a43b3065d4fd5037094" category="list-text"><block ref="606b9e83fb467a43b3065d4fd5037094" category="inline-link-rx"></block></block>
  <block id="a93e9e44b7a375a4236260f5ff2b251e" category="inline-link">Astra Trident 21.07</block>
  <block id="3830d427e146a8a64454dc373d9b1502" category="list-text"><block ref="3830d427e146a8a64454dc373d9b1502" category="inline-link-rx"></block></block>
  <block id="0c141ec81d4107f4c63fb0deb2531c0d" category="inline-link">Astra Trident 21.04.</block>
  <block id="193bfae1ebda99fb7289c66fa69395a0" category="list-text"><block ref="193bfae1ebda99fb7289c66fa69395a0" category="inline-link-rx"></block></block>
  <block id="cba2c660d905f83e39a0d1771286c9e7" category="inline-link">Astra Trident 21.01.</block>
  <block id="97f32ab1a5165dc49105dca53b9f4de7" category="list-text"><block ref="97f32ab1a5165dc49105dca53b9f4de7" category="inline-link-rx"></block></block>
  <block id="727d2d1e15a5c7260e90c50b1c250a4c" category="inline-link">Astra Trident 20.10</block>
  <block id="8a0315074645cbbab67a7445dcdf42f2" category="list-text"><block ref="8a0315074645cbbab67a7445dcdf42f2" category="inline-link-rx"></block></block>
  <block id="bad2b8fa41c05085668e48d7c14968dc" category="inline-link">Astra Trident 20.07</block>
  <block id="449d7e957347de63ee3d9841c40b4e7f" category="list-text"><block ref="449d7e957347de63ee3d9841c40b4e7f" category="inline-link-rx"></block></block>
  <block id="7c0a09ca9ea4472728e4661755a43c6b" category="inline-link">Astra Trident 20.04</block>
  <block id="8a72b28486832ed8c725617460afbdcb" category="list-text"><block ref="8a72b28486832ed8c725617460afbdcb" category="inline-link-rx"></block></block>
  <block id="1dc5429c6c86712d7628beb5652a0e2e" category="inline-link">Astra Trident 20.01</block>
  <block id="23204facdc38bad335a6afce81db0827" category="list-text"><block ref="23204facdc38bad335a6afce81db0827" category="inline-link-rx"></block></block>
  <block id="5b2d210bf907d26b59abbaa0e22fbbe6" category="inline-link">Astra Trident 19.10</block>
  <block id="3377906a52734323c44c8f31b2d29e63" category="list-text"><block ref="3377906a52734323c44c8f31b2d29e63" category="inline-link-rx"></block></block>
  <block id="f1d7fe87216a18ff3ffcfa98d6065689" category="inline-link">Astra Trident 19.07</block>
  <block id="12e29d431cea2700aa9d89e0c89e67bc" category="list-text"><block ref="12e29d431cea2700aa9d89e0c89e67bc" category="inline-link-rx"></block></block>
  <block id="fe4bdabecc64b786523a3d86bb1f9cfd" category="inline-link">Astra Trident 19.04</block>
  <block id="e43783d5a51a10670edf444f0b58b6af" category="list-text"><block ref="e43783d5a51a10670edf444f0b58b6af" category="inline-link-rx"></block></block>
  <block id="5e152ff33f3262612abc4b942db27ad1" category="inline-link">Astra Trident 19.01</block>
  <block id="977636e26059252def0425dca74811ef" category="list-text"><block ref="977636e26059252def0425dca74811ef" category="inline-link-rx"></block></block>
  <block id="dec54888538ac86f51d29a3d043e6bf6" category="summary">您可以使用業者輕鬆升級現有的Astra Trident安裝。</block>
  <block id="5ff3faebb0ff710340bdbee89a4667ad" category="doc">與營運者一起升級</block>
  <block id="056b6e39cb1ae24d946674f95697989a" category="paragraph">您可以使用業者輕鬆升級現有的Astra Trident安裝。</block>
  <block id="b8ce48f9165ac0cead930cd72b36b5ac" category="paragraph">若要使用營運者進行升級、應符合下列條件：</block>
  <block id="933c98c07c43994c690a4d57fff2fd1f" category="list-text">您應該安裝以「服務整合式」為基礎的Astra Trident。若要檢查您是否正在執行csi Trident、請檢查Trident命名空間中的Pod。如果他們遵循「Trident - csi*」命名模式、您就會執行「csi Trident」。</block>
  <block id="b53958f3b6708eb5412679540db1febc" category="list-text">您應該安裝CRD型Trident。這代表19.07及更新版本的所有版本。如果您安裝的是基於SCSI的安裝、則很可能是以CRD為基礎的安裝。</block>
  <block id="ba45a58fb6371fc5a91fb8a5d399becd" category="list-text">如果您已解除安裝了「csi Trident」、而且安裝中的中繼資料持續存在、您可以使用操作者進行升級。</block>
  <block id="33deedceb6eaeb2f124b7ce830e212a8" category="list-text">在特定Kubernetes叢集中的所有命名空間中、只應有一個Astra Trident安裝。</block>
  <block id="f6c44c912e06b8221085c219600c6387" category="inline-link-macro">1.17版及更新版本</block>
  <block id="0805928cc4c4b801e682a6cd2006e692" category="list-text">您應該使用執行的Kubernetes叢集 <block ref="b1e96583006584730c41f3baa3725240" category="inline-link-macro-rx"></block>。</block>
  <block id="093e1971a4b17fce7e3e4d94854a46ba" category="list-text">如果存在Alpha Snapshot CRD、您應該使用「tridentctl obliviate alpha-snapshot -crd」來移除。這會刪除Alpha Snapshot規格的客戶需求日。如需應刪除/移轉的現有快照、請參閱<block ref="ddf3864130a7be37c683b2fe21303201" category="inline-link-rx"></block>。</block>
  <block id="199ed8c975e8bb544d18428ba17adbc3" category="inline-link">GitHub問題詳細資料</block>
  <block id="398b69b685d2969c9e5d2f8cfbff3972" category="admonition">使用OpenShift Container Platform上的運算子來升級Trident時、您應該升級至Trident 21.01.1或更新版本。隨21.01.0一起發行的Trident運算子包含已在21.01.1中修正的已知問題。如需詳細資訊、請參閱<block ref="bcebcdd21adcbb3d7c640d63a711c6fb" category="inline-link-rx"></block>。</block>
  <block id="2f6881ec6a84d1ac9ef2e551f3ca8466" category="section-title">升級叢集範圍內的操作員安裝</block>
  <block id="532223fc600c8862511462ff30738c55" category="paragraph">若要從* Trident 21.01*及更新版本*升級、請依照下列步驟進行。</block>
  <block id="238e63aecc23c1bc2611ca883f075f1f" category="list-text">刪除用來安裝目前Astra Trident執行個體的Trident運算子。例如、如果您要從21.01升級、請執行下列命令：</block>
  <block id="d10c9260fe9a1660c2f75dddda0220e4" category="list-text">（選用）如果您想要修改安裝參數、請編輯您在安裝Trident時所建立的「TridentOrchestrator」物件。這可能包括修改自訂Trident映像、從私有映像登錄擷取容器映像、啟用偵錯記錄或指定映像提取機密等變更。</block>
  <block id="09b615e18699c6675b3705c00a495375" category="list-text">使用「bunder.yaml」檔案來安裝Astra Trident、該檔案可設定新版本的Trident運算子。執行下列命令：</block>
  <block id="4546bbd46f06879787b5670b13277b28" category="paragraph">在此步驟中、21.10.0 Trident營運者將識別現有的Astra Trident安裝、並將其升級至與營運者相同的版本。</block>
  <block id="d06b5297af318d2581021098f6b0d44d" category="section-title">升級命名空間範圍內的操作員安裝</block>
  <block id="ddfa75d059a999aedec16392aae03bc4" category="paragraph">若要從使用命名空間範圍運算子（20.07到20.10版）安裝的Astra Trident執行個體進行升級、請遵循下列步驟：</block>
  <block id="edf5c542759186ded2c7eeaae6b340a5" category="list-text">確認現有Trident安裝的狀態。要執行此操作、請查看「TridentProvisioner」的*狀態*。狀態應為「Installed」（已安裝）。</block>
  <block id="f14a1d8e56a0cbd2826edd38778371f7" category="admonition">如果狀態顯示「正在更新」、請務必先解決、再繼續。如需可能狀態值的清單、請參閱<block ref="6aefd1c9ce8e43313a8c7c92e2fac4f3" category="inline-link-rx"></block>。</block>
  <block id="683d018a2f7c70469fd74ba0eeae2a79" category="list-text">使用Trident安裝程式提供的資訊清單、建立「TridentOrchestrator」CRD。</block>
  <block id="ede3d39a1c5211985b126b3f166cf601" category="inline-link">Trident儲存庫</block>
  <block id="af39f09efb6e7b7133433dff92d0fffe" category="list-text">使用命名空間範圍的運算子資訊清單來刪除。若要完成此步驟、您需要使用「bunder.yaml」檔案來部署命名空間範圍的運算子。您可以從取得「bunder.yaml」<block ref="1403b813895a8a78c447fca96240f2ac" category="inline-link-rx"></block>。請務必使用適當的分行。</block>
  <block id="5451265740f1553dff7af7814faa5277" category="inline-link-macro">參數清單</block>
  <block id="8afea862003d4f613fcffecc022fb20c" category="admonition">刪除命名空間範圍的運算子之後、在安裝叢集範圍的運算子之前、您應該對Trident安裝參數進行必要的變更（例如、變更「tridentImage」、「autosupportImage」、「Private Image儲存庫」的值、以及提供「imagepolSecrets」）。如需可更新的完整參數清單、請參閱 <block ref="e5ef433069537d0999d9cf3f906affdb" category="inline-link-macro-rx"></block>。</block>
  <block id="5fbede7820945c99130183fd2fd0f4b3" category="paragraph">在這個階段、「Trident - oper-xxxxxx-xxxxx" pod會刪除。</block>
  <block id="86463d362af5835ff8c3fd6587fbd24f" category="list-text">（選用）如果需要修改安裝參數、請更新「TridentProvisioner」規格。這些變更可能包括：修改私有映像登錄以從擷取容器映像、啟用偵錯記錄或指定映像提取機密。</block>
  <block id="df486b34cec5fdfba24de79fe6b388d4" category="list-text">安裝叢集範圍的運算子。</block>
  <block id="d5eded1a43812da779b35ffbffedf46b" category="admonition">安裝叢集範圍的運算子會將「TridentProvisioner」物件移轉至「TridentOrchestrator」物件、刪除「TridentProvisioner」物件和「Trident置 備程式」CRD、並將Astra Trident升級至所使用的叢集範圍運算子版本。在接下來的範例中、Trident已升級至21.07.1。</block>
  <block id="cb84f171610775cc6f9d39511d6acee9" category="admonition">使用叢集範圍的運算子來升級Astra Trident、會將「TridentProvisioner」移轉至名稱相同的「tridentOrchestrator」物件。這會由操作員自動處理。升級也會將Astra Trident安裝在與之前相同的命名空間中。</block>
  <block id="61d74cfa0c3f53abef0b4694fba0522f" category="section-title">升級Helm型的營運者安裝</block>
  <block id="7734dd866cc8c135256bad90520fa719" category="paragraph">請執行下列步驟、升級Helm型的操作員安裝。</block>
  <block id="3002cfcea36b7fb4d87da4d413730851" category="list-text">下載最新的Astra Trident版本。</block>
  <block id="2171a3791b6ac570c7910a5d1d7f4d89" category="list-text">使用「helm升級」命令。請參閱下列範例：</block>
  <block id="00bca5f1181617a563b71b78a27434d0" category="paragraph">其中「trident操作者-21.07.1.tgz」代表您要升級的版本。</block>
  <block id="1869e61179995eed8692bfc705434d2b" category="list-text">執行「helm清單」、確認圖表和應用程式版本都已升級。</block>
  <block id="1d0b5ffc29a6dba36314ccbba6a46038" category="admonition">若要在升級期間傳遞組態資料、請使用「-set」。</block>
  <block id="4a6b869a481b52472aa62cfa4d9d255e" category="paragraph">例如、若要變更預設值「tridentDebug」、請執行下列命令：</block>
  <block id="6b30e95bff9143b45494dd9486e9515d" category="paragraph">如果您執行「$ tridentctl logs」、就會看到偵錯訊息。</block>
  <block id="ad00f75f90e86259efc5e8512fe4c23a" category="admonition">如果您在初始安裝期間設定任何非預設選項、請確定升級命令中已包含這些選項、否則這些值將會重設為預設值。</block>
  <block id="5c83dd886f5edc620e809e7800bc225f" category="section-title">從非營運者安裝升級</block>
  <block id="69f43f0aadf9091408f80d6d1e0fdd45" category="paragraph">如果您有符合上述先決條件的「SCSI Trident」執行個體、您可以升級至Trident運算子的最新版本。</block>
  <block id="4ab464bddccdcbc36fab4cea802025f9" category="list-text">從資訊清單建立「TridentOrchestrator」CRD。</block>
  <block id="835fd860290737b70acf870a253c3549" category="list-text">部署營運者。</block>
  <block id="06da281bf5e01c3c59892dc886cd0067" category="list-text">建立「TridentOrchestrator」、以安裝Astra Trident。</block>
  <block id="f420eb91a420c03f1792a6504b30277b" category="paragraph">現有的後端和PVCS會自動提供使用。</block>
  <block id="3a90bea856daf0616bcbdde1b9d9ad0b" category="summary">視Astra Trident的安裝方式而定、有多種選項可供您解除安裝。</block>
  <block id="43f17763173fe230bdd78477152f5f7d" category="doc">解除安裝Astra Trident</block>
  <block id="bdcf993f8f3d91925d60754cd864f3c0" category="section-title">使用Helm解除安裝</block>
  <block id="8656f6a3d04342ff6248bd7d32949c2a" category="paragraph">如果您使用Helm安裝Astra Trident、您可以使用「helm uninstall」來解除安裝。</block>
  <block id="e2a3593a8e9900eadda10d47bc2ff47c" category="section-title">使用Trident運算子解除安裝</block>
  <block id="c416a70504ae36e8cfbf555ad0d13ab9" category="paragraph">如果您使用運算子安裝了Astra Trident、您可以執行下列其中一項來解除安裝：</block>
  <block id="1159b3a6f6975215eaff7b18f9fdbe8e" category="list-text">要設定解除安裝旗標、請編輯「TridentOrchestrator」：*您可以編輯「TridentOrchestrator」、然後設定「s.pec.uninstall=true」。編輯「TridentOrchestrator」CR、並設定「uninstall」旗標、如下所示：</block>
  <block id="245e84de93b9b41f643f9e737c17e702" category="paragraph">當「uninstall」旗標設定為「true」時、Trident操作者會解除安裝Trident、但不會移除TridentOrchestrator本身。如果您想要再次安裝Trident、請清理TridentOrchestrator並建立新的Trident。</block>
  <block id="a5e00cb8c456b8892f7af2349fe6e10a" category="list-text">*刪除「TridentOrchestrator」：*移除用來部署Astra Trident的「TridentOrchestrator」、您就會指示操作員解除安裝Trident。營運者會處理刪除「TridentOrchestrator」的程序、並繼續移除Astra Trident部署和取消安裝、刪除其在安裝過程中建立的Trident Pod。若要完全移除Astra Trident（包括它所建立的CRD）、並有效清除Slate Clean、您可以編輯「TridentOrchestrator」來通過「wipeout」選項。請參閱下列範例：</block>
  <block id="8aaaff274ba10c527c6bf8facd1c9092" category="paragraph">這會完全解除安裝Astra Trident、並清除所有與後端及其管理的磁碟區相關的中繼資料。後續安裝會視為全新安裝。</block>
  <block id="1f119048e6c0b2f219b28b7efae30285" category="admonition">執行完整解除安裝時、您只能考慮抹除客戶需求日。此動作無法復原。*除非您想要重新開始並建立全新的Astra Trident安裝、否則請勿清除客戶需求日*。</block>
  <block id="ed116003561aef0bea77cb4c5f6fe418" category="section-title">使用tridentctl解除安裝</block>
  <block id="20402206432f6b6e75899e8f585ae984" category="paragraph">執行「tridentctl」中的「uninstall」命令、移除所有與Astra Trident相關的資源、但CRD和相關物件除外、因此可輕鬆再次執行安裝程式、以更新至較新的版本。</block>
  <block id="1b600643682d5a3280681ef82d7e6ae4" category="paragraph">若要完整移除Astra Trident、您應移除由Astra Trident所建立之CRD的微調工具、然後刪除CRD。</block>
  <block id="3bda6d3452a50ffddd40bb74b05d6c50" category="summary">Astra Trident依照每季發行時段進行、每一日曆年發行四個主要版本。每個新版本均以舊版為基礎、提供新功能與效能增強功能、以及錯誤修正與改善功能。我們建議您每年至少升級一次、以善用Astra Trident的新功能。</block>
  <block id="3386987a97643481040e99019808e020" category="doc">升級Astra Trident</block>
  <block id="66bc438a5af66629e5b414e233cb5834" category="admonition">若要升級至未來五個版本的版本、您必須執行多步驟升級。</block>
  <block id="d442f21894fbfe232b6d52b52a10ec35" category="section-title">判斷要升級的版本</block>
  <block id="fd6a74b5e363eaa218988afd6ae5140b" category="list-text">您可以從「yY-1.MM」版本和任何中間版本升級至「y.MM」版本。例如、您可以直接從19.07或更新版本升級至20.07（包括點版本、例如19.07.1）。</block>
  <block id="daf61148013081df2c82930a3a46feb6" category="list-text">如果您有較早的版本、應該執行多步驟升級。這需要您先升級至最新版本、以符合您的四個版本。例如、如果您執行的是18.07、想要升級至20.07版本、請依照下列指示執行多步驟升級程序：</block>
  <block id="6ed2af44865aa9f6dddcebd57d996cf1" category="list-text">第一次從18.07升級至19.07。請參閱個別版本的文件、以取得升級的特定指示。</block>
  <block id="ff115c7087db60c699cccdb21f39ea66" category="list-text">然後從19.07升級至20.07。</block>
  <block id="8d66ed6671344ec6017707c38250329c" category="admonition">所有19.04版及更早版本的升級、都需要將Astra Trident的中繼資料從自己的「etcd」移轉至CRD物件。請務必查看版本文件、瞭解升級的運作方式。</block>
  <block id="33966eba1ed0cde6afda5a97ffaffb09" category="inline-link">安全性內容</block>
  <block id="ceb268093ddd5aa9df1769eda5d1c8cd" category="inline-link">範例輸入</block>
  <block id="9d267d893296d1b56789c03ad196afc8" category="inline-link">「torage-class-base.yaml.templl」</block>
  <block id="4e4578e23d9d48bd9338b1581f884392" category="inline-link">"torage-class-bone-default.yaml"</block>
  <block id="1ca02e26ff81cefae18a0a8d994ca94a" category="admonition">升級時、務必在Astra Trident使用的「torageClasses」中提供「參數.FSType」。您可以刪除並重新建立「儲存類別」、而不會中斷現有的磁碟區。這是強制實施的一項**要求<block ref="cafe4c6014d8c45aaac70e49318f1a2a" category="inline-link-rx"></block> 適用於SAN磁碟區。。<block ref="25daec0b57549a6ad43dbc62a9e717ca" category="inline-link-rx"></block> 目錄包含範例、例如<block ref="d308f4d12b21bf269d64643e1eceeeb2" category="inline-link-rx"></block> 和<block ref="b6ff3ec2ac914a047085c08d5843e316" category="inline-link-rx"></block>。如需詳細資訊、請參閱 <block ref="139a59f2208174d2bf825b80dc580275" category="inline-link-macro-rx"></block>。</block>
  <block id="17cfb8bd7f378fa26b63ee73d467cb82" category="section-title">我應該選擇哪種升級途徑？</block>
  <block id="46940159293e259bcf0bb4df75448100" category="paragraph">您可以使用下列其中一種方法來升級：</block>
  <block id="dc1a9a8ad35cc8aa946e0a2e3f959e2b" category="list-text">使用Trident運算子。</block>
  <block id="4b78e512c67306c61715208417a1cfd7" category="list-text">使用「tridentctl」。</block>
  <block id="756bc985c24584ee6c7338b28f771da8" category="admonition">現在、自Kubernetes 1.20開始、「csi Volume Snapshot」就是GA的一項功能。升級Astra Trident時、必須先移除所有先前的Alpha Snapshot CRS和CRD（Volume Snapshot類別、Volume Snapshot和Volume Snapshot內容）、才能執行升級。請參閱<block ref="ddf3864130a7be37c683b2fe21303201" category="inline-link-rx"></block> 瞭解將Alpha快照移轉至測試版/GA規格所需的步驟。</block>
  <block id="6958a3036b19c13782ecd0024d772b5f" category="paragraph">如果符合下列條件、您可以使用Trident運算子進行升級：</block>
  <block id="9f5cdec8485f67ded88c50f021a562e1" category="list-text">您執行的是「csi Trident」（19.07及更新版本）。</block>
  <block id="e682693c5c270204af79541caa0e63ba" category="list-text">您有一個CRD型Trident版本（19.07及更新版本）。</block>
  <block id="4a0e21a0d69199588534154f29f4af94" category="list-text">您正在執行自訂安裝（使用自訂YAML）。</block>
  <block id="3814df1eaf856112f1f0b22f7f0600e5" category="admonition">如果您使用的是以「etcd」為基礎的Trident版本（19.04或更早版本）、請勿使用運算子來升級Trident。</block>
  <block id="773f6f7f15c751e861d5494e4d510675" category="paragraph">如果您不想使用操作員、或是擁有操作員無法支援的自訂安裝、您可以使用「tridentctl」進行升級。這是Trident 19.04及更早版本的首選升級方法。</block>
  <block id="152a676ac450f5b96a35605dde352607" category="section-title">操作員變更</block>
  <block id="fc7e892a21e797d0592360430a5deedd" category="paragraph">Astra Trident的21.01版為營運者帶來了一些重要的架構變更、如下所示：</block>
  <block id="4d1b9ac70f0037098e345cb389ea45d9" category="list-text">運算子現在*叢集範圍*。Trident運算子先前的執行個體（20.04到20.10版）為*命名空間範圍*。叢集範圍內的運算子具有下列優點：</block>
  <block id="d898743d222c4e0e5e333941bee1ed57" category="list-text">資源責任：營運者現在可在叢集層級管理與Astra Trident安裝相關的資源。在安裝Astra Trident時、營運者使用「擁有者參考資料」來建立及維護數項資源。在叢集範圍內的資源上維護「擁有者參考資料」、可能會在OpenShift等Kubernetes經銷商上產生錯誤。叢集範圍的運算子可減輕此問題。對於自動修復和修補Trident資源、這是必要的需求。</block>
  <block id="375aa3155c54339a366f23cdb01301e5" category="list-text">卸載期間清理：完整移除Astra Trident將需要刪除所有相關資源。命名空間範圍的運算子可能會在移除叢集範圍的資源（例如叢集角色、叢集角色繫結和Podcast安全性原則）時遇到問題、並導致不完整的清理。叢集範圍的運算子可消除此問題。使用者可以完全解除安裝Astra Trident、並視需要重新安裝。</block>
  <block id="6d68e880fd5e5254e122e99a78417abd" category="list-text">現在、「TridentProvisioner」取代為「TridentOrchestrator」、做為用來安裝和管理Astra Trident的自訂資源。此外、「TridentOrchestrator」規格也引進了新的領域。使用者可以指定命名空間Trident必須使用「pec.namespace`」欄位來安裝/升級。您可以參考範例<block ref="2890210b17eb9668a60ececdebcd5910" category="inline-link-rx"></block>。</block>
  <block id="7d224494dc0d22edaed4c965cdddffe6" category="inline-link-macro">使用Trident營運者進行升級</block>
  <block id="85f4fc5b4c12e5ede408e45a6d484dc1" category="list-text"><block ref="85f4fc5b4c12e5ede408e45a6d484dc1" category="inline-link-macro-rx"></block></block>
  <block id="b41f68e89b7b02a9077fb800d31a2fbe" category="inline-link-macro">使用「tridentctl」進行升級</block>
  <block id="efb20f59615d4d5ee0437ba57aecbe50" category="list-text"><block ref="efb20f59615d4d5ee0437ba57aecbe50" category="inline-link-macro-rx"></block></block>
  <block id="f71fd95d4de4797557e6830c1448c945" category="summary">您可以使用「tridentctl」輕鬆升級現有的Astra Trident安裝。</block>
  <block id="2a21586f7990f8cb0f8951cd2ef7bc3b" category="doc">使用tridentctl進行升級</block>
  <block id="6224e22d5a77816dd8b659c25a3f88a5" category="paragraph">升級至最新版Astra Trident時、請考慮下列事項：</block>
  <block id="98c7e2ecbd5f5a638272ee366b25b6a1" category="inline-link">Volume快照</block>
  <block id="8f9f7d64f0943a9bec25cdd7b786022a" category="list-text">從Trident 20.01開始、只有的試用版<block ref="0b290b7ed02de23dc49888d0fa4fc114" category="inline-link-rx"></block> 支援。Kubernetes系統管理員應謹慎地將Alpha快照物件安全備份或轉換成試用版、以保留舊版Alpha快照。</block>
  <block id="ec35126af255fdfac3b9a8e16e971389" category="list-text">Volume快照的試用版推出一組經過修改的CRD和快照控制器、這兩個控制器都應該在安裝Astra Trident之前設定。</block>
  <block id="a4155944ba4eeb0c41401ab7bb85d3d9" category="inline-link">這篇部落格</block>
  <block id="06f3d92245489ff0e9444c95095ed61b" category="admonition"><block ref="d0e35df46eec7926f0d8844193807dad" category="inline-link-rx"></block> 討論將Alpha Volume快照移轉至試用版格式的相關步驟。</block>
  <block id="4ff0a9f6065b24ce3d325bad3223f4e2" category="paragraph">解除安裝和重新安裝Astra Trident可做為升級。當您解除安裝Trident時、不會刪除由Astra Trident部署所使用的持續磁碟區宣告（PVc）和持續磁碟區（PV）。當Astra Trident離線時、已配置的PV仍可繼續使用、而Astra Trident會在任何建立於過渡期間的永久虛電路恢復上線後、為其配置磁碟區。</block>
  <block id="398a8bf92020ed0b4edb1445d1380971" category="admonition">升級Astra Trident時、請勿中斷升級程序。確保安裝程式執行完成。</block>
  <block id="068051b0ea15e91fd236b514c8b35ffe" category="section-title">升級後的後續步驟</block>
  <block id="ba79ef627bc5ee010211ca922024f9e4" category="paragraph">若要使用較新Trident版本（例如隨需Volume Snapshots）提供的豐富功能集、您可以使用「tridentctl升級」命令來升級磁碟區。</block>
  <block id="1f97048c5a9c81e85e588044b15b51c8" category="paragraph">如果有舊版磁碟區、您應該將其從NFS/iSCSI類型升級為「csi」類型、以便使用Astra Trident的完整新功能集。Trident提供的舊PV支援傳統功能集。</block>
  <block id="aae0cab55b3d14012cfc61ef5ad46105" category="paragraph">決定將磁碟區升級為「csi」類型時、請考慮下列事項：</block>
  <block id="9407b572db9501134ce92167448428fb" category="list-text">您可能不需要升級所有磁碟區。先前建立的磁碟區將繼續可供存取、並正常運作。</block>
  <block id="35127b2fd7c387c56305575dfafe2a97" category="list-text">在升級時、PV可作為部署/狀態集的一部分掛載。不需要關閉部署/狀態集。</block>
  <block id="260eeb1b0c4ec05a9788dc485ed03d36" category="list-text">您*無法*在升級時將PV附加至獨立式Pod。在升級磁碟區之前、您應該先關閉Pod。</block>
  <block id="2d59c3aee4c9fe757980153c65e922d0" category="list-text">您只能升級綁定到PVc的磁碟區。在升級之前、應先移除和匯入未繫結至PVCS的磁碟區。</block>
  <block id="f2e9d80774fbee2a6152ad9c7db8e0ee" category="section-title">Volume升級範例</block>
  <block id="eff342caa8bb47fc3653d7b149aa91d4" category="paragraph">以下範例顯示如何執行Volume升級。</block>
  <block id="fbc477673a43a428e429fe6902c6e36a" category="list-text">執行「kubectl Get PV」以列出PV。</block>
  <block id="09d5f690bff68f8b4ffeeed3dac1f534" category="paragraph">目前有四部PV是Trident 20.07使用「NetApp.IO/triident」資源配置程式所建立。</block>
  <block id="581ee670123fe76ff75275867ef06bcc" category="list-text">執行「kubectl描述PV」以取得PV的詳細資料。</block>
  <block id="a20b570eccfacf0ac4684823643f91a1" category="paragraph">PV是使用「NetApp.IO/Trident」資源配置程式所建立、屬於NFS類型。為了支援Astra Trident提供的所有新功能、此PV應升級為「csi」類型。</block>
  <block id="5be1e244815de403bf79074735c2621f" category="list-text">執行「tridenctl升級Volume &lt;三位角Volume &gt;」命令、將舊版Astra Trident Volume升級至csi規格。</block>
  <block id="c18e246999f594d4fb39c857bcdd1e09" category="list-text">執行「kubecll描述PV」來驗證磁碟區是否為csi Volume。</block>
  <block id="fb741f44b40455e466443f8f96ace85e" category="paragraph">如此一來、您就能將由Astra Trident建立的NFS/iSCSI類型磁碟區、以每個磁碟區為基礎、升級為「csi」類型。</block>
  <block id="1e209c07680392db2505687941188c9f" category="summary">瞭解降級至舊版Astra Trident的相關步驟。</block>
  <block id="9b51b245233e60555d569a43ebaa1b8d" category="doc">降級Astra Trident</block>
  <block id="f58ee9343b12a3276981187a42480ba7" category="paragraph">您可能會考慮降級的原因有多種、例如：</block>
  <block id="e930f1fff9365ca35f55f1e61bef69a9" category="list-text">應變規劃</block>
  <block id="235115784feaabab0df1d64a2019b176" category="list-text">立即修正升級後發現的錯誤</block>
  <block id="41768ab308324d6b4a49e2e225427666" category="list-text">相依性問題、不成功和不完整的升級</block>
  <block id="9bb6c30b6b6e3a9fbbd83b458a3556eb" category="section-title">何時降級</block>
  <block id="97442cfde1061a7c844e8d4c06f79720" category="paragraph">移至使用CRD的Astra Trident版本時、您應該考慮降級。由於Astra Trident現在使用CRD來維護狀態、因此所建立的所有儲存實體（後端、儲存類別、PV和Volume快照）都會有相關的CRD物件、而非寫入「Trident」PV（由舊版Astra Trident所使用）的資料。新建立的PV、後端和儲存類別都會維護為CRD物件。如果您需要降級、則只能針對使用CRD（19.07及更新版本）執行的Astra Trident版本嘗試降級。這是為了確保在降級發生後、可以看到目前Astra Trident版本上執行的所有作業。</block>
  <block id="cb4d3c8706ed4dd2a49a007f19e8b30a" category="section-title">何時不降級</block>
  <block id="7be40d1b43eccf7d81bd7ad70a7cee5b" category="paragraph">您不應降級至使用「etcd」來維持狀態的Trident版本（19.04及更早版本）。所有以目前Astra Trident版本執行的作業、都不會在降級後反映出來。移回舊版時、無法使用新建立的PV。當您移回舊版時、Astra Trident不會看到對物件所做的變更、例如後端、PV、儲存類別和Volume快照（已建立/更新/刪除）。返回舊版不會中斷已使用舊版建立之PV的存取、除非已升級。</block>
  <block id="716e6c4d72b03c2b5b4503d5e968e654" category="section-title">使用業者安裝Astra Trident時的降級程序</block>
  <block id="286ac65245e7b7508f3cdf1dea1c60eb" category="paragraph">對於使用Trident操作員完成的安裝、降級程序會有所不同、不需要使用「tridentctl」。</block>
  <block id="41cc548b7b7993679e555423a014ca5c" category="paragraph">對於使用Trident營運者完成的安裝、Astra Trident可降級為下列任一項：</block>
  <block id="c3d92c281c17e41ffac420b45790ecbf" category="list-text">使用命名空間範圍運算子安裝的版本（20.07 - 20.10）。</block>
  <block id="69f5b5f7aa4a5f07267b9c758e2580e6" category="list-text">使用叢集範圍運算子（21.01及更新版本）安裝的版本。</block>
  <block id="0d8778040c29d89141a733b060314da3" category="section-title">降級至叢集範圍的運算子</block>
  <block id="12a3bd4ff105bed8650ca128636a078f" category="paragraph">若要將Astra Trident降級為使用叢集範圍運算子的版本、請遵循下列步驟。</block>
  <block id="f472e2d2602fec8483b064616fa5f543" category="list-text"><block ref="e6c6ebb45af4a1845e181c2b5544dbb0" category="inline-link-macro-rx"></block>。*除非您想要完全移除現有的安裝、否則請勿使用CRD。*</block>
  <block id="3864c0c37bf26f8a7686e5c04435974c" category="inline-link">Trident GitHub repo</block>
  <block id="78a26b79451266c6562d8d11cdb86ad0" category="list-text">刪除叢集範圍的運算子。為達成此目的、您將需要用於部署營運者的資訊清單。您可以從取得<block ref="08fa9926a4347665a77bd7911809a1ce" category="inline-link-rx"></block>。請務必切換至所需的分公司。</block>
  <block id="44d9737dc7f423d188a4b34663c5f06e" category="list-text">安裝所需版本的Astra Trident、以繼續降級。請遵循所需版本的說明文件。</block>
  <block id="0e792058c21e7156d25e8ae8f2d784a0" category="section-title">降級至命名空間範圍的運算子</block>
  <block id="8ad79c030a4ebdd2f446157ba529561e" category="paragraph">本節摘要說明降級至Astra Trident版本所需的步驟、範圍介於20.07到20.10之間、此版本將使用命名空間範圍的運算子來安裝。</block>
  <block id="a7c80f52f9be4831ca776b56dc642a45" category="list-text"><block ref="e6c6ebb45af4a1845e181c2b5544dbb0" category="inline-link-macro-rx"></block>。*除非您想要完全移除現有的安裝、否則請勿刪掉CRD。*請確定刪除了「三線管協調器」。</block>
  <block id="141ed8ae2dd3c3efac0c25f12b058c87" category="list-text">刪除叢集範圍的運算子。為達成此目的、您將需要用於部署營運者的資訊清單。您可以從取得<block ref="08fa9926a4347665a77bd7911809a1ce" category="inline-link-rx"></block>。請務必切換至所需的分公司。</block>
  <block id="2389eabedca3341193952356ec53cd0c" category="list-text">刪除「TridentOrchestrator」CRD。</block>
  <block id="2982be9f91f77222d75873452bfc7696" category="paragraph">Astra Trident已解除安裝。</block>
  <block id="0f46a51f24c3700da8c74b9a5294a22f" category="list-text">安裝所需的版本、繼續降級。請遵循所需版本的說明文件。</block>
  <block id="5f7d982e216126a476d4ca0051837e2a" category="section-title">使用Helm降級</block>
  <block id="fe0182349853dde39c65151b592bc343" category="paragraph">若要降級、請使用「helm復原」命令。請參閱下列範例：</block>
  <block id="6506fb901be776a97bf61f4f21fb84ce" category="section-title">使用tridentctl安裝Astra Trident時的降級程序</block>
  <block id="d1008d4e2b1eb300375d48496c96e8b0" category="paragraph">如果您使用「tridentctl」來安裝Astra Trident、降級程序會涉及下列步驟。此順序將引導您完成從Astra Trident 21.007移至20.07的降級程序。</block>
  <block id="e08f959c89cb36ec887089ce4a7c1bcc" category="admonition">在開始降級之前、您應該擷取Kubernetes叢集的「etcd」快照。這可讓您備份Astra Trident客戶需求日的目前狀態。</block>
  <block id="e36e921de70428b33bb0e5c22f4f1d03" category="list-text">請確定使用「tridentctl」安裝Trident。如果您不確定Astra Trident的安裝方式、請執行以下簡單測試：</block>
  <block id="d7c7b52356c18ead4409ef4ca7e2eac8" category="list-text">列出Trident命名空間中的Pod。</block>
  <block id="225b7f623c2562a1ed24395fd3852b70" category="list-text">識別叢集中執行的Astra Trident版本。您可以使用「tridentctl」或查看Trident Pod中使用的影像。</block>
  <block id="46da6852e307b4f4a0e965c9c18fe576" category="list-text">如果您*沒有看到*「tridentOrchestrator」、（或）「trident置 備程式」、（或）名為「trident - oper-xxxxx-xxxxX」的Pod、則Astra Trident *會安裝*「tridentctl」。</block>
  <block id="72b739b65841b5d903e9ec216f0c4fd1" category="list-text">使用現有的「tridentctl」二進位檔來解除安裝Astra Trident。在這種情況下、您將會以21.07二進位檔解除安裝。</block>
  <block id="6445365d100b18e233ebf2d08d116aee" category="inline-link-macro">自訂安裝</block>
  <block id="da4ba399089f873246a85825f8a3e1c3" category="list-text">完成後、請取得所需版本的Trident二進位檔（本範例為20.07）、並使用它來安裝Astra Trident。您可以為產生自訂YAML <block ref="a251ebefafa5a5d36d857b7034f07489" category="inline-link-macro-rx"></block> 如有需要。</block>
  <block id="03347682a0c8323a17a17933bbf4e18c" category="paragraph">降級程序已完成。</block>
  <block id="5ee08ab883e000ce6b739dbb0b6ff376" category="summary">深入瞭解Kubernetes系統的各個部分。</block>
  <block id="607ae6360b32f1bd6e559e915d414fab" category="doc">Kubernetes概念</block>
  <block id="d60f0fff1c23a02458849862f593357e" category="inline-link">Kubernetes系統</block>
  <block id="a7018a5fd7b610274c7786aa5402e64d" category="paragraph">深入瞭解的各個部分<block ref="f01a74527fa0343e793eb393c9d4809a" category="inline-link-rx"></block>。</block>
  <block id="ee50ce7340da5b018abe62c8e613cae0" category="summary">Astra Trident提供Trident Orchestrator的數個命令列選項、並透過特定連接埠進行通訊。</block>
  <block id="7d4fab76513c90b603a722620cde60fe" category="doc">命令列選項</block>
  <block id="94efe0c9471991c69d2a3b0970a56744" category="paragraph">Astra Trident提供Trident Orchestrator的數個命令列選項。您可以使用這些選項來修改部署。</block>
  <block id="8db7df66ab1d7ab5f1dc947acdb5fae4" category="section-title">記錄</block>
  <block id="7e2a14542a2613424ad88206fd2dd9aa" category="list-text">debug'：啟用除錯輸出。</block>
  <block id="55e727716c7f623987be58e50732c01e" category="list-text">記錄層級：設定記錄層級（偵錯、資訊、警告、錯誤、嚴重）。預設為資訊。</block>
  <block id="30136395f01879792198317c11831ea4" category="section-title">Kubernetes</block>
  <block id="5700f5ae190580b01f6ed6c031668336" category="list-text">「-k8s_pod」：使用此選項或「-k8s_API_server'」來啟用Kubernetes支援。設定此選項會使Trident使用內含Pod的Kubernetes服務帳戶認證、來聯絡API伺服器。這只有當Trident在Kubernetes叢集中以Pod形式執行、且已啟用服務帳戶時才會運作。</block>
  <block id="24095e7ef85031e99914e2c5298a7ded" category="list-text">k8s_API_server &lt;ininside-address:inimite-port&gt;:使用此選項或`-k8s_pod'來啟用Kubernetes支援。如果指定、Trident會使用提供的不安全位址和連接埠、連線至Kubernetes API伺服器。這可讓Trident部署在Pod外部、但它只支援不安全的API伺服器連線。若要安全連線、請使用「-k8s_pod」選項、在Pod中部署Trident。</block>
  <block id="9d77217a2dfe50f2575ced46f5e661d8" category="list-text">「-k8s_config_path &lt;file&gt;'：必要；您必須指定KubeConfig檔案的路徑。</block>
  <block id="c5fd214cdd0d2b3b4272e73b022ba5c2" category="section-title">Docker</block>
  <block id="1e071a3d810132af1c9f8f6a03ca5609" category="list-text">-`-volume驅動程式&lt;name&gt;：登錄Docker外掛程式時使用的驅動程式名稱。預設為「NetApp」。</block>
  <block id="dfbbfd6bbf6bc798d1cbe8895d1cff22" category="list-text">-`driver_port &lt;port-number&gt;'：偵聽此連接埠、而非UNIX網域通訊端。</block>
  <block id="3874d7b8c9196001f8bfe4c49f43b323" category="list-text">「-config」：必要；您必須指定後端組態檔的路徑。</block>
  <block id="50780f47f6839d47d60bc4555ee00c3f" category="section-title">休息</block>
  <block id="bfffd3cb0560af555e57dd6bad52a9be" category="list-text">-`-address&lt;ip-or主機&gt;'：指定Trident的REST伺服器應接聽的位址。預設為localhost。當偵聽localhost並在Kubernetes Pod內部執行時、無法從Pod外部直接存取REST介面。使用「-address」（位址）可讓REST介面從Pod IP位址存取。</block>
  <block id="433f174b6e54b889696b2efd4ef40dc6" category="admonition">Trident REST介面可設定為偵聽、僅適用於127.0.0.1（適用於IPV4）或[:1]（適用於IPv6）。</block>
  <block id="049ad2e7bef322af60013bbdd35ebbe7" category="list-text">-`-port &lt;port-number&gt;'：指定Trident的REST伺服器應接聽的連接埠。預設為8000。</block>
  <block id="188cb756fe8659cb2caf27ca6d1446b4" category="list-text">「-REST」：啟用REST介面。預設為true。</block>
  <block id="8447c4879970f03c99a2bec36a05c141" category="summary">如果您偏好與Astra Trident的REST API互動、您可以直接使用REST端點。</block>
  <block id="a0ebcf8495639418ba9d4b85dbb67b8b" category="doc">Astra Trident REST API</block>
  <block id="319c1a7b5479ffa2a028b658ad5b7033" category="inline-link-macro">tridentctl命令和選項</block>
  <block id="2f1ab5b99f1893144b69718c274415f4" category="paragraph">而 <block ref="a3b750e7ac33c9792c64627692f306aa" category="inline-link-macro-rx"></block> 這是與Astra Trident REST API互動最簡單的方法、您可以視需要直接使用REST端點。</block>
  <block id="d7c9226cc31c5b12ee3114bc7014c075" category="paragraph">這對於在非Kubernetes部署中使用Astra Trident做為獨立二進位檔的進階安裝來說非常有用。</block>
  <block id="ff307287df4629ad827fba73568b9a58" category="paragraph">為了提高安全性、Astra Trident的「REST API」在Pod內部執行時、預設僅限使用localhost。若要變更此行為、您必須在Pod組態中設定Astra Trident的「位址」引數。</block>
  <block id="8b3c7aa88e751573c842f17535525f19" category="paragraph">API的運作方式如下：</block>
  <block id="7528035a93ee69cedb1dbddb2f0bfcc8" category="section-title">取得</block>
  <block id="2fab7aa97b6a2cfae6563e72aac5161e" category="list-text">「Get &lt;trident位址&gt;/trident / v1/&lt;object-type &gt;」：列出該類型的所有物件。</block>
  <block id="c34156b367bae1b376f09b89d3be7992" category="list-text">「Get &lt;trident位址&gt;/trident / v1/&lt;object-typed&gt;/&lt;object-name&gt;」：取得命名物件的詳細資料。</block>
  <block id="a02439ec229d8be0e74b0c1602392310" category="section-title">貼文</block>
  <block id="6692e2cd6834e6b9b2151799cac2a9f8" category="paragraph">「POST &lt;trident位址&gt;/trident / v1/&lt;object-type&gt;」：建立指定類型的物件。</block>
  <block id="ce87eb03803d5633c163541464e9e7f2" category="inline-link-macro">"tridentctl"命令和選項</block>
  <block id="3d2bacacf0178e742d5abb2abc32d431" category="list-text">需要Json組態才能建立物件。如需每種物件類型的規格、請參閱 <block ref="e87a326653960de9774fcc58ee9fa490" category="inline-link-macro-rx"></block>。</block>
  <block id="5b2f45c3d098b61927afda859c9144f8" category="list-text">如果物件已經存在、行為會有所不同：後端會更新現有物件、而其他所有物件類型都會使作業失敗。</block>
  <block id="32f68a60cef40faedbc6af20298c1a1e" category="section-title">刪除</block>
  <block id="ecfc51243c8c28fc234ff87f1f9ddb88" category="paragraph">「刪除&lt;trident位址&gt;/trident / v1/&lt;object-typed&gt;/&lt;object-name&gt;：刪除命名的資源。</block>
  <block id="80e4e3d3203325fb6aeb139614fd09f3" category="admonition">與後端或儲存類別相關聯的磁碟區將繼續存在、必須分別刪除。如需詳細資訊、請參閱 <block ref="e87a326653960de9774fcc58ee9fa490" category="inline-link-macro-rx"></block>。</block>
  <block id="ce94b1f7df7a6a05a559b66f96eff1cc" category="paragraph">如需這些API的名稱範例、請傳遞DEBUG（`-d'）旗標。如需詳細資訊、請參閱 <block ref="e87a326653960de9774fcc58ee9fa490" category="inline-link-macro-rx"></block>。</block>
  <block id="afe272beb780ad53d441c342bf1c8c77" category="summary">深入瞭解tridentctl、這是一個命令列公用程式、可讓您輕鬆存取Trident。</block>
  <block id="4e49f66de2e2dc43c25555fe50639334" category="paragraph">。<block ref="5a856e83aada9750fe5389f8da94335b" category="inline-link-rx"></block> 內含命令列公用程式「tridentctl」、可讓您輕鬆存取Astra Trident。擁有足夠權限的Kubernetes使用者可以使用它來安裝Astra Trident、以及直接與它互動、以管理包含Astra Trident Pod的命名空間。</block>
  <block id="8ca34267f11cb69ea424bc0320f0e295" category="paragraph">如需使用資訊、請執行「tridentctl --help"。</block>
  <block id="a55b7ee69c26277a1088efc103e15297" category="paragraph">可用的命令和全域選項包括：</block>
  <block id="2dd878ee55d738aa02e6b0b162d45708" category="paragraph">可用命令：</block>
  <block id="4386bd8da14af923cbb7ac011ffc048e" category="list-text">「Create」：新增資源至Astra Trident。</block>
  <block id="f40f9a4cf242d0355aaf8d9e06617436" category="list-text">「刪除」：從Astra Trident移除一或多個資源。</block>
  <block id="94b75e236d78fe800d1d32acc3882789" category="list-text">「Get」（取得）：從Astra Trident取得一或多項資源。</block>
  <block id="bc9ef80dceea04796c6218fe96e05b30" category="list-text">「說明」：任何命令的相關說明。</block>
  <block id="f5421bf790b945f508fa1b9f223318e5" category="list-text">「影像」：列印容器影像Astra Trident需求的表格。</block>
  <block id="40e65170f778aaa7f4ab7f645b3bb3df" category="list-text">「匯入」：將現有資源匯入Astra Trident。</block>
  <block id="a824e587817131e2052a450803b2d97c" category="list-text">「安裝」：安裝Astra Trident。</block>
  <block id="c90c365a06ede3139cad79d4e55673ee" category="list-text">「記錄」：從Astra Trident列印記錄。</block>
  <block id="e5c5ad2be68f58e910aa42a9fcc98141" category="list-text">「結束」：從Astra Trident傳送資源。</block>
  <block id="3166458a066b2d14394e408f1f8fed84" category="list-text">「解除安裝」：解除安裝Astra Trident。</block>
  <block id="8c8fcf9d4df8bd54d26dc748cc4bac55" category="list-text">「更新」：修改Astra Trident中的資源。</block>
  <block id="042aeda3cc45bf1f53a0e74660dbd924" category="list-text">「升級」：升級Astra Trident的資源。</block>
  <block id="d014c15bf0496b645d02caf1704932f7" category="list-text">《版本》：印出Astra Trident的版本。</block>
  <block id="1c90ba5cf3791b6148c7887a696911ec" category="paragraph">旗標：</block>
  <block id="568cd496b6bde641a886745edfa59ae7" category="list-text">「-d、--debug'：偵錯輸出。</block>
  <block id="fe27ec35afa597521f9616f18c32e556" category="list-text">"h-h,--help"：對"tridentctl"的幫助。</block>
  <block id="874377d6c0baee9e8e842c8abf13d28c" category="list-text">「-n、--namespace字串」：Astra Trident部署的命名空間。</block>
  <block id="463b413ea9e7764a789f3e987cb06fc8" category="list-text">「-o」、「-outputstr字 串」：輸出格式。json之一| yaml| name| wl| ps（預設）。</block>
  <block id="85c5338e138fc6d122a579f7a07040bf" category="list-text">「-s、--server字串」：Astra Trident REST介面的位址/連接埠。</block>
  <block id="76ea0bebb3c22822b4f0dd9c9fd021c5" category="section-title">建立</block>
  <block id="b8d486e9285b25b72d6efad05e41de4d" category="paragraph">您可以使用執行「create」命令、將資源新增至Astra Trident。</block>
  <block id="6d5c7e6905e460d1fba1f2dd1c0d2a8a" category="paragraph">可用選項：「後端」：新增後端至Astra Trident。</block>
  <block id="099af53f601532dbd31e0ea99ffdeb64" category="section-title">刪除</block>
  <block id="0d847e459450017616b8ab50b372ad2e" category="paragraph">您可以執行「刪除」命令、從Astra Trident移除一或多個資源。</block>
  <block id="16713f316b7cce82385c040efc32ac83" category="paragraph">可用選項：</block>
  <block id="417f8bf14ed5852917d189612c7d163c" category="list-text">「後端」：從Astra Trident刪除一或多個儲存後端。</block>
  <block id="cafc31fff08c0637f779500b7840fe1e" category="list-text">「節點」：從Astra Trident刪除一或多個SCSI節點。</block>
  <block id="4896fd245b78ab9b7d044375c1fce85e" category="list-text">「napshot」：從Astra Trident刪除一或多個Volume快照。</block>
  <block id="cef6b6bb7932e7450e35eafc3d986f18" category="list-text">「torageclass'：從Astra Trident刪除一或多個儲存類別。</block>
  <block id="14eeaf8d1da512153855b759185ee129" category="list-text">「Volume」（磁碟區）：從Astra Trident刪除一或多個儲存磁碟區。</block>
  <block id="b5eda0a74558a342cf659187f06f746f" category="section-title">取得</block>
  <block id="c7a7a677647f05a4032891d4aef5bed5" category="paragraph">您可以執行「Get」命令、從Astra Trident取得一或多個資源。</block>
  <block id="2dd609bd837a41363817262fd314b0be" category="list-text">「後端」：從Astra Trident取得一或多個儲存後端。</block>
  <block id="ad4ba4a1b0612fa67f4386330ac00e9d" category="list-text">「napshot」：從Astra Trident取得一或多個快照。</block>
  <block id="5385ccfb9fd8a07e53dc1a6ac58a101d" category="list-text">「torageclass'：從Astra Trident取得一或多個儲存課程。</block>
  <block id="060da5b15e6fb7129c04e18b3d96c702" category="list-text">「Volume」：從Astra Trident取得一或多個Volume。</block>
  <block id="59b514174bffe4ae402b3d63aad79fe0" category="section-title">映像</block>
  <block id="16ca0a361439e1f936eaa5c919443b10" category="paragraph">您可以執行「影像」旗標、以列印容器影像Astra Trident需求的表格。</block>
  <block id="1008ac4609cab9210ae758ff8fee8127" category="paragraph">旗標：*、-help'：影像說明。*`-v、--k8s-version字串：語義版本的Kubernetes叢集。</block>
  <block id="f6c534966bc7687e0c87134d025f8837" category="section-title">匯入Volume</block>
  <block id="df5ec83145dcd824f8daf85d89e5dd8a" category="paragraph">您可以執行「匯入Volume」命令、將現有磁碟區匯入Astra Trident。</block>
  <block id="ccf1bb29ef5562c033962d35014005e9" category="paragraph">別名：「Volume、v」</block>
  <block id="48c7ae9a5466415a6b9666ad86746640" category="list-text">`-f、--FileName字串：Yaml或Json PVc檔案的路徑。</block>
  <block id="1bb2af29a08ab6ea9414a8656234b8c6" category="list-text">「-h、-help'：Volume說明。</block>
  <block id="0ad393d5c23749c23f3855220b55375a" category="list-text">「無管理」：僅建立PV/PVc。不要假設磁碟區生命週期管理。</block>
  <block id="19ad89bc3e3c9d7ef68b89523eff1987" category="section-title">安裝</block>
  <block id="42ddf993417d9568ca6a057fe55f9c63" category="paragraph">您可以執行「install」旗標來安裝Astra Trident。</block>
  <block id="d14ef114d140fec912921e8447a4dd25" category="list-text">「-autosup-image字串」：AutoSupport 適用於「遙測」的容器影像（預設為「NetApp/triident autosupport：20.07.0」）。</block>
  <block id="fbd7cc4267716ab9206612c6dcaa206e" category="list-text">「-autosupport-proxy]：代理伺服器的位址/連接埠、用於傳送AutoSupport 「遙測」。</block>
  <block id="8bb3d6751910d39b8c964e90434b79db" category="list-text">「-csi」：安裝csi Trident（僅適用於Kubernetes 1.13的置換功能、需要功能閘道）。</block>
  <block id="778cbd0cbbd73953bc965ad29269803c" category="list-text">「-enable節點準備」：嘗試在節點上安裝所需的套件。</block>
  <block id="23945a1dd08f0fb29fc1b73a02a2f48d" category="list-text">「-generame-custom-yaml」：產生Yaml檔案、無需安裝任何內容。</block>
  <block id="351ac43ddb05bc31fb7aa4d76c9098ed" category="list-text">「-h、-help'：安裝說明。</block>
  <block id="1968a7e86875b6b6ca9d5222172f8d16" category="list-text">「-http-requer-timeout」：覆寫Trident控制器REST API的HTTP要求逾時（預設值為1m30s）。</block>
  <block id="3b825e283b9b4452c1ef223373ad950d" category="list-text">「-image-registry字串」：內部映像登錄的位址/連接埠。</block>
  <block id="ba7224837b2ded4b5b295c1012fcc2c0" category="list-text">「-k8s-timeout duration」（k8s-timeout持續時間）：所有Kubernetes作業的逾時時間（預設為3個月）。</block>
  <block id="6018142252ad7b87dc139b3235ff4fd3" category="list-text">「-kubelet-dir字串」：kubelet內部狀態的主機位置（預設為「/var/lib/kubelet」）。</block>
  <block id="e36f8ff54239eb329caf981624e29cb9" category="list-text">「-log-format字串」：Astra Trident記錄格式（文字、json）（預設為「text」）。</block>
  <block id="75f452bd493d8727bcf31563cc9106b4" category="list-text">「-PV字串」：Astra Trident使用的舊PV名稱、可確保不存在（預設為「Trident」）。</block>
  <block id="ba2a8d0773dc83972c406043a789e4dd" category="list-text">「-PVc字串」：Astra Trident使用的舊版PVc名稱、可確保不存在（預設為「Trident」）。</block>
  <block id="6c99958eae5167b3baa561e4f7ee33f1" category="list-text">「-Silence-autosupport」：請勿AutoSupport 自動將支援套裝組合傳送至NetApp（預設為true）。</block>
  <block id="77c96d54825d934e8abaadbc0049935d" category="list-text">「-silent」：安裝期間停用大部分的輸出。</block>
  <block id="daeedc3203fdc6c1fb8dfe70e2381ed3" category="list-text">「-trident映像字串」：要安裝的Astra Trident映像。</block>
  <block id="9a7a8500c6fa970d6879b522c3e33437" category="list-text">「用途自訂yaml」：使用安裝目錄中現有的任何Yaml檔案。</block>
  <block id="bbf23448d408765a1240d287ed41ceff" category="list-text">《使用IPv6》：使用IPv6進行Astra Trident的通訊。</block>
  <block id="2165e4fa5bddb65a31f6a0c495c2fa37" category="section-title">記錄</block>
  <block id="501416d02a886c81e8849b2f400e28a3" category="paragraph">您可以執行「記錄」旗標、從Astra Trident列印記錄。</block>
  <block id="be8607b2dc354b7010b1464ac140fc1b" category="list-text">「-a、-archive」：除非另有說明、否則請使用所有記錄建立支援歸檔。</block>
  <block id="d8d07479f4d5c7f0ef2b0f51407f070c" category="list-text">「-h、-help'：記錄說明。</block>
  <block id="f925a9593a051a85d10acec74988d84f" category="list-text">「-l、-log字串」：要顯示的Astra Trident記錄。其中一個trident | auto| trident運算子| all（預設為「自動」）。</block>
  <block id="d8a224d86fa21c6c564987d0848bf681" category="list-text">「節點字串」：Kubernetes節點名稱、用於收集節點pod記錄。</block>
  <block id="a335d03b82ae4916c848dd419432f477" category="list-text">「-p、- previous」：取得前一個Container執行個體的記錄（如果存在）。</block>
  <block id="d7d7c214e32f71943c71783fa9d5fb55" category="list-text">"-sidecars"：取得sidecar容器的記錄。</block>
  <block id="2541d938b0a58946090d7abdde0d3890" category="section-title">傳送</block>
  <block id="3121026e841bd19d147c54ac43e423c0" category="paragraph">您可以執行「shend」命令、從Astra Trident傳送資源。</block>
  <block id="9ce1e94be8ccb1612967a7e2cbe69a6f" category="paragraph">可用選項：AutoSupport 「無法用」：傳送AutoSupport 一份不全的檔案給NetApp。</block>
  <block id="fe98497efedbe156ecc4b953aea77e07" category="section-title">解除安裝</block>
  <block id="e980a564a92aa568234d9757a591756b" category="paragraph">您可以執行「解除安裝」旗標來解除安裝Astra Trident。</block>
  <block id="dcb0c76edbe301ede057149da76bf89b" category="paragraph">旗標：*、-help'：解除安裝說明。*「-silent」：解除安裝期間停用大部分的輸出。</block>
  <block id="3ac340832f29c11538fbe2d6f75e8bcc" category="section-title">更新</block>
  <block id="328865de703bbe034177e6eb51dc3d28" category="paragraph">您可以執行「update」命令來修改Astra Trident中的資源。</block>
  <block id="8680f448b33371bcb4778563a93f4702" category="paragraph">可用選項：「後端」：更新Astra Trident的後端。</block>
  <block id="ae26b3d8e556703291282149e3ae894f" category="section-title">升級</block>
  <block id="87911de7a0bc3ff821f75ab303a0edc0" category="paragraph">您可以執行「升級」命令來升級Astra Trident中的資源。</block>
  <block id="70cc5172db10ac60dd0b32e57285e85c" category="paragraph">可用選項：「Volume」（Volume）：將一個或多個持續磁碟區從NFS/iSCSI升級至SCSI。</block>
  <block id="2af72f100c356273d46284f6fd1dfc08" category="section-title">版本</block>
  <block id="9867997bba4e250bad7411d19fce3905" category="paragraph">您可以執行「vrsion」旗標來列印「tridentctl」版本和執行中的Trident服務。</block>
  <block id="800f73959f4b721c78f4651c6b4b2052" category="paragraph">旗標：*、用戶端：僅限用戶端版本（不需伺服器）。*「-h、--help'：版本說明。</block>
  <block id="04333ff788951193122a833ecd614950" category="summary">Kubernetes與Trident、Trident與Storage、Kubernetes與儲存設備之間有幾個資源物件、分別是它們之間的關係。其中有些物件是透過Kubernetes進行管理、其他物件則是透過Trident進行管理。</block>
  <block id="da1e63dd673a1932cebb48b6a81bbbb1" category="doc">Kubernetes和Trident物件</block>
  <block id="d107eefb0ce66911b186b03b9e9c337e" category="paragraph">您可以透過讀取和寫入資源物件、使用REST API與Kubernetes和Trident互動。Kubernetes與Trident、Trident與Storage、Kubernetes與儲存設備之間有幾個資源物件、分別是它們之間的關係。其中有些物件是透過Kubernetes進行管理、其他物件則是透過Trident進行管理。</block>
  <block id="62499e0de79c4d07c7915a36f9faa0d8" category="section-title">物件如何彼此互動？</block>
  <block id="b9ea565816618011ca591fc191fe5e63" category="paragraph">瞭解物件、物件的適用範圍及其互動方式、最簡單的方法可能是遵循Kubernetes使用者的單一儲存要求：</block>
  <block id="ec7d6500a82a56ee8f5fff02eafa7af7" category="list-text">使用者會建立一個「PeristentVolume Claim」、要求系統管理員先前設定的Kubernetes「torageClass」中的特定大小的新「PersistentVolume」。</block>
  <block id="6b25cc026b6f29464d3fce0f6ec67805" category="list-text">Kubernetes「torageClass」可將Trident識別為其資源配置程式、並包含可告知Trident如何為所要求的類別資源配置Volume的參數。</block>
  <block id="5b078d6b19593ee6c55f428e2c85faa7" category="list-text">Trident查看自己的「儲存類」、其名稱與用來為類別配置磁碟區的「後端」和「儲存類」相符。</block>
  <block id="ff099186f912c7abb21bcf68690c98d7" category="list-text">Trident會在相符的後端上配置儲存設備、並建立兩個物件：Kubernetes的「PeristentVolume」、告訴Kubernetes如何尋找、掛載及處理Volume、以及Trident中保留「PeristentVolume」與實際儲存設備之間關係的Volume。</block>
  <block id="6d2ae40bc02e88464563ae42ae22d54c" category="list-text">Kubernetes將「PeristentVolume Claim」連結到新的「PeristentVolume」。在執行的任何主機上、包含PeristentVolume的「PeristentVolume Claim」掛載的Pod。</block>
  <block id="490c1b0e3a604c81abb3db1b778ec07b" category="list-text">使用者使用指向Trident的「Volume SnapshotClass」建立現有的永久虛擬磁碟的「Volume Snapshot」。</block>
  <block id="9f4e11d34d158ebd365226367c8b15d9" category="list-text">Trident會識別與該PVc相關聯的磁碟區、並在其後端建立磁碟區快照。它也會建立「Volume SnapshotContent」、指示Kubernetes如何識別快照。</block>
  <block id="c6a606bdd6882cd42de13f2ba3614285" category="list-text">使用者可以使用「Volume Snapshot」作為來源來建立「PeristentVolume Claim」。</block>
  <block id="8ecb92f33c033b00fcf3c18e59c4b177" category="list-text">Trident會識別所需的快照、並執行建立「PeristentVolume」和「Volume」所需的相同步驟。</block>
  <block id="428895404a5e57e01a138a5df672d0fc" category="inline-link">持續磁碟區</block>
  <block id="173423532ed9a565a05f32db2c8f8172" category="admonition">如需進一步瞭解Kubernetes物件、我們強烈建議您閱讀<block ref="92dc8ed82beb7484ab6097a3e91b0deb" category="inline-link-rx"></block> Kubernetes文件的一節。</block>
  <block id="e21ffd3da11b6c6deee412bfb8695e30" category="section-title">Kubernetes PeristentVolume Claim物件</block>
  <block id="794a32773794ee6c545794c065d1a88b" category="paragraph">Kubernetes「PeristentVolume Claim」物件是Kubernetes叢集使用者所提出的儲存要求。</block>
  <block id="43cf8e1465c61efc8b1b9bf71aa9931c" category="paragraph">除了標準規格之外、Trident還可讓使用者指定下列Volume專屬附註、以覆寫您在後端組態中設定的預設值：</block>
  <block id="55f6611cb342565cf0f5002400f53a95" category="cell">註釋</block>
  <block id="1527fede1d561a899313c8cb3eb1e7bf" category="cell">Volume選項</block>
  <block id="db8a0bbeae97b94338c1b7a61e2a1ec3" category="cell">支援的驅動程式</block>
  <block id="f3780100617165ed98557e3a6d2be72d" category="cell">trident.netapp.io/fileSystem</block>
  <block id="44d4d4eb1f08d8eb29766160086f61dd" category="cell">檔案系統</block>
  <block id="59c54cb66816513690f886c6cbd45d7e" category="cell">ONTAP-SAN、solidfire-san、Eseries -iSCSI、ONTAP-san經濟型</block>
  <block id="979f70bf9da982ee97ac075df4f048c3" category="cell">trident.netapp.io/cloneFromPVC</block>
  <block id="b4ead50a5ca4f307f7d61da7763ad204" category="cell">cloneSourceVolume</block>
  <block id="cca7544fa2044ea81b43c1e0896bf58e" category="cell">ONTAP-NAS、ONTAP-SAN、solidfire-san、azure-NetApp-Files、GCP-CVS、 ONTAP-san經濟型</block>
  <block id="46ec89aa5290ead7b514dd5182caa0a7" category="cell">trident.netapp.io/splitOnClone</block>
  <block id="58c1c86186ef8de4f6e12d8f3aed8b64" category="cell">分岔OnClone</block>
  <block id="80f05e749a4f524e8c8a05fa19d5df0e" category="cell">ONTAP-NAS、ONTAP-SAN</block>
  <block id="d6f010e4b4bf9748dcaa34feb70188ce" category="cell">trident.netapp.io/protocol</block>
  <block id="81788ba0d7d02d81c063dbca621ba11b" category="cell">傳輸協定</block>
  <block id="100b8cad7cf2a56f6df78f171f97a1ec" category="cell">任何</block>
  <block id="e9898504ff0569325d48acaee7e9ced9" category="cell">trident.netapp.io/exportPolicy</block>
  <block id="61396290e72fa7d707996351c8815bd6" category="cell">ONTAP-NAS、ONTAP-NAS-經濟型、ONTAP-NAS- Flexgroup</block>
  <block id="2902d12b1fe6d9ef5bd1a3474f2356e9" category="cell">trident.netapp.io/snapshotPolicy</block>
  <block id="0a236e7685e50a59df980d0a30929d6c" category="cell">Snapshot原則</block>
  <block id="7f3bf2672240703dc69740ce11443cf2" category="cell">ONTAP-NAS、ONTAP-NAS-經濟型、ONTAP-NAS-flexgroup、ONTAP-SAN</block>
  <block id="6224177007fc13e9e0d3789985ed165a" category="cell">trident.netapp.io/snapshotReserve</block>
  <block id="bb0d75280f9b683f2f1f0767fd0aff9b" category="cell">Snapshot保留區</block>
  <block id="870594bba77423ccae9ad70861e02951" category="cell">ONTAP-NAS、ONTAP-NAs-flexgroup、ONTAP-SAN、GCP-CVS</block>
  <block id="1cb43054bed661d8c8457ddbb43e1b1b" category="cell">trident.netapp.io/snapshotDirectory</block>
  <block id="1ae33c448502ac3d326593aee304c21f" category="cell">Snapshot目錄</block>
  <block id="ec1739ebad429a70f25efc292c347f8e" category="cell">trident.netapp.io/unixPermissions</block>
  <block id="69d900d222446aab8591b45a7363c9e7" category="cell">trident.netapp.io/blockSize</block>
  <block id="480d1b61a0432d1319f7504a3d7318dd" category="cell">區塊大小</block>
  <block id="c0d2a793e71b152662b3e8cd2da00620" category="cell">solidfire-san</block>
  <block id="fc5f8320f80474f09bdd1e3c3849123e" category="paragraph">如果建立的PV具有「刪除」回收原則、則當PV釋出時（亦即使用者刪除PVc時）、Trident會同時刪除PV和備用Volume。如果刪除動作失敗、Trident會將PV標示為這樣、並定期重試該作業、直到成功或手動刪除PV為止。如果PV使用「+Retain +」原則、Trident會忽略它、並假設系統管理員會從Kubernetes和後端進行清理、以便在移除之前備份或檢查磁碟區。請注意、刪除PV並不會導致Trident刪除背板Volume。您應該使用REST API（「tridentctl」）將其移除。</block>
  <block id="5dad99bb31feaed11fecbe29cf682e51" category="paragraph">Trident支援使用csi規格建立Volume Snapshot：您可以建立Volume Snapshot、並將其作為資料來源來複製現有的PVCS。如此一來、PV的時間點複本就能以快照形式呈現給Kubernetes。快照可用來建立新的PV。請參閱「+隨需磁碟區快照+」、瞭解這項功能的運作方式。</block>
  <block id="2553df6c9f03b727070656d38019ad3e" category="paragraph">Trident也提供「cloneFromPVc」和「shplitOnClone」註釋、以建立複本。您可以使用這些附註來複製一個PVC,而不需要使用csi實作（在Kubernetes 1.13及更早版本上）或Kubernetes版本不支援beta Volume Snapshot（Kubernetes 1.16及更早版本）。請記住、Trident 19.10支援從PVc複製的csi工作流程。</block>
  <block id="91adc865e5be78d779fd6aa38481ca58" category="admonition">您可以將「cloneFromPVc」和「shplitOnClone」註解搭配「csi Trident」以及傳統的非csi前端使用。</block>
  <block id="96e0288ecc3c91f97de46420e70a4f8f" category="paragraph">以下是一個範例：如果使用者已經有一個名為「mysql"的PVC,則使用者可以使用「trident.netapp.io/cloneFromPVC: mySQL」之類的註解來建立一個名為「mysqlclone」的新PVC.使用此註釋集、Trident會複製對應於mySQL PVc的磁碟區、而非從頭開始配置磁碟區。</block>
  <block id="ff0fa770e22db25a156c5e2d7f017283" category="paragraph">請考量以下幾點：</block>
  <block id="5faae6e509c8aecf9f8815a4ceef02b3" category="list-text">我們建議您複製閒置的Volume。</block>
  <block id="f89d76e06e88814705882a1faad838fb" category="list-text">一個PVc及其複本應位於相同的Kubernetes命名空間中、且具有相同的儲存類別。</block>
  <block id="f769a6b54b1d1476b6628ebd1c4b98c4" category="list-text">有了「ONTAP-NAS」和「ONTAP-SAN」驅動程式、可能需要將「trident.netapp.io/splitOnClone`」標註與「trident.netapp.io/cloneFromPVC`」一起設定。Trident將trident.netapp.io/splitOnClone`設為「true」、將複製的磁碟區從父磁碟區分割出來、因此將複製的磁碟區的生命週期與其父磁碟區完全分離、而犧牲部分儲存效率。如果不將「trident.netapp.io/splitOnClone`」設定為「假」、則會減少後端的空間使用量、而犧牲父磁碟區與複製磁碟區之間的相依性、使父磁碟區無法刪除、除非先刪除複本。分割實體複製是合理的做法、是將空的資料庫磁碟區複製到磁碟區及其實體複製環境、以大幅分散差異、而非ONTAP 受益於由NetApp提供的儲存效率。</block>
  <block id="83a9930ebb180c904bf2e71e27928287" category="paragraph">「shample-input」目錄包含可與Trident搭配使用的PVc定義範例。請參閱Trident Volume物件、以取得與Trident Volume相關的參數和設定完整說明。</block>
  <block id="a02475a5207a446cd0b3607b0b24c079" category="section-title">Kubernetes PersistentVolume物件</block>
  <block id="6cb5412cc2fe8210c4d14d6d6b08ab79" category="paragraph">Kubernetes「PersistentVolume」物件代表Kubernetes叢集可用的儲存設備。它的生命週期與使用它的Pod無關。</block>
  <block id="292289b7334983e53d9fb9bd00d30820" category="admonition">Trident會建立「PeristentVolume」物件、並根據其所配置的磁碟區、自動在Kubernetes叢集上登錄。您不需要自行管理。</block>
  <block id="443f09ca4d0d1cc13b5baa064b90c0b7" category="paragraph">當您建立參照Trident型「TorageClass」的PVc時、Trident會使用對應的儲存類別來配置新的Volume、並針對該Volume登錄新的PV。在設定已配置的Volume和對應的PV時、Trident遵循下列規則：</block>
  <block id="b27c91fe87605abbb0d5240430518a1c" category="list-text">Trident會產生Kubernetes的PV名稱、以及用來配置儲存設備的內部名稱。在這兩種情況下、都是確保名稱在其範圍內是唯一的。</block>
  <block id="9c2f88a5c4297bd88ead0cd6314fe886" category="list-text">磁碟區的大小會盡可能接近在室早中所要求的大小、不過視平台而定、磁碟區可能會四捨五入至最接近的可分配數量。</block>
  <block id="dcbd1c3ef9cd1dce444a22a9db5994d6" category="section-title">Kubernetes StorageClass物件</block>
  <block id="0d35625a483152791f4e2d0b751a09cc" category="paragraph">Kubernetes的「torageClass」物件是以名稱在「PeristentVolume Claims」中指定、以一組內容來配置儲存設備。儲存類別本身會識別要使用的資源配置程式、並根據資源配置程式所瞭解的方式來定義該組內容。</block>
  <block id="f7738d717849274e5992d460fd2c0a75" category="paragraph">這是需要由系統管理員建立及管理的兩個基本物件之一。另一個是Trident後端物件。</block>
  <block id="e51377a773f4713e536b061eaa2d4b04" category="paragraph">使用Trident的Kubernetes「torageClass」物件看起來像這樣：</block>
  <block id="39edc8618b50008d4cb2050414d6921f" category="paragraph">這些參數是Trident專屬的、可告訴Trident如何為類別配置Volume。</block>
  <block id="b16da8ed7f6c8cce3011dc2b6c7bd1a4" category="paragraph">儲存類別參數包括：</block>
  <block id="f2bbdf9f72c085adc4d0404e370f0f4c" category="cell">屬性</block>
  <block id="b651efdb98a5d6bd2b3935d0c3f4a5e2" category="cell">必要</block>
  <block id="736b91750e516139acc13c5eb6564f92" category="cell">屬性</block>
  <block id="59a1e7292a0114529fb1b3401b37bc28" category="cell">map[stric]字串</block>
  <block id="7fa3b767c460b54a2be4d49030b349c7" category="cell">否</block>
  <block id="1b40216e6fe613bd013bf8710182e650" category="cell">請參閱以下「屬性」一節</block>
  <block id="c614017642b6cfd9e6a25c7df122d917" category="cell">storagePools</block>
  <block id="b8f32852327d2ffce86ae3ead4fdfb52" category="cell">map[stringList</block>
  <block id="bdd0ddb870ed9de6f6e7d3a75200e9f7" category="cell">將後端名稱對應至中的儲存資源池清單</block>
  <block id="145d1b89a9f9ed8bdc16d1f7a814cace" category="cell">其他StoragePools</block>
  <block id="6907a73ad9068ddf5f99d022102220bb" category="cell">將後端名稱對應至中的儲存資源池清單</block>
  <block id="7df974d787ead594df017a11672f2f0e" category="cell">排除StoragePools</block>
  <block id="99ba77776c83983f5ecbd2b51f2b43ef" category="cell">將後端名稱對應至中的儲存資源池清單</block>
  <block id="f74d4b2b456fb453c0980710290f66eb" category="paragraph">儲存屬性及其可能值可分類為儲存資源池選擇屬性和Kubernetes屬性。</block>
  <block id="2fdf10f3f64b631cd3a137740de02f8b" category="section-title">儲存資源池選擇屬性</block>
  <block id="1f5912cd581dba393d5eecc43059adf4" category="paragraph">這些參數決定應使用哪些Trident託管儲存資源池來配置特定類型的磁碟區。</block>
  <block id="c82a6100dace2b41087ba6cf99a5976a" category="cell">價值</block>
  <block id="6bb24468956384c482a8b5a901fb6383" category="cell">優惠</block>
  <block id="15c2d85f1fae22a3c3a0594510a1f611" category="cell">申請</block>
  <block id="7aa57840938d59b415c1e10dcd1f7173" category="cell">支援者</block>
  <block id="0e72be2e13bf8a2ff8078d3435e5aa7c" category="cell">媒體1^</block>
  <block id="b45cffe084dd3d20d928bee85e7b0f21" category="cell">字串</block>
  <block id="9ccd7f94313a98beb95801927907a0ab" category="cell">HDD、混合式、SSD</block>
  <block id="9bf3032f6854fb376cd8e3e92e11b077" category="cell">資源池包含此類型的媒體、混合式表示兩者</block>
  <block id="5c79c761bae4c27e96c04e54d1da1e91" category="cell">指定的媒體類型</block>
  <block id="c9cb5e737e2746339fd0b462332c8740" category="cell">ONTAP-NAS、ONTAP-NAS-經濟型、ONTAP-NAS-flexgroup、ONTAP-SAN、solidfire-san</block>
  <block id="b713baf75bcf13859037b5274d27d4b8" category="cell">資源配置類型</block>
  <block id="6026fbd9abd05590949de220154e3262" category="cell">纖薄、厚實</block>
  <block id="3064025fe3541bec9942e14fcaedfab7" category="cell">Pool支援此資源配置方法</block>
  <block id="cf65591e3da90317fc132ea7464105d8" category="cell">指定的資源配置方法</block>
  <block id="ef2577df8468ab39e993a1938ba7f38d" category="cell">厚：全ONTAP 系列支援iSCSI；薄型：全ONTAP 系列支援整合式SAN</block>
  <block id="55b56fb238360663afa6230ad82e74a0" category="cell">後端類型</block>
  <block id="91511a1d98e80c77f75faa79a0e82734" category="paragraph">ONTAP-NAS、ONTAP-NAS-經濟型、ONTAP-NAS-flexgroup、ONTAP-SAN、solidfire-san、 Eseries - iSCSI、GCP-CVS、azure-NetApp-Files、ONTAP-san經濟型</block>
  <block id="0e1201d4d96df2d9d03c9c66b90874a1" category="cell">集區屬於此類型的後端</block>
  <block id="c4efe19137f43450149d48fddbab6c28" category="cell">指定後端</block>
  <block id="a04622349b3ede0d4176ca2c2e161763" category="cell">所有驅動程式</block>
  <block id="695633290d050f31cec0c9d4bd4a57fe" category="cell">快照</block>
  <block id="c506ff134babdd6e68ab3e6350e95305" category="cell">布爾</block>
  <block id="ac1ffb15effdc77a86029972670d022f" category="cell">對、錯</block>
  <block id="4ac43bef181074fbd4a1f3620b46f77f" category="cell">集區支援具有快照的磁碟區</block>
  <block id="13410bff9f7871113a6af273e2a1b97f" category="cell">已啟用快照的Volume</block>
  <block id="33dece0bdda0f88a645c739f3714c038" category="cell">ONTAP-NAS、ONTAP-SAN、Solidfire-SAN、GCP-CVS</block>
  <block id="bc3832c405ec6cb9c831849328240f3b" category="cell">複製</block>
  <block id="609d32aa243917905f282544b543752a" category="cell">資源池支援複製磁碟區</block>
  <block id="bcb81802de31cf9c717de3c1d6c2f610" category="cell">已啟用複本的Volume</block>
  <block id="5bdf74912a51c34815f11e9a3d20b609" category="cell">加密</block>
  <block id="5f2f2cc138a8bc7067c7f61ab4db0f4d" category="cell">資源池支援加密磁碟區</block>
  <block id="0bda31a93b84fd2b45a90df39c4c8049" category="cell">已啟用加密的Volume</block>
  <block id="dcc09b4a72e31323b652676ce4677771" category="cell">ONTAP-NAS、ONTAP-NAS-經濟型、ONTAP-NAS- FlexGroups、ONTAP-SAN</block>
  <block id="79073619fba8242703524f16870ff858" category="cell">IOPS</block>
  <block id="fa7153f7ed1cb6c0fcf2ffb2fac21748" category="cell">內部</block>
  <block id="86e5d65893929e5d38b4bdcb9fb48ecd" category="cell">正整數</block>
  <block id="bf57d1db8292b2855fa998a86562cfa7" category="cell">集區能夠保證此範圍內的IOPS</block>
  <block id="342a7ce5bb7debc6ba84dc2a3bced587" category="cell">Volume保證這些IOPS</block>
  <block id="895f3d78c77292d9761bdabdc3cf0c99" category="paragraph">^1^：ONTAP Select 不受支援</block>
  <block id="5b3c68bde0b3658758a8ebf47ec6abf1" category="paragraph">在大多數情況下、所要求的值會直接影響資源配置、例如、要求完整資源配置會導致資源配置較為密集的Volume。不過、元素儲存資源池會使用其提供的IOPS下限和上限來設定QoS值、而非所要求的值。在此情況下、要求的值僅用於選取儲存資源池。</block>
  <block id="311fa7e17587a62a6fdcb110253feed7" category="paragraph">理想情況下、您可以單獨使用「屬性」來建構儲存設備的品質、以滿足特定類別的需求。Trident會自動探索並選取符合您指定「屬性」的_all_儲存集區。</block>
  <block id="d0c865b74e0c4b4b387506e9e95d22b2" category="paragraph">如果您發現自己無法使用「屬性」來自動選取適合某個類別的資源池、您可以使用「儲存池」和「其他儲存池」參數來進一步精簡資源池、甚至選取特定的資源池集區。</block>
  <block id="06a87a25fa98442cf561762851213f7e" category="paragraph">您可以使用「儲存池」參數、進一步限制符合任何指定「屬性」的集區集區集區。換句話說、Trident會使用由「屬性」和「儲存庫」參數所識別的資源池交會來進行資源配置。您可以單獨使用參數、也可以同時使用兩者。</block>
  <block id="0c66a737e57eb6ac0885d2ba6d87cc12" category="paragraph">您可以使用「addionalStoragePools」參數來擴充Trident用來資源配置的資源池集區集區集區、而不論「attributes」和「scoragePools」參數所選取的任何資源池為何。</block>
  <block id="2ed95c63c6e58641d710e098e7e23154" category="paragraph">您可以使用「排除StoragePools」參數來篩選Trident用於資源配置的資源池集區集區。使用此參數會移除任何相符的集區。</block>
  <block id="9f8bfd75f7eb5b95503bb0abedf83b40" category="paragraph">在「儲存池」和「其他儲存池」參數中、每個項目的格式均為「&lt;backender&gt;:&lt;storagePoollist&gt;'」、其中「&lt;storagePoollist&gt;'」是以逗號分隔的儲存池清單、用於指定的後端。例如、「addionalStoragePools」的值可能會像是「ontapnas_192.168.1.100:solidgr1、aggr2、aggrfire、192.168.1.101：Bronze」。這些清單接受後端值和清單值的regex值。您可以使用「tridentctl Get backend」來取得後端及其資源池的清單。</block>
  <block id="c087dddd46fcf0fbbf390abeff2216c3" category="section-title">Kubernetes屬性</block>
  <block id="d05956159ee82aafaaacfe08d33d3be6" category="paragraph">這些屬性在動態資源配置期間、不會影響Trident選擇儲存資源池/後端。相反地、這些屬性只會提供Kubernetes持續磁碟區所支援的參數。工作節點負責檔案系統建立作業、可能需要檔案系統公用程式、例如xfsprogs。</block>
  <block id="0e6ac0d7fca9c59e6545312a071555b6" category="cell">相關驅動因素</block>
  <block id="ae6b2a160dd2fafdee385c348edee0c1" category="cell">Kubernetes版本</block>
  <block id="7cfbb6f07899c8071ff38e69dca190e2" category="cell">FSType</block>
  <block id="64b6d80cc167d5c657b60054dbe396ee" category="cell">ext4、ext3、xfs等</block>
  <block id="7928a56d4874d982a06a59e3f30f6935" category="cell">區塊磁碟區的檔案系統類型</block>
  <block id="55f3fc550e9a03a95334f3a19f0920cc" category="cell">solidfire-san、ontap、nap、nap、nas經濟、ontap、nas、flexgroup、ontap、san、 ONTAP-san經濟型、E系列-iSCSI</block>
  <block id="b1c94ca2fbc3e78fc30069c8d0f01680" category="cell">全部</block>
  <block id="6add71a247c8f4513060920be14857bc" category="cell">owVolume擴充</block>
  <block id="84e2c64f38f78ba3ea5c905ab5a2da27" category="cell">布林值</block>
  <block id="675e3f37a9adfd7ab6433906c490fa06" category="cell">啟用或停用對增加PVc大小的支援</block>
  <block id="2e647c10640a301eccdc45d7ad72507d" category="cell">ONTAP-NAS、ONTAP-NAS-經濟型、ONTAP-NAS-flexgroup、ONTAP-SAN、ONTAP-san經濟型、 solidfire-san、gcp-CVS、azure-netapp檔案</block>
  <block id="c791531450eeeb073b30215d9c306a00" category="cell">1.11+</block>
  <block id="086b513e7d83c4cf32a8bd3550679276" category="cell">Volume BindingMode</block>
  <block id="fd656a4f359aa12808a6d0ceb5792342" category="cell">立即、WaitForFirst消費者</block>
  <block id="5e7777e1f9cfa3a93159ee44cf3f1f5a" category="cell">選擇何時進行磁碟區繫結和動態資源配置</block>
  <block id="9c26b95cff78678b07389bb95544c7b6" category="cell">1.17以上</block>
  <block id="8264769021597389583b0a7d1fa7e076" category="inline-link-macro">Kubernetes：設定Pod或Container的安全內容</block>
  <block id="dca8809f382a96564d64ae1525b39048" category="list-text">「FSType」參數用於控制SAN LUN所需的檔案系統類型。此外、Kubernetes也會在儲存類別中使用「FSType」表示檔案系統存在。只有在設定「FSType」時、才能使用Pod的「fsGroup」安全內容來控制Volume擁有權。請參閱 <block ref="7940a62969e5aeae7f6e32b04e7a11e3" category="inline-link-macro-rx"></block> 如需使用「fsGroup」內容設定磁碟區所有權的總覽。Kubernetes只會在下列情況下套用「fsGroup」值：</block>
  <block id="6dd29ca7439e52dcf2fbc569066b3d67" category="list-text">「FSType」是在儲存類別中設定的。</block>
  <block id="45d2174daba36b76955e69d2eddf26ca" category="list-text">PVc存取模式為rwo。</block>
  <block id="ba5b62efad4f90a8f4bb806cba4a3ea4" category="paragraph">對於NFS儲存驅動程式、檔案系統已存在做為NFS匯出的一部分。為了使用「fsGroup」、儲存類別仍需指定「FSType」。您可以將其設定為「NFS」或任何非null值。</block>
  <block id="4811aaaf5eedea1ea9f703353903b5b5" category="list-text">請參閱 <block ref="c35b155baa39b6aa36cf9bc59eea88f3" category="inline-link-macro-rx"></block> 如需磁碟區擴充的詳細資料、</block>
  <block id="2435c5eb0d842c13f635d4b1d6667a52" category="list-text">Trident安裝程式套裝組合提供多個範例儲存類別定義、可與Trident搭配使用、位於「sham-INPUT /儲存設備類別-*。yaml」。刪除Kubernetes儲存類別也會刪除對應的Trident儲存類別。</block>
  <block id="6b218cef3794c1b32702bd37753ce9ef" category="section-title">Kubernetes Volume SnapshotClass物件</block>
  <block id="65d18b5db5d5f35e4ddc5c696687d1bd" category="paragraph">Kubernetes的「Volume SnapshotClass」物件類似於「儲存類別」。它們有助於定義多種儲存類別、並由Volume Snapshot參考、以將快照與所需的Snapshot類別建立關聯。每個Volume Snapshot都與單一Volume Snapshot類別相關聯。</block>
  <block id="031e09713b698739db52cb150ef97605" category="paragraph">系統管理員應定義「Volume SnapshotClass」、以建立快照。建立具有下列定義的Volume Snapshot類別：</block>
  <block id="879cd061c6bf448cd6fc39dd56947611" category="paragraph">對Kubernetes而言、「driver」是指Trident處理「Cig-snapClass」類別的Volume快照要求。「刪除原則」指定必須刪除快照時要採取的動作。當「刪除原則」設定為「刪除」時、刪除快照時、就會移除儲存叢集上的Volume Snapshot物件和基礎Snapshot。或者、將其設為「保留」、表示保留「Volume SnapshotContent」和實體快照。</block>
  <block id="4fa3f62cc9d9b7064a0d4b93d16a3636" category="section-title">Kubernetes Volume Snapshot物件</block>
  <block id="7ba558df52a052235cf288011e5d667c" category="paragraph">Kubernetes「Volume Snapshot」物件是建立磁碟區快照的要求。就像使用者針對磁碟區所提出的要求一樣、磁碟區快照是使用者建立現有虛擬磁碟快照的要求。</block>
  <block id="f67af493d1fd83b472d5f27307b2f3d9" category="paragraph">當磁碟區快照要求出現時、Trident會自動管理後端磁碟區的快照建立、並建立獨特的「Volume SnapshotContent」物件來公開快照。您可以從現有的PVCS建立快照、並在建立新的PVCS時、將快照作為DataSource使用。</block>
  <block id="53847015682974d066a919b1b45a44a5" category="admonition">Volume Snapshot的生命週期與來源PVCs無關：即使刪除來源PVCs、快照仍會持續存在。刪除具有相關快照的永久虛擬磁碟時、Trident會將此永久虛擬磁碟的備份磁碟區標示為*刪除*狀態、但不會將其完全移除。刪除所有相關的快照時、即會移除該磁碟區。</block>
  <block id="c1c597a8c6353c0a951a61e538d2f143" category="section-title">Kubernetes Volume SnapshotContent物件</block>
  <block id="e562bdcf97dce6973a736651f45eb054" category="paragraph">Kubernetes「Volume SnapshotContent」物件代表從已配置的磁碟區擷取的快照。它類似於「PersistentVolume」、代表儲存叢集上已配置的快照。與「PeristentVolume Claim」和「PeristentVolume」物件類似、建立快照時、「Volume SnapshotContent」物件會維持一對一的對應、以對應「Volume Snapshot」物件、該物件已要求建立快照。</block>
  <block id="ca8035550d447392debfcaeb62855bd3" category="admonition">Trident會建立「Volume SnapshotContent」物件、並根據其所配置的磁碟區、自動在Kubernetes叢集上登錄。您不需要自行管理。</block>
  <block id="af741aec1c66e51c00d35a38f92471de" category="paragraph">「Volume SnapshotContent」物件包含可唯一識別快照的詳細資料、例如「快照資料」。此「快照處理」是PV名稱與「Volume SnapshotContent」物件名稱的獨特組合。</block>
  <block id="b22c73e808eef321ee9941ec2e58b64f" category="paragraph">當快照要求出現時、Trident會在後端建立快照。建立快照之後、Trident會設定「Volume SnapshotContent」物件、並將快照公開給Kubernetes API。</block>
  <block id="ca106d43cc3f2b8c6ae43c99a3c529d7" category="section-title">Kubernetes Custom資源 定義物件</block>
  <block id="7c43d52062b795d2d8e7f33b9dbbf671" category="paragraph">Kubernetes自訂資源是Kubernetes API中由系統管理員定義的端點、用於將類似物件分組。Kubernetes支援建立自訂資源來儲存物件集合。您可以執行「kubecl Get crds」來取得這些資源定義。</block>
  <block id="09d4c17e4e0e002375326eee41d0f77f" category="paragraph">自訂資源定義（CRD）及其相關的物件中繼資料會由Kubernetes儲存在其中繼資料儲存區中。如此一來、您就不需要另外建立Trident的儲存區。</block>
  <block id="798d49964270b9d2f638171af7258d00" category="paragraph">從19.07版開始、Trident使用許多「CustomResourceDefinition」物件來保留Trident物件的身分、例如Trident後端、Trident儲存類別和Trident Volume。這些物件由Trident管理。此外、「csi Volume Snapshot」架構也引進了定義Volume快照所需的部分CRD。</block>
  <block id="9f59afd5e4687b9960361128f049dae4" category="paragraph">CRD是Kubernetes建構。上述資源的物件是由Trident所建立。例如、當使用「tridentctl」建立後端時、Kubernetes會建立一個對應的「tridentbackend」CRD物件供其使用。</block>
  <block id="7cdfd680fe492e028cde251c38475469" category="paragraph">以下是Trident客戶需求日的幾點重點：</block>
  <block id="adecfe476427253e9c680a7c5150a9cc" category="list-text">安裝Trident時、會建立一組客戶需求日、並可像使用任何其他資源類型一樣使用。</block>
  <block id="b54c0b51e5e24cea2035a3e3624c5719" category="list-text">從舊版Trident（使用「etcd」來維護狀態）升級時、Trident安裝程式會從「etcd」金鑰值資料儲存區移轉資料、並建立對應的CRD物件。</block>
  <block id="c4b35352cbf7a52a9444a610687067f8" category="inline-link-macro">解除安裝Trident</block>
  <block id="14beb70da78e5a36efe980226d286a53" category="list-text">使用「tridentctl uninstall」命令解除安裝Trident時、會刪除Trident Pod、但不會清除建立的CRD。請參閱 <block ref="91f30c1df5df3b507b6d93916b3fade3" category="inline-link-macro-rx"></block> 瞭解如何徹底移除Trident並從頭重新設定。</block>
  <block id="514e780152cf1b5087027f7c70643070" category="section-title">Trident StorageClass物件</block>
  <block id="193c267230acf55be171a6a179560847" category="paragraph">Trident會為Kubernetes「torageClass」物件建立相符的儲存類別、並在其資源配置程式欄位中指定「csi.trident.netapp.io`/`netapp.io/trident`」。儲存類別名稱與Kubernetes「torageClass」物件的名稱相符。</block>
  <block id="64cf33bfeab6c6bd8aa626b86fda9cbd" category="admonition">使用Kubernetes、當Kubernetes「torageClass」以Trident做為資源配置程式登錄時、就會自動建立這些物件。</block>
  <block id="51fa0a833f47d8f00ee2677c6fa7b075" category="paragraph">儲存類別包含一組磁碟區需求。Trident會將這些需求與每個儲存資源池中的屬性相符；如果符合、則該儲存資源池是使用該儲存類別來配置磁碟區的有效目標。</block>
  <block id="04d84bba5a5e103ae9c192c03a7ad2f3" category="paragraph">您可以使用REST API建立儲存類別組態、以直接定義儲存類別。不過、在Kubernetes部署中、我們預期在登錄新的Kubernetes「torageClass」物件時、會建立這些物件。</block>
  <block id="21283df20640a21f468122a427ef1bfc" category="section-title">Trident後端物件</block>
  <block id="3c244b984a2188556c1115a5a27dbe1b" category="paragraph">後端代表儲存供應商、其中Trident會配置磁碟區；單一Trident執行個體可管理任何數量的後端。</block>
  <block id="d71c5fad4769c19422c07158e24510ba" category="admonition">這是您自己建立和管理的兩種物件類型之一。另一個是Kubernetes的「torageClass」物件。</block>
  <block id="6e8c08b737e50e4dc89c4bd33b8ea726" category="paragraph">如需如何建構這些物件的詳細資訊、請參閱後端組態。</block>
  <block id="af5e532a14b6a8c1f094b8532420e8d1" category="section-title">Trident StoragePool物件</block>
  <block id="54fd1dc39c3eecd913b4c9140522996c" category="paragraph">儲存資源池代表可在每個後端上進行資源配置的不同位置。就支援而言ONTAP 、這些項目對應於SVM中的集合體。對於NetApp HCI / SolidFire、這些服務會對應到系統管理員指定的QoS頻段。就架構而言、這些項目對應於雲端供應商所在的地區。Cloud Volumes Service每個儲存資源池都有一組獨特的儲存屬性、可定義其效能特性和資料保護特性。</block>
  <block id="4ab1440e71a70a97c4966bcc0095f02b" category="paragraph">與此處的其他物件不同、儲存資源池候選項目一律會自動探索及管理。</block>
  <block id="d2a63f6dfdfef268198f3e6e304ab9ba" category="section-title">Trident Volume物件</block>
  <block id="894765102686902c6acc3024e5bdb9bd" category="paragraph">Volume是資源配置的基本單位、包含NFS共用和iSCSI LUN等後端端點。在Kubernetes中、這些內容直接對應到「PersistentVolumes」。建立磁碟區時、請確定它有一個儲存類別、決定該磁碟區可以配置的位置及大小。</block>
  <block id="2e53db54827c8c05b7bfe9cb31f299d9" category="admonition">在Kubernetes中、會自動管理這些物件。您可以檢視這些資源、以查看資源配置的Trident內容。</block>
  <block id="22fcc98910d0241e9835f502b7cb2398" category="admonition">刪除具有相關快照的PV時、對應的Trident Volume會更新為*刪除*狀態。若要刪除Trident磁碟區、您應該移除該磁碟區的快照。</block>
  <block id="05353bc86910df31b2da9c8d3d26aad1" category="paragraph">Volume組態會定義已配置磁碟區應具備的內容。</block>
  <block id="ce9af1e3f0493eb7d5ffdf584ed763ba" category="cell">Trident API版本（「1」）</block>
  <block id="b068931cc450442b63f5b3d276ea4297" category="cell">名稱</block>
  <block id="a6105c0a611b41b08f1209506350279e" category="cell">是的</block>
  <block id="017dbd2b0a2195c3e8052cdff67bad39" category="cell">要建立的Volume名稱</block>
  <block id="78ec9b60245b46a4f05158076962ace9" category="cell">storageClass</block>
  <block id="fa00f346deccdbebef2b3cc0702d41de" category="cell">配置Volume時使用的儲存類別</block>
  <block id="f7bd60b75b29d79b660a2859395c1a24" category="cell">尺寸</block>
  <block id="264c52ca068dfed30f5826bb054839f4" category="cell">要配置的磁碟區大小（以位元組為單位）</block>
  <block id="4f18882934f0472b4bfa32928bf92f14" category="cell">要使用的傳輸協定類型；「檔案」或「區塊」</block>
  <block id="252c6d364cc1a0437939a4f01b0717ae" category="cell">內部名稱</block>
  <block id="2857a43e58983276d059c0e6e2fcb0e9" category="cell">儲存系統上的物件名稱；由Trident產生</block>
  <block id="051fb2c3f62667c87a197ae412a4dbeb" category="cell">Sname（NAS、SAN）&amp; S--*：要複製的磁碟區名稱ONTAP SolidFire</block>
  <block id="e94d46d7c89bcb7e6ac2e2df4d21bafb" category="cell">例（NAS、SAN）：從父實體分割複本ONTAP</block>
  <block id="819549a86d14e849e1d0042c9156d781" category="cell">S--*：快照原則ONTAP</block>
  <block id="e38882545bfedafc7e8ec5973b2e6dd8" category="cell">Sing-*：保留給快照的磁碟區百分比ONTAP</block>
  <block id="fc86db1233bfa77d5143dcaae9842cb1" category="cell">ONTAP-NAS*：要使用的匯出原則</block>
  <block id="48e1d8180a61943f438c259b2b6715f8" category="cell">ONTAP-NAS*：快照目錄是否可見</block>
  <block id="3f7c94eec4bbf43962e1667f5a334469" category="cell">ONTAP-NAS*：初始UNIX權限</block>
  <block id="4b2d5d83aef608a3fb59ec6eda8bea26" category="cell">S--*：區塊/區段大小SolidFire</block>
  <block id="62fe71ae4f6a04a6937feb48ba5dc4f4" category="cell">檔案系統類型</block>
  <block id="c12963ed77d398c8f97e09be58a20fed" category="paragraph">Trident在建立磁碟區時會產生「內部名稱」。這包括兩個步驟。首先、它會將儲存前置詞（預設的「Trident」或後端組態中的前置詞）預先加上磁碟區名稱、以「&lt;prefix&gt;-&lt;volume名稱&gt;」格式命名。然後、它會繼續清理名稱、取代後端不允許的字元。對於後端、它會以底線取代連字號（因此內部名稱會變成「&lt;prefix&gt;_&lt;volume名稱&gt;」）ONTAP 。對於元素後端、它會以連字號取代底線。</block>
  <block id="49539689cebb34166a417b3b666818e5" category="paragraph">您可以使用Volume組態、使用REST API直接配置磁碟區、但在Kubernetes部署中、我們預期大多數使用者都會使用標準的Kubernetes「PeristentVolume Claim」方法。Trident會自動建立此Volume物件、做為資源配置程序的一部分。</block>
  <block id="cbd341b63adaa47fcb248e55d33f6eae" category="section-title">Trident Snapshot物件</block>
  <block id="a1b3787bbd275b7ed5812d022dd36932" category="paragraph">快照是磁碟區的時間點複本、可用來配置新的磁碟區或還原狀態。在Kubernetes中、這些物件會直接對應到「Volume SnapshotContent」物件。每個快照都與一個Volume相關聯、該磁碟區是快照資料的來源。</block>
  <block id="cdf5c8d3dd31e49b82a5b3e2c4a65280" category="paragraph">每個「napshot」物件都包含下列內容：</block>
  <block id="27118326006d3829667a400ad23d5d98" category="cell">字串</block>
  <block id="de73fbae2864dd61c921cf0648a9717a" category="cell">Trident Snapshot物件的名稱</block>
  <block id="8e744456fb3d02d69442038d3e771460" category="cell">儲存系統上Trident Snapshot物件的名稱</block>
  <block id="617a43eb0446f84414df73cce2997fa1" category="cell">Volume名稱</block>
  <block id="b58c8ff1e837af6dafa971bf3d320646" category="cell">為其建立快照的持續Volume名稱</block>
  <block id="2c2aed4b417a0f9c189d7ad6414ae28c" category="cell">Volume內部名稱</block>
  <block id="db1a117103c348ebaec41f9e249554c3" category="cell">儲存系統上相關Trident Volume物件的名稱</block>
  <block id="73f3d5934fdd36989f24cbae94ab423b" category="paragraph">當Kubernetes「Volume Snapshot」物件要求建立時、Trident會在備份儲存系統上建立Snapshot物件。此快照物件的「內部名稱」是將前置詞「sfapshot-」與「Volume Snapshot」物件的「UID」（例如、「sfapshot-e8d8a0ca-9826-11e9-9807-525400f3f660」）結合在一起產生的。「Volume Name」（Volume名稱）和「Volume InternalName」（磁碟區內部名稱）會透過取得備用磁碟區的詳細資料來填入資料。</block>
  <block id="a1582c89f8e85f372306a05848eafb68" category="summary">NetApp儲存產品組合可與Kubernetes叢集的許多不同層面整合、提供進階資料管理功能、強化Kubernetes部署的功能、功能、效能及可用度。</block>
  <block id="9944b094c4079f770fabc4ae629feb0f" category="doc">與Kubernetes整合的NetApp產品</block>
  <block id="3cce5f3eaf76e098ba8e28f7bbba3f92" category="section-title">Astra</block>
  <block id="293b14f82e58fc3efc27bf18185a38c8" category="paragraph"><block ref="35a6b548833df39b8bbc748563b1938b" category="inline-link-rx"></block> 讓企業更輕鬆地管理、保護及搬移在公有雲內部及內部部署的Kubernetes上執行的資料豐富的容器化工作負載。Astra採用NetApp在公有雲和內部部署環境中備受肯定且廣泛的儲存產品組合Trident、提供持續的容器儲存設備。此外、它還提供一組豐富的進階應用程式感知資料管理功能、例如Snapshot、備份與還原、活動記錄、以及資料保護、災難/資料恢復、資料稽核、以及Kubernetes工作負載的移轉使用案例的主動複製。</block>
  <block id="51fd2fc669e51c6870f1148623240f69" category="paragraph">NetApp的多重傳輸協定、統一化儲存作業系統可為任何應用程式提供進階資料管理功能。ONTAP支援所有Flash、混合式或全硬碟組態的系統、可提供多種不同的部署模式、包括工程設計硬體（英文版）、白箱（英文版）和僅雲端（英文版）ONTAP FAS AFF ONTAP Select Cloud Volumes ONTAP 。</block>
  <block id="cbb7697b4f6f189240d043ff70ca133c" category="admonition">Trident支援上述ONTAP 所有的功能齊全的部署模式。</block>
  <block id="5c04ffbd0c110bf7b37d6b95eb756b75" category="paragraph"><block ref="700b45b9fca207b66f675c8d5dfb073b" category="inline-link-rx"></block> 是一款純軟體的儲存應用裝置、可在ONTAP 雲端上執行功能完善的資料管理軟體。您可以使用Cloud Volumes ONTAP 支援功能來執行正式作業工作負載、災難恢復、DevOps、檔案共享和資料庫管理。它提供儲存效率、高可用度、資料複寫、資料分層和應用程式一致性、將企業儲存設備延伸至雲端。</block>
  <block id="04452ff4732608f62e53d20e4b8f4c92" category="paragraph"><block ref="6a2736fcbb5755dd03d114a5153506eb" category="inline-link-rx"></block> 是一項完整管理的AWS服務、可讓客戶啟動及執行採用NetApp ONTAP 的一套資訊儲存作業系統的檔案系統。FSX for ONTAP VMware可讓客戶運用熟悉的NetApp功能、效能和管理功能、同時充分發揮儲存AWS資料的簡易性、敏捷度、安全性和擴充性。FSX ONTAP for FSfor支援ONTAP的許多檔案系統功能和管理API。</block>
  <block id="27bb76bfb1e4f9966c31f5042348cd1e" category="section-title">Element軟體</block>
  <block id="231afe47f3f37d3808096b36c28b4ded" category="inline-link">元素</block>
  <block id="1fdf61a8f946268990d8e15dd9069a6d" category="paragraph"><block ref="eca39b018af81e7b5c8e71b5b4aa3790" category="inline-link-rx"></block> 儲存管理員可藉由保證效能、並簡化及簡化儲存設備佔用空間、來整合工作負載。搭配API來實現儲存管理所有層面的自動化、Element可讓儲存管理員以更少的心力完成更多工作。</block>
  <block id="08edd2123939d5309dced149763a50ee" category="section-title">NetApp HCI</block>
  <block id="25f221cc63a7e1fa55b05c29420a72a2" category="paragraph"><block ref="2841e7defe3939e68d83d007d1ad666b" category="inline-link-rx"></block> 將例行工作自動化、讓基礎架構管理員能夠專注於更重要的功能、進而簡化資料中心的管理與規模。</block>
  <block id="be17f8b9c728a6cb61cad5a2609b3888" category="paragraph">Trident完全支援此功能。NetApp HCITrident可直接針對底層NetApp HCI 的資訊儲存平台、為容器化應用程式配置及管理儲存設備。</block>
  <block id="29e7ab00082418141d470583a19c28d3" category="paragraph"><block ref="2384314bcd106c8062815b2ed789c4ad" category="inline-link-rx"></block> 是採用NetApp技術的企業級Azure檔案共享服務。您可以在Azure原生環境中執行最嚴苛的檔案型工作負載、並享有NetApp所提供的效能與豐富資料管理功能。</block>
  <block id="a3b5183ae6f5c3f1d6644448f795b5cb" category="inline-link">適用於Cloud Volumes Service Google Cloud的NetApp解決方案</block>
  <block id="a1515efe69d0ac9d979af2bdfc068934" category="paragraph"><block ref="68704f3321dd8ca7029c03c29da7736a" category="inline-link-rx"></block> 是雲端原生檔案服務、可透過NFS和SMB提供NAS磁碟區的All Flash效能。此服務可讓任何工作負載（包括舊版應用程式）在GCP雲端上執行。它提供完整的託管服務、提供一致的高效能、即時複製、資料保護、以及安全存取Google Compute Engine（GCE）執行個體。</block>
  <block id="e977c869b42c54e3c7d8fb9c071aab2b" category="summary">深入瞭解Astra Trident透過哪些連接埠進行通訊。</block>
  <block id="b229055f6bd047c28dfc84c9bee4c252" category="doc">Astra Trident連接埠</block>
  <block id="219abf04d1bb79760c15ca6966b68fb3" category="paragraph">Astra Trident透過下列連接埠進行通訊：</block>
  <block id="60aaf44d4b562252c04db7f98497e9aa" category="cell">連接埠</block>
  <block id="261addf78c7b2c961032b3dd08ba0b1f" category="cell">目的</block>
  <block id="7e6b20d014d1c659e4eaf20dc2dcd7eb" category="cell">8443.</block>
  <block id="69bbf3571db03f0487c04a8254d15c75" category="cell">後端通道HTTPS</block>
  <block id="bc3c4a6331a8a9950945a1aa8c95ab8a" category="cell">8001</block>
  <block id="e5a4c481cc6f5935efb2c9d381f2e342" category="cell">Prometheus指標端點</block>
  <block id="67ff32d40fb51f1a2fd2c4f1b1019785" category="cell">8000</block>
  <block id="10f5b805a46ea829cc3b9d8560a224ae" category="cell">Trident REST伺服器</block>
  <block id="35cf0f704286108deb76366a16415140" category="cell">17546</block>
  <block id="fb1396f82d0096741ea1b06f8cee2340" category="cell">Trident取消安裝套件所使用的活動/整備度探針連接埠</block>
  <block id="b9c469bd571fac8818d4000055d327df" category="admonition">在安裝期間、可使用「-Probe-port'」旗標來變更活動力/整備度探針連接埠。請務必確認工作節點上的其他程序並未使用此連接埠。</block>
  <block id="3d522b99ca94333433532daa23e7ceab" category="summary">尋找有關安裝、設定、升級及疑難排解Astra Trident的常見問題解答。</block>
  <block id="af2a4d2810d86aa0169c117f82682f9a" category="doc">常見問題集</block>
  <block id="96ab491ef73d5db0cd15f55e1552cc22" category="section-title">一般問題</block>
  <block id="b34c3d20de0f1b2c7a69bdc59002ad47" category="section-title">Astra Trident多久發佈一次？</block>
  <block id="2f55088c7d055eb361252b15d5d7af10" category="paragraph">Astra Trident每三個月發佈一次：1月、4月、7月和10月。這是Kubernetes發表後的一個月。</block>
  <block id="15602d1e4b699ebca549a3d953672d8c" category="section-title">Astra Trident是否支援特定Kubernetes版本中發行的所有功能？</block>
  <block id="d860923e20119473e7f7d50683cb0559" category="paragraph">Astra Trident通常不支援Kubernetes的Alpha功能。Trident可能支援Kubernetes試用版之後的兩個Trident版本中的試用版功能。</block>
  <block id="52ffcf336df0055235949cf324a8624b" category="section-title">Astra Trident是否因其運作而依賴其他NetApp產品？</block>
  <block id="9a10bc69a2553cd055c7b66932fd3864" category="paragraph">Astra Trident並不依賴其他NetApp軟體產品、而是以獨立應用程式的形式運作。不過、您應該擁有NetApp後端儲存設備。</block>
  <block id="bda04f64eaa9613cb4923cf43e24954c" category="section-title">如何取得完整的Astra Trident組態詳細資料？</block>
  <block id="6d6d1fbb6191413b3262aed487048f1e" category="paragraph">使用「tridentctl Get」命令可取得有關Astra Trident組態的詳細資訊。</block>
  <block id="d8634bcd1659c9cdf6f1a7a92ec00c30" category="section-title">我可以取得Astra Trident如何配置儲存設備的指標嗎？</block>
  <block id="1435574cfec44734b2bfc2b94327b118" category="paragraph">是的。Trident 20.01推出Prometheus端點、可用來收集有關Astra Trident作業的資訊、例如受管理的後端數目、已配置的磁碟區數目、已用位元組等。您也可以使用Cloud Insights 此功能進行監控與分析。</block>
  <block id="3e9ebf4af3f0b9d1852396d46171ef99" category="section-title">使用Astra Trident做為「csi資源配置工具」時、使用者是否會有變更？</block>
  <block id="05f95d89af1ccd9b986014406a4b1fc8" category="paragraph">不可以就使用者體驗和功能而言、沒有任何改變。使用的置備程式名稱是「csi.trident.netapp.io`」。如果您想要使用目前和未來版本所提供的所有新功能、建議使用這種安裝Astra Trident的方法。</block>
  <block id="0a7e87df44869b8d60a83f35d1e2747b" category="section-title">在Kubernetes叢集上安裝及使用Astra Trident</block>
  <block id="ffb25b8f3453272318fba778e825268f" category="section-title">支援的etcd版本為何？</block>
  <block id="6a3ad0d68dcfe0164611dadb7f7656f9" category="paragraph">Astra Trident不再需要「etcd」。它使用客戶需求日來維持狀態。</block>
  <block id="bde6cb03741f92107c63aeebe62d3278" category="section-title">Astra Trident是否支援從私有登錄進行離線安裝？</block>
  <block id="45b09f7cb3dcbe0274eef2b3fce46bea" category="paragraph">可以、Astra Trident可以離線安裝。請參閱 <block ref="4a2b27d6d4bc3dd7ae85bfd131d50753" category="inline-link-macro-rx"></block>。</block>
  <block id="1c51806b370d428d5779dbcacd940174" category="section-title">我可以從遠端安裝Astra Trident嗎？</block>
  <block id="bf858450c271da75a3df3a15ca761330" category="paragraph">是的。Astra Trident 18.10及更新版本可從任何對叢集具有「kubectl」存取權的機器、支援遠端安裝功能。驗證「kubecll」存取後（例如、從遠端機器啟動「kubecll Get nodes」命令進行驗證）、請遵循安裝指示。</block>
  <block id="12694c2de4575e39a6f7e81d55e35de9" category="section-title">我可以使用Astra Trident設定高可用度嗎？</block>
  <block id="f1cf2ca3af6ca7c374ad2104f570c790" category="paragraph">Astra Trident是以單一執行個體安裝為Kubernetes部署（ReplicaSet）、因此內建HA。您不應增加部署中的複本數量。如果安裝Astra Trident的節點遺失、或Pod無法存取、Kubernetes會自動將Pod重新部署至叢集中的健全節點。Astra Trident僅適用於控制面板、因此若重新部署Astra Trident、目前安裝的Pod不會受到影響。</block>
  <block id="1656e4b34abdb6d497b40cac65366767" category="section-title">Astra Trident是否需要存取Kube系統命名空間？</block>
  <block id="6f67e1edfd4aa5b0e695528a9c7d8898" category="paragraph">Astra Trident從Kubernetes API伺服器讀取、以判斷應用程式何時要求新的PVCS、因此需要存取Kube-system。</block>
  <block id="16cdb35003b5bcf0f30556e0bc477511" category="section-title">Astra Trident使用哪些角色和權限？</block>
  <block id="6efc6545e459b8bb96815706b41a84cd" category="paragraph">Trident安裝程式會建立Kubernetes ClusterRole、該叢集具有特定存取權、可存取叢集的PersistentVolume、PersistentVolume Claim、StorageClass及Kubernetes叢集的Secret資源。請參閱 <block ref="7a68296d6f600eac17d317743bea0050" category="inline-link-macro-rx"></block>。</block>
  <block id="8ff39a39871cc30228035bc0580a6af4" category="section-title">我可以在本機產生安裝所用的確切資訊清單檔案嗎？</block>
  <block id="0f43ba8a9cfc14b033c2c652f53bfcb9" category="paragraph">如有需要、您可以在本機產生及修改安裝所使用的確切資訊清單檔案Astra Trident。請參閱 <block ref="7a68296d6f600eac17d317743bea0050" category="inline-link-macro-rx"></block>。</block>
  <block id="e6af67b71bd46d7588b50f28e1414f9b" category="section-title">我是否可以針對ONTAP 兩個獨立Kubernetes叢集的兩個Astra Trident執行個體、共用相同的支援功能後端SVM？</block>
  <block id="7bbf9b47e035f0f9bb7c46098e78fb4d" category="paragraph">雖然不建議使用、但您可以針對兩個Astra Trident執行個體使用相同的後端SVM。在安裝期間為每個執行個體指定唯一的Volume名稱、並（或）在「Setup/backend.json」檔案中指定唯一的「儲存前置字元」參數。這是為了確保FlexVol 兩個執行個體都不會使用相同的功能。</block>
  <block id="9840a5bb6278469ed550bcdcc92c29c5" category="section-title">是否能在ContainerLinux（前身為CoreOS）下安裝Astra Trident？</block>
  <block id="7a35680d9db247612b732ae47144f030" category="paragraph">Astra Trident只是Kubernetes Pod、可安裝在Kubernetes執行的任何位置。</block>
  <block id="5fc6de1b535ebb2a5380b6aa607e4cca" category="section-title">我可以將Astra Trident搭配NetApp Cloud Volumes ONTAP 功能嗎？</block>
  <block id="5d1cff73e26dc54ef52bdca5a29b319c" category="paragraph">是的、AWS、Google Cloud和Azure均支援Astra Trident。</block>
  <block id="2ddee53d5c18f6e78f18dad82851303e" category="section-title">Astra Trident是否能與Cloud Volumes Services搭配運作？</block>
  <block id="ba600e29b197aa569df1df520cc4e4c9" category="paragraph">是的、Astra Trident不僅支援Azure NetApp Files Azure中的「不二」服務、Cloud Volumes Service 也支援GCP中的「不二」功能。</block>
  <block id="92d1656d06303733c5e1398fb273a17e" category="section-title">疑難排解與支援</block>
  <block id="9985a592486717ae388709b9267da4f9" category="section-title">NetApp是否支援Astra Trident？</block>
  <block id="cc56e0da96ceaf708545923f1094815b" category="paragraph">儘管Astra Trident是開放原始碼且免費提供、但只要您的NetApp後端受到支援、NetApp就能提供完整支援。</block>
  <block id="a3d907947129a58ee6f9e23074840c8f" category="section-title">如何提出支援案例？</block>
  <block id="0265687df6c09d532b03477776c6d075" category="paragraph">若要提出支援案例、請執行下列其中一項：</block>
  <block id="5dab8cca21a0ff4e72d4e2a1ee5156ea" category="list-text">請聯絡您的支援客戶經理、以取得索取機票的協助。</block>
  <block id="09ea0908fbfc4cde85bf416e35dc55c8" category="inline-link">NetApp支援</block>
  <block id="a13956d424374973d31e5883b8bf8b6a" category="list-text">請聯絡以提出支援案例<block ref="116f7ad90a3c7441981f82d8f8fba4d5" category="inline-link-rx"></block>。</block>
  <block id="3e77e87e5ee8fb4f6f910f4cf0594fc2" category="section-title">如何產生支援記錄套裝組合？</block>
  <block id="7938aed248d09a5120eaf414e6c1d574" category="paragraph">您可以執行「tridentctl logs -A」來建立支援服務組合。除了在套裝組合中擷取的記錄之外、請擷取kubelet記錄、以診斷Kubernetes端的掛載問題。取得Kubernetet記錄的指示會根據Kubernetes的安裝方式而有所不同。</block>
  <block id="2c3543f339dc749a508ed5e5e5aaae23" category="section-title">如果我需要提出新功能的要求、該怎麼辦？</block>
  <block id="42bfc6e3acd67192d42135138102a1de" category="inline-link">Trident Github</block>
  <block id="c2146fea25aea76bae1b5853f60a2f87" category="paragraph">在上建立問題<block ref="47273b71915582ec6db59ad21099cfb9" category="inline-link-rx"></block> 並在問題的主題和說明中提及* RFE*。</block>
  <block id="0aa1d7a95d75c0faa8302a803356b7b7" category="section-title">我該在哪裡提出瑕疵？</block>
  <block id="4c1d312c39e7048d2c634824e243fdba" category="inline-link">Astra Trident Github</block>
  <block id="a814c59a6fef2fb64a2a32dedcf6f82e" category="paragraph">在上建立問題<block ref="e71a8230f1c77ee7d957187295b859e4" category="inline-link-rx"></block>。請務必附上與問題相關的所有必要資訊和記錄。</block>
  <block id="fd0759571f12527967b660b5b327c65b" category="section-title">如果我有關於Astra Trident的快速問題、而我需要澄清、會發生什麼情況？是否有社群或論壇？</block>
  <block id="3561f3a3c5576e2ce0dc0d1e268bb9b2" category="inline-link">可寬延</block>
  <block id="f549c74b636d0ad80493d063fe6ecfc3" category="paragraph">如果您有任何問題、問題或要求、請透過我們的聯絡我們<block ref="2d9f7b5a7f56881c42c3b026a068eb36" category="inline-link-rx"></block> 團隊或GitHub。</block>
  <block id="264c3819b5a8fdae87f1dc9af1988a90" category="section-title">我的儲存系統密碼已變更、Astra Trident已無法運作、我該如何恢復？</block>
  <block id="061ec2ab4d383b8f20e15eda656db8f7" category="paragraph">使用「tridentctl update backend myBackend -f」（三重更新後端myBackend -f）來更新後端的密碼。以您的後端名稱取代範例中的「myBackend」、並以正確的「backend.json」檔案路徑取代「/path/to _new_backend.json」。</block>
  <block id="6100f37d544e87e462129f21e52bae7f" category="section-title">Astra Trident找不到Kubernetes節點。如何修正此問題？</block>
  <block id="d5cf5c734786394c838bacc6597594c6" category="paragraph">Astra Trident找不到Kubernetes節點的原因可能有兩種。這可能是因為Kubernetes內的網路問題或DNS問題。在每個Kubernetes節點上執行的Trident節點取消影像集、必須能夠與Trident控制器通訊、才能在Trident中登錄節點。如果在安裝Astra Trident之後發生網路變更、您只會遇到新增至叢集的Kubernetes節點的問題。</block>
  <block id="bcd549c9f0199c5b8d0b55f782bff9e8" category="section-title">如果Trident Pod毀損、我會遺失資料嗎？</block>
  <block id="136fed1edd42bf8ca22358da037d17fa" category="paragraph">如果Trident Pod遭到破壞、資料將不會遺失。Trident的中繼資料儲存在CRD物件中。所有由Trident提供的PV均可正常運作。</block>
  <block id="3de05f78e401869f4630ec8cabf339df" category="section-title">我可以直接從舊版本升級至新版本（跳過幾個版本）嗎？</block>
  <block id="ce44cbbc54839f39b351c091b0e3caa5" category="paragraph">NetApp支援將Astra Trident從一個重大版本升級至下一個重大版本。您可以從11.xx版升級至19.xx、19.xx版升級至20.xx版、依此類推。在正式作業部署之前、您應該先在實驗室中測試升級。</block>
  <block id="0399b9e6348e554937a4d65efc97a1b8" category="section-title">是否能將Trident降級至先前的版本？</block>
  <block id="d307563c01953bd90a41ddd049f96d51" category="inline-link-macro">降級一節</block>
  <block id="72fec731c958562fd09df08eef5fbb89" category="paragraph">如果您想要降級、有許多因素需要評估。請參閱 <block ref="ea621a0de3f004c488ea799d0fd7e41d" category="inline-link-macro-rx"></block>。</block>
  <block id="ba9c59aa9d07b25e124dcf6ca88d689a" category="section-title">管理後端和磁碟區</block>
  <block id="ffe72215dff9a93d62ee68905212025e" category="section-title">我是否需要在ONTAP 一個後端定義檔案中定義管理和資料生命期？</block>
  <block id="3a35d35cc18d96684d78b36a81422e0c" category="paragraph">NetApp建議在後端定義檔中同時使用這兩個檔案。不過、管理LIF是唯一必須執行的功能。</block>
  <block id="f3997f0b9446951754e665cfe7591cef" category="section-title">Astra Trident是否能設定CHAP以ONTAP 供後端使用？</block>
  <block id="805f73dde029c6c119993b4496bbdc9e" category="paragraph">是的。從20.04開始、Astra Trident支援雙向CHAP以利ONTAP 實現後端。這需要在後端組態中設定「useCHAP=true」。</block>
  <block id="952cc22022a80bb8079f6dd7afb289d2" category="section-title">如何使用Astra Trident管理匯出原則？</block>
  <block id="700815d44ae9a359311f64dbebbd8d42" category="paragraph">Astra Trident可從20.04版起、動態建立及管理匯出原則。如此一來、儲存管理員就能在其後端組態中提供一或多個CIDR區塊、並將位於這些範圍內的Trident新增節點IP、加入其所建立的匯出原則。如此一來、Astra Trident就能自動管理新增和刪除在指定CIDR內具有IP的節點規則。此功能需要「csi Trident」。</block>
  <block id="ddd61a9bf73a6cb2a2375bcdfbecbe15" category="section-title">我們可以在DataLIF中指定連接埠嗎？</block>
  <block id="c7449c080f216d9be59d8ff995985d39" category="paragraph">Astra Trident 19.01及更新版本支援在DataLIF中指定連接埠。在「backend.json」檔案中將其設定為「managementLIF」：&lt;IP位址&gt;:&lt;port&gt;」。例如、如果管理LIF的IP位址為192.0.2、連接埠為1000、請設定「managementLIF」：「192.0.2：2.1：1000」。</block>
  <block id="1d08384060bd88a7801faae4fe346d06" category="section-title">IPv6位址是否可用於管理和資料生命量？</block>
  <block id="955e051838e60a39384f98e20ef67d47" category="paragraph">是的。Astra Trident 20.01支援定義用於管理的IPv6位址LIF和ONTAP 用於支援不支援的dataLIF參數。您應該確保地址遵循IPv6語義、且管理LIF是在方括弧內定義（例如、「」[ec0d:6504：a9c1：ae67：53d1：4bdf：ab32：e233]）。您也應該確保使用「-use IPv6」旗標來安裝Astra Trident、以便透過IPv6運作。</block>
  <block id="4c0e813a0bfed033d75bbfd8b18f556c" category="section-title">是否能在後端更新管理LIF？</block>
  <block id="66d8fee83a94421ca416a2bdb33703b4" category="paragraph">可以、您可以使用「tridentctl update backend」命令來更新後端管理LIF。</block>
  <block id="c56cd7a01da4acc4fc86aa498cabfd99" category="section-title">是否能在後端更新Data LIF？</block>
  <block id="9f811ba6d553275226edbacf07b2828b" category="paragraph">否、無法在後端更新Data LIF。</block>
  <block id="1e0e6fcec605e6450ba12b95969c8959" category="section-title">我可以在Astra Trident中為Kubernetes建立多個後端嗎？</block>
  <block id="fb3cb30bfe23466a98407256c8b5164f" category="paragraph">Astra Trident可同時支援多個後端、無論是使用相同的驅動程式或不同的驅動程式。</block>
  <block id="6454319cc2398418b67f5b2df5aa5cd3" category="section-title">Astra Trident如何儲存後端認證資料？</block>
  <block id="1d406f7ac7268b602da0989a4675480e" category="paragraph">Astra Trident將後端認證儲存為Kubernetes Secrets。</block>
  <block id="64a610ffaa66abeebc73d8159b9f73ec" category="section-title">Astra Trident如何選擇特定的後端？</block>
  <block id="c6e9fbb586ad55ddf4bbda9814c6adc9" category="paragraph">如果後端屬性無法用於自動選擇某個類的正確池，則可使用"scoragePools"和"additionalStoragePools"參數來選擇特定的池集區集區集區集區。</block>
  <block id="3beefa69a05dde01d93a438a943a5a7a" category="section-title">如何確保Astra Trident不會從特定後端進行資源配置？</block>
  <block id="b5c265487a1fed6a3367664ccab664bb" category="paragraph">使用「排除StoragePools」參數來篩選Astra Trident將用於資源配置的資源池集區集區、並移除任何相符的資源池。</block>
  <block id="e124ac30adf3eea60a13cd5f93980e7e" category="section-title">如果有多個相同類型的後端、Astra Trident如何選擇要使用的後端？</block>
  <block id="c02ba3e7f8a02e0d1e29e2190a86e352" category="paragraph">如果有多個相同類型的已設定後端、Astra Trident會根據「儲存類別」和「PeristentVolume Claim」中的參數、選取適當的後端。例如、如果有多個ONTAP-NAS驅動程式後端、Astra Trident會嘗試搭配「torageClass」和「PeristentVolume Claim」中的參數、並搭配後端、以滿足「torageClass」和「PeristentVolume Claim」中列出的需求。如果有多個後端符合要求、則Astra Trident會隨機從其中一個後端選取。</block>
  <block id="7a2fd62f4a63259a7f94543a0ae01e76" category="section-title">Astra Trident是否支援採用Element / SolidFire的雙向CHAP？</block>
  <block id="b127099c71415d532da3a26ed73eb041" category="paragraph">是的。</block>
  <block id="7880810a250adc4ccf5108fe88325055" category="section-title">Astra Trident如何將qtree部署在ONTAP 一個邊角捲上？單一磁碟區可部署多少qtree？</block>
  <block id="657cbdac1a85665b0b38b37c9a306925" category="paragraph">「ONTAP-NAS-節約」驅動程式可在同FlexVol 一個範圍內建立多達200個qtree（可設定為50到300個）、每個叢集節點可建立100、000個qtree、每個叢集可建立240萬個qtree。當您輸入經濟型驅動程式所提供的全新「PersistentVolume Claim」時、駕駛會查看FlexVol 是否已存在可為新Qtree提供服務的功能。如果FlexVol 不存在能夠服務Qtree的功能、FlexVol 就會建立新的功能。</block>
  <block id="abbdd4298bb3e525fd172b2bbe5a451c" category="section-title">我要如何為ONTAP 以NAS配置的Volume設定Unix權限？</block>
  <block id="a535e502931280dfaa539ecd1cbdfc0c" category="paragraph">您可以在後端定義檔中設定參數、以設定Astra Trident所佈建的Volume上的Unix權限。</block>
  <block id="094ef47e6456d60b656401b0f2bbfcbd" category="section-title">如何在ONTAP 配置Volume時、設定一組明確的靜態NFS掛載選項？</block>
  <block id="84ae0d345d4b749efbbc8103b0770e68" category="paragraph">依預設、Astra Trident不會使用Kubernetes將掛載選項設為任何值。若要在Kubernetes儲存類別中指定掛載選項、請遵循所提供的範例<block ref="cd55c45fce745b7032050d3a7a9ec326" category="inline-link-rx"></block>。</block>
  <block id="ae6bc3659bb0be0a7d9f98a63775b7c2" category="section-title">如何將已配置的磁碟區設定為特定的匯出原則？</block>
  <block id="700a2008fea63d02c24b85f2f75d357e" category="paragraph">若要允許適當的主機存取磁碟區、請使用後端定義檔中設定的「exportPolicy」參數。</block>
  <block id="9d5813dee71bcbf3d3a03c62354c3e55" category="section-title">如何透過Astra Trident搭配ONTAP 使用才能設定Volume加密？</block>
  <block id="5467ffdca7c34378117097446e6a4408" category="paragraph">您可以使用後端定義檔中的加密參數、在Trident所提供的磁碟區上設定加密。</block>
  <block id="ef1581716b653c4364dd5005dbe9e40a" category="section-title">什麼是透過ONTAP Astra Trident實作QoS for Sfor Sfor Sfor the S星？</block>
  <block id="f412d672b51ea3c57812ebf3be0ddccb" category="paragraph">使用「儲存類」來實作ONTAP QoS以利實現。</block>
  <block id="1c771b761835123a135e64f70567d768" category="section-title">如何透過Astra Trident指定精簡或完整的資源配置？</block>
  <block id="0d97afe7a571dc39db1c810013844332" category="paragraph">支援精簡或密集資源配置的支援。ONTAP此功能預設為精簡配置。ONTAP如果需要完整資源配置、您應該設定後端定義檔或「儲存類別」。如果兩者都已設定、則「儲存類別」優先。設定ONTAP 下列項目以供參考：</block>
  <block id="2d0384de8b72e53c3476a478a5d4ec53" category="list-text">在「儲存類別」上、將「資源配置類型」屬性設為「完整」。</block>
  <block id="3764067c4b14276efb241c511c8b0cc2" category="list-text">在後端定義檔中、將「backend spaceReserve參數」設為Volume、以啟用厚磁碟區。</block>
  <block id="d4391b26a81fead46afc74243c4029aa" category="section-title">如何確保即使意外刪除了PVC,也不會刪除使用中的磁碟區？</block>
  <block id="e58a684cd1a44d4879defbb2ec06b9a4" category="paragraph">Kubernetes從1.10版開始自動啟用PVc保護。</block>
  <block id="8d766c7d692523686b8954d72ee86ea4" category="section-title">我可以擴充由Astra Trident所建立的NFS PVCs嗎？</block>
  <block id="328e34871ba32779f27f3e8a8e78499a" category="paragraph">是的。您可以擴充由Astra Trident所建立的永久虛電路。請注意、Volume自動擴充ONTAP 是不適用於Trident的功能。</block>
  <block id="f2f324d5d940b44cd307b613c6990e0c" category="section-title">如果我的磁碟區是在Astra Trident以外建立的、我可以將它匯入Astra Trident嗎？</block>
  <block id="c894ce628e51d8d9d062a1e83cda37c8" category="paragraph">從19.04開始、您可以使用Volume匯入功能將磁碟區帶入Kubernetes。</block>
  <block id="3319194e0ba07a6aa327aefa1ab1e41f" category="section-title">我可以在磁碟區處於SnapMirror資料保護（DP）或離線模式時匯入該磁碟區嗎？</block>
  <block id="0b10afe39923054016a71caf423fdec6" category="paragraph">如果外部磁碟區處於DP模式或離線、則磁碟區匯入會失敗。您會收到下列錯誤訊息：</block>
  <block id="9fd7d017b60cc366b6bc3b6e55213abe" category="section-title">我可以擴充由Astra Trident建立的iSCSI PVCs嗎？</block>
  <block id="29e2faaced65d1dd4c920c60e854e550" category="paragraph">Trident 19.10支援使用csi資源配置程式擴充iSCSI PV。</block>
  <block id="eed67b2d196c61d9c6cf4a50878ba446" category="section-title">資源配額如何轉譯至NetApp叢集？</block>
  <block id="45f78013e46c8f3e884ed0f7becbd5ab" category="paragraph">只要NetApp儲存設備具備容量、Kubernetes儲存資源配額就能運作。當NetApp儲存設備因為容量不足而無法遵守Kubernetes配額設定時、Astra Trident會嘗試進行資源配置、但卻發生錯誤。</block>
  <block id="491a93842f7a65b8cbe82aca71db0d3f" category="section-title">我可以使用Astra Trident建立Volume Snapshot嗎？</block>
  <block id="9792ac41ce6f91861f84548e1b4a2b1c" category="paragraph">是的。Astra Trident支援從快照建立隨需磁碟區快照和持續磁碟區。若要從快照建立PV、請確定已啟用「Volume SnapshotDataSource」功能閘道。</block>
  <block id="1eedb8a6574b0c07ea61689a7e3ec8d4" category="section-title">哪些驅動程式支援Astra Trident Volume快照？</block>
  <block id="804a6c22698fe4782c44f1e8d446964e" category="paragraph">到目前爲止、我們的「ONTAP-NAS」、「ONTAP-NAS-flexgroup」、「ONTAP-SAN」、「ONTAP-san經濟型」、「Poolidfire SAN」、 「GCP-CVS」、以及「azure-NetApp-fil」後端驅動程式。</block>
  <block id="24c649a639a2c31810a4dfc6ed0190da" category="section-title">我要如何針對Astra Trident提供ONTAP 的含有「支援」功能的磁碟區進行快照備份？</block>
  <block id="0bdcd128fab544a7df404bc496a4126e" category="paragraph">這可在「ONTAP-NAS」、「ONTAP-SAN」及「ONTAP-NAA-flexgroup」等驅動程式上使用。您也可以針對FlexVol 「ontap-san經濟」驅動程式指定「快照原則」、以利執行此作業。</block>
  <block id="933b520ff6d70262ddb482995c684d57" category="paragraph">這也可在「ONTAP-NAS-節約」驅動程式中找到、但FlexVol 可在「不」於qtree層級精細度上找到。若要讓Astra Trident提供的磁碟區快照、請將後端參數選項「快照原則」設為ONTAP 在支援後端上定義的所需快照原則。Astra Trident不知道儲存控制器所拍攝的任何快照。</block>
  <block id="594e8a352537de25938bdd663d6211b5" category="section-title">我可以為透過Astra Trident佈建的磁碟區設定快照保留百分比嗎？</block>
  <block id="8db5662205f3a6430af4bea6f08e7d45" category="paragraph">是的、您可以在後端定義檔中設定「快照保留區」屬性、保留特定百分比的磁碟空間、以便透過Astra Trident來儲存快照複本。如果您在後端定義檔中設定了「快照原則」和「快照保留」、則快照保留百分比會根據後端檔案中所述的「快照保留」百分比來設定。如果未提及「快照保留」百分比數字、ONTAP 則根據預設、將快照保留百分比設為5。如果將「快照原則」選項設為「無」、則快照保留百分比會設為0。</block>
  <block id="6b0d34d8a0749198a6b80eec69479c86" category="section-title">我可以直接存取Volume Snapshot目錄並複製檔案嗎？</block>
  <block id="eb3a2d1eb3c4022269f4c6837332311a" category="paragraph">是的、您可以在後端定義檔中設定「shapshotDir'參數、以存取Trident所佈建之磁碟區上的Snapshot目錄。</block>
  <block id="81dbf5e91cc69bfcf6477128389d8a25" category="section-title">我可以透過Astra Trident為磁碟區設定SnapMirror嗎？</block>
  <block id="64dd4ea74b402889a9c341da491f4933" category="paragraph">目前、SnapMirror必須使用ONTAP CLI或OnCommand 《系統管理程式》從外部設定。</block>
  <block id="e321bf6d54ded18df56a41ea51223a2a" category="section-title">如何將持續磁碟區還原至特定ONTAP 的不還原快照？</block>
  <block id="5325f5d2cf63aaaa6610f09e8aa4dc35" category="paragraph">若要將磁碟區還原ONTAP 成一個無法修復的快照、請執行下列步驟：</block>
  <block id="4e789db936072df2058e9f271a9b8db8" category="list-text">靜止使用持續磁碟區的應用程式Pod。</block>
  <block id="b34baa75f4f799a23b19de9b94e86868" category="list-text">透過ONTAP NetApp CLI或OnCommand 《系統管理程式》回復至所需的快照。</block>
  <block id="08754f2800804f1fe3673c858b4b56e0" category="list-text">重新啟動應用程式Pod。</block>
  <block id="0d3ef54a4cc337b5d907b6639e51c6d4" category="section-title">如何區分每位客戶/租戶的儲存類別使用量？</block>
  <block id="fda1b35892cb6f61447f0e49415937d9" category="paragraph">Kubernetes不允許命名空間中的儲存類別。不過、您可以使用Kubernetes來限制每個命名空間的特定儲存類別使用量、方法是使用儲存資源配額（每個命名空間）。若要拒絕特定儲存設備的特定命名空間存取、請將該儲存類別的資源配額設為0。</block>
  <block id="0f5dc79c8003190ab8f758b1748ba0d8" category="summary">NetApp持續改善及強化其產品與服務。以下是最新版Astra Trident的一些最新功能、增強功能及錯誤修正。</block>
  <block id="5dd03e8d039863e563e049be198c3fd3" category="doc">版本資訊</block>
  <block id="2e6ce374ac42de81aea6a3d682b92e33" category="paragraph">版本資訊提供最新版Astra Trident的新功能、增強功能及錯誤修正資訊。</block>
  <block id="e4c4d344a524d21b898e4d04b6539aa7" category="admonition">安裝程式壓縮檔中提供的Linux試用版（tridentctl）二進位檔是經過測試且受支援的版本。請注意、不會測試或支援壓縮檔中「/Extras」部分提供的「macos」二進位檔。</block>
  <block id="bef370ebb83a8a4dbadc9284705776cd" category="section-title">22.04的新功能</block>
  <block id="368b120a3b5f53a49dc3ab96ec9b8dbd" category="paragraph">NetApp持續改善及強化其產品與服務。以下是Astra Trident的一些最新功能。如需舊版的資訊、請參閱<block ref="25da125dffad1d6323c21354bccf0203" category="inline-link-rx"></block>。</block>
  <block id="7072ec708b0ea7e3243747d8b79c0d20" category="admonition">如果您要從任何先前的Trident版本升級並使用Azure NetApp Files 更新版本、則「位置」組態參數現在是必填的單一欄位。</block>
  <block id="41cf959adc98386b54829d71a6ed5d37" category="section-title">修正</block>
  <block id="6f66437376d2298f51dedcad975af0af" category="list-text">改善iSCSI啟動器名稱的剖析。（問題[#681]<block ref="5ff0c0b84f149d5e05cdbfc15134c7d3" category="inline-link-rx"></block></block>
  <block id="ade01ecb73e019f3380c2b0afb3dfffb" category="list-text">修正不允許使用csi儲存類別參數的問題。（問題[#598]<block ref="03c929eaa36e8820e6d58a181cadf31a" category="inline-link-rx"></block></block>
  <block id="9ecc72f60e2733db28108cec786393d8" category="list-text">修復Trident CRD中的重複金鑰宣告。（問題[#671]<block ref="39dd525b3820bd54c741d90842f0cfba" category="inline-link-rx"></block></block>
  <block id="bc654279a27ed7dbc53dea073443c6dd" category="list-text">修正不正確的「csi Snapshot記錄」。（問題[#629]<block ref="74e80876204be50984fd2b886b478da3" category="inline-link-rx"></block></block>
  <block id="9b67ffa13416ea48750dbec9f4ad66a4" category="list-text">已修正在刪除節點上解除發佈磁碟區的問題。（問題[#691]<block ref="960ecda0072df209a8be9a21824adbbd" category="inline-link-rx"></block></block>
  <block id="f30177308b538e761b8feff560b90f3b" category="list-text">新增區塊裝置上檔案系統不一致的處理方式。（問題[#656]<block ref="20be7e8a45944ca857b23f51f1b33662" category="inline-link-rx"></block></block>
  <block id="6c2b4c2b9ff739282a9a8c949c9eba0b" category="list-text">修正在安裝期間設定「imageRegistry（影像登錄）」旗標時拉出自動支援映像的問題。（問題[#715）<block ref="95a736f0b6cf1bb3063434410ab25226" category="inline-link-rx"></block></block>
  <block id="682c6ce09c9faae3a3e22c55c8db592e" category="list-text">修正ANF驅動程式無法複製具有多個匯出規則的磁碟區的問題。</block>
  <block id="c1748037d10cffabb8e95e4ccf77c613" category="section-title">增強功能</block>
  <block id="b6cf920e86b3fc991f2480bd036eeb18" category="list-text">若要連入Trident的安全端點、現在至少需要TLS 1.3。（問題[#698]<block ref="d975aaa0c5042a84e62298e5fd05553c" category="inline-link-rx"></block></block>
  <block id="723b30bcece2d0d47914a6eaf0c550cc" category="list-text">Trident現在將HSTC標頭新增至其安全端點的回應。</block>
  <block id="621b9733ee07089711b96dd6b0b7861a" category="list-text">Trident現在會自動嘗試啟用Azure NetApp Files 「UNIX權限」功能。</block>
  <block id="3bbc276ce14cf6f098250ed3dc320964" category="list-text">* Kubernetes*：Trident取消程式集現在以系統節點關鍵優先順序類別執行。（問題[#694]<block ref="b7e94b834f1f212aacf3741fb6fee33f" category="inline-link-rx"></block></block>
  <block id="3f39a3207529d5f8129199a33e60ef87" category="section-title">移除</block>
  <block id="3d0d8392962843a02a6fa979f76b5a91" category="paragraph">E系列驅動程式（自20.07起停用）已移除。</block>
  <block id="72387bfdb0acfd8a27877f000a3abeac" category="section-title">22.01.1中的變更</block>
  <block id="a98b2ebbcbb381d3abc81e2ecfb2054c" category="inline-link-macro">GitHub問題#691</block>
  <block id="61465c1d4383dd4afdf168925e15e767" category="list-text">已修正在刪除節點上解除發佈磁碟區的問題。（<block ref="5fee6ab43e8008edba54375694a29266" category="inline-link-macro-rx"></block>）</block>
  <block id="e50f1057ba4b67b255c98fa09c5ba6f8" category="list-text">存取零欄位以取得ONTAP 靜止API回應中的集合空間時、會出現固定的恐慌。</block>
  <block id="135c438d01a49275c458e22005e39c6e" category="section-title">22.01.0版的變更</block>
  <block id="3c72f47eeb46270dd13a77b32ec10dd3" category="list-text">* Kubernetes：*增加大型叢集的節點登錄回退重試時間。</block>
  <block id="0ef48234390855900384d0bc8a0a8a24" category="list-text">已解決以下問題：azure-NetApp-Files驅動程式可能會被同名的多個資源混淆。</block>
  <block id="7eaa7391130c13b3bf9a7e4ae755d908" category="list-text">如果使用方括弧指定SAN IPv6資料生命量、現在就能正常運作。ONTAP</block>
  <block id="404cef2e43cb97ccef52692419ad6f6b" category="inline-link-macro">GitHub問題#489</block>
  <block id="7213ed07f5b718aa66cfac350f023a77" category="list-text">修正嘗試匯入已匯入磁碟區傳回EOF、使PVc處於擱置狀態的問題。（<block ref="b9a2290d6389b9a605883cda4e717749" category="inline-link-macro-rx"></block>）</block>
  <block id="c28d8c94f865f3ef7e4b01a157510ef6" category="list-text">修正當在SolidFire 一個穩定區上建立超過32個快照時、Astra Trident效能變慢的問題。</block>
  <block id="d0aaca968285d0d47ea0c5a0f7b9bab5" category="list-text">在建立SSL憑證時、以SHA-256取代SHA-1。</block>
  <block id="b956e1f58f802db57dd9f871ac59ed6c" category="list-text">固定ANF驅動程式、允許重複的資源名稱、並將作業限制在單一位置。</block>
  <block id="851679bec9b3e6c8e6284128fb750b1e" category="list-text">Kubernetes增強功能：</block>
  <block id="2767b461b2b49786f390c9e0509d2d12" category="list-text">新增對Kubernetes 1.23的支援。</block>
  <block id="7f10502f6f15537f180f07f0c89d2642" category="inline-link-macro">GitHub問題#65</block>
  <block id="2ff7a365e7c341f8f381cd7c2a4e15f6" category="list-text">透過Trident運算子或Helm安裝Trident Pod時、請新增排程選項。（<block ref="15fbe6dcd60762941b28bc5990803bde" category="inline-link-macro-rx"></block>）</block>
  <block id="90fdd892e78b26eb18a250c9c1bc19ff" category="inline-link-macro">GitHub問題#633</block>
  <block id="3ff8e54aa1f3735deb64771c4c65c420" category="list-text">允許GCP驅動程式中的跨區域磁碟區。（<block ref="efd445659801b6abfdba2997e23e5f4f" category="inline-link-macro-rx"></block>）</block>
  <block id="fef8c75d6cd00955b0f1c84d40af01aa" category="inline-link-macro">GitHub問題#6666</block>
  <block id="9f81aabbbba9f61bfecaf1340c407ed1" category="list-text">新增對anf磁碟區「unix權限」選項的支援。（<block ref="b2ee1a79cce917ad1d60b3bec442914a" category="inline-link-macro-rx"></block>）</block>
  <block id="a4233200da50a08b295311036bb03ac1" category="section-title">棄用</block>
  <block id="de6284c149d2e011da3909f1ef2af627" category="paragraph">Trident REST介面只能以127.0.0.1或[:1]位址接聽和使用</block>
  <block id="58a2e8c17107cc1ca9cb1317cd0c1ee9" category="section-title">210.1的變更</block>
  <block id="cdb544a92bee555749f43046d53ef34e" category="admonition">v21.10.0版本發生問題、可在移除節點後將Trident控制器重新新增回Kubernetes叢集時、將其置於CrashLooper BackOff狀態。此問題已在版本210.1中修正（GitHub問題669）。</block>
  <block id="cd1bf2431d703fd3c62a278b9c812d56" category="list-text">修正在GCP CVS後端匯入磁碟區時可能發生的競爭狀況、導致無法匯入。</block>
  <block id="8e1e1dad95de3dc781f25f58483acdf3" category="list-text">修正刪除節點後、將Trident控制器重新加入Kubernetes叢集（GitHub問題669）時、使Trident控制器進入CrashLooper BackOff狀態的問題。</block>
  <block id="d7c32cb5ff2be4aaff3a8eaea9d18e0d" category="list-text">修正未指定SVM名稱時不再探索SVM的問題（GitHub問題612）。</block>
  <block id="43e92857220d1a7ea1da88250ea5e2e3" category="section-title">21.0</block>
  <block id="a6e7aa999ba654c6844672ae59f5137a" category="list-text">修正XFS磁碟區的複本無法與來源磁碟區掛載在同一個節點上的問題（GitHub問題514）。</block>
  <block id="4a921ae3eb8c2695dabd4044ff81141a" category="list-text">修正Astra Trident在關機時記錄嚴重錯誤的問題（GitHub問題597）。</block>
  <block id="852acc81ea6fa7363b73c5313002de83" category="list-text">Kubernetes相關修正：</block>
  <block id="f94cc5159119c43751041256941deb2c" category="list-text">使用「ONTAP-NAS」和「ONTAP-NAS-flexgroup」驅動程式建立快照時、傳回磁碟區的已用空間作為最小重新設定大小（GitHub問題645）。</block>
  <block id="742ce2e3c9c8496323bd1176af2838a4" category="list-text">修正磁碟區調整大小後記錄「無法擴充檔案系統」錯誤的問題（GitHub問題560）。</block>
  <block id="9a445ecbad9af70a94bd7558ba95e059" category="list-text">已解決Pod可能陷入「終止」狀態的問題（GitHub問題572）。</block>
  <block id="4f81c320a621b8c9d81c7334f2cffc71" category="list-text">修正「ONTAP-san經濟」FlexVol 的情況、即快照LUN可能已滿（GitHub問題533）。</block>
  <block id="169c3be63dd22b315ed7884e246338de" category="list-text">修正不同映像的自訂Yaml安裝程式問題（GitHub問題613）。</block>
  <block id="1077a1a91a96498c2f56bc630e632eee" category="list-text">修正快照大小計算（GitHub問題611）。</block>
  <block id="fe705e5b02638736087c9fd97b2c4952" category="list-text">修正所有Astra Trident安裝程式可將純Kubernetes識別為OpenShift的問題（GitHub問題639）。</block>
  <block id="27b76ffa775f907a1fd51f21a669551b" category="list-text">修正Trident運算子、在Kubernetes API伺服器無法連線時停止協調（GitHub問題599）。</block>
  <block id="1f9e922b6eff6cb06fca1ed9137eed38" category="list-text">新增了對GCP-CVS Performance Volume的「unixPermissions」選項支援。</block>
  <block id="294b850a76a040c20913e76c2fe6589a" category="list-text">在GCP中新增對大規模最佳化的CVS磁碟區的支援、範圍介於600 GiB到1 TiB之間。</block>
  <block id="0333eb54465646b87754facff75fdb5f" category="list-text">Kubernetes相關增強功能：</block>
  <block id="c32aa411caa1ffd0e30a271f5be834d9" category="list-text">新增對Kubernetes 1.22的支援。</block>
  <block id="fa1fd8841173fa7ccde5059fb7c2f903" category="list-text">讓Trident運算子和Helm圖表能與Kubernetes 1.22搭配使用（GitHub問題628）。</block>
  <block id="dbaa551f190105e514f7816811f4b397" category="list-text">將操作員映像新增至「tridentctl」映像命令（GitHub Issue 570）。</block>
  <block id="be575f1ff204f2800114965a5c0d8575" category="section-title">實驗性增強功能</block>
  <block id="29ddf941d9825cc9283521ee90468595" category="list-text">在「ONTAP-san」驅動程式中新增了對Volume複寫的支援。</block>
  <block id="e2f2b85987da5e2397c1e342a6fd9e28" category="list-text">新增*技術預覽* REST支援功能、支援「ONTAP-NAA-flexgroup」、「ONTAP-SAN」和「ONTAP-NAS-P節約」驅動程式。</block>
  <block id="95dc0391ce7b396d7dd5622284e8fc3e" category="section-title">已知問題</block>
  <block id="64a8f71bee95a6635e88bce00f1a2d3c" category="paragraph">已知問題可識別可能導致您無法成功使用產品的問題。</block>
  <block id="572b1d7e33a1c667884a1ffdff7a2d25" category="list-text">對於未在StorageClass中指定「FSType」的磁碟區、Astra Trident現在會執行空白的「FSType」（「FSType =」）。使用Kubernetes 1.17或更新版本時、Trident支援為NFS磁碟區提供空白的「FSType」。對於iSCSI磁碟區、您必須在使用安全性內容強制執行「fsGroup」時、在StorageClass上設定「FSType」。</block>
  <block id="91186d69835ccf9911e356f74938c539" category="list-text">在多個Astra Trident執行個體之間使用後端時、每個後端組態檔都應該有不同的「儲存前置字元」值、以供ONTAP 後端使用、或是使用不同的「TenantName」作為SolidFire 後端。Astra Trident無法偵測其他Astra Trident執行個體所建立的磁碟區。嘗試在ONTAP 不穩定或SolidFire 不穩定的後端上建立現有的Volume是成功的、因為Astra Trident將建立Volume視為強大的作業。如果「儲存前置詞」或「TenantName」沒有不同、則在相同後端上建立的磁碟區可能會發生名稱衝突。</block>
  <block id="9bf4c601179068ff3574d2cf87536564" category="list-text">安裝Astra Trident（使用「tridentctl」或Trident運算子）並使用「tridentctl」來管理Astra Trident時、您應確保設定「KUBECCONFIG」環境變數。這是表示Kubernetes叢集「tridentctl」應該與之搭配使用的必要項目。在使用多個Kubernetes環境時、您應該確保「KUBECCONFIG」檔案的來源正確無誤。</block>
  <block id="6d791d3b45515fd8619e489b938f39e8" category="inline-link">掛載選項</block>
  <block id="d4b9b9554fd820f43eae492d33e41167" category="inline-link">「torageClass」</block>
  <block id="a5c785ee36f0f2d14349653f744c8e3b" category="list-text">若要執行iSCSI PV的線上空間回收、工作節點上的基礎作業系統可能需要將掛載選項傳遞至磁碟區。對於需要「disccard」的RHEL/RedHat CoreOS執行個體來說、這是正確的做法<block ref="2ee633fb26bfccf07d490458d29f92a2" category="inline-link-rx"></block>；請確定您的隨附了捨棄掛載選項<block ref="b44436f062a8f5a535d8cafcffeb70b2" category="inline-link-rx"></block> 支援線上區塊捨棄。</block>
  <block id="c2ebda3702872aaa7ad44122f2343d7e" category="list-text">如果每個Kubernetes叢集有一個以上的Astra Trident執行個體、Astra Trident就無法與其他執行個體通訊、也無法探索他們所建立的其他磁碟區、如果叢集內有多個執行個體執行、就會導致非預期和不正確的行為。每個Kubernetes叢集只應有一個Astra Trident執行個體。</block>
  <block id="294f8c33b7ccdbcbf422998b64c9c931" category="list-text">如果在Astra Trident離線時、從Kubernetes刪除Astra Trident型的「torageClass」物件、則Astra Trident在其資料庫恢復連線時、不會從資料庫中移除對應的儲存類別。您應該使用「tridentctl」或REST API來刪除這些儲存類別。</block>
  <block id="ddab3f1d971a7608afb4c30c688a32ac" category="list-text">如果使用者刪除由Astra Trident提供的PV、然後再刪除對應的PVC、則Astra Trident不會自動刪除備份Volume。您應該透過「tridentctl」或REST API來移除磁碟區。</block>
  <block id="0821431aba133adbfa7fa0ca1781eedd" category="list-text">除非集合體是每個資源配置要求的唯一集合體、否則無法同時配置多個支援區。ONTAP FlexGroup</block>
  <block id="38699c45ccc629a8b46bd780d7aef2f6" category="list-text">使用Astra Trident over IPv6時、您應該在後端定義的方括弧內指定「managementLIF」和「data LIF」。例如：「[FD20：8b1e：b258：2000：f816：3eff：feec：0]。</block>
  <block id="d83c67344719a209c50396895dd2fbe1" category="list-text">如果OpenShift 4.5使用「Poolidfire - san」驅動程式、請確定基礎工作者節點使用MD5做為CHAP驗證演算法。</block>
  <block id="e9a7080bd6d1b50ff15cef6f14fa1d64" category="inline-link">Astra Trident GitHub</block>
  <block id="b94e036fb032554ca486dd8fc2e3fafe" category="list-text"><block ref="b94e036fb032554ca486dd8fc2e3fafe" category="inline-link-rx"></block></block>
  <block id="3334dfda9735f9b3ed55a34ef316b599" category="inline-link">Astra Trident部落格</block>
  <block id="d090b5d97388b77aa02e5d1203c037a0" category="list-text"><block ref="d090b5d97388b77aa02e5d1203c037a0" category="inline-link-rx"></block></block>
  <block id="e20acf6d4b1275a0b5d2eb01c845adff" category="summary">NetApp以多種方式支援Trident。24小時全年無休提供廣泛的免費自助支援選項、例如Slack通路。</block>
  <block id="db5eb84117d06047c97c9a0191b5fffe" category="doc">支援</block>
  <block id="14340f3a4eb25a54f8446036d807d7c8" category="paragraph">Astra Trident是正式支援的NetApp專案。您可以使用任何標準機制聯絡NetApp、取得所需的企業級支援。</block>
  <block id="31521e7ff20a98e479b412febf1ac4b4" category="inline-link">NetApp的Slack工作</block>
  <block id="b622c74429f1282e8ed1f79ee8d53260" category="paragraph">在「Container」通路上、也有一個充滿活力的公共社群、由容器使用者（包括Astra Trident開發人員）所共同參與<block ref="e5c49b87a1fe6d362b72260d2620cf35" category="inline-link-rx"></block>。這是您提出專案相關一般問題、並與志同道合的同儕討論相關主題的好地方。</block>
  <block id="d327e8f24b63b83e091dccdc48dd7b1b" category="sidebar">Astra Trident文件</block>
  <block id="7d0ee6fed10d3d4e5c9ee496729ab519" category="sidebar">版本資訊</block>
  <block id="93168a8084b3e838d2932c4734bd234e" category="sidebar">舊版</block>
  <block id="0629fb104936d0fb60cc736b6cb01caa" category="sidebar">Astra Trident的需求</block>
  <block id="1fe917b01f9a3f87fa2d7d3b7643fac1" category="sidebar">常見問題集</block>
  <block id="312b0dc38b01ff32c1b2f5f81ee1ab2d" category="sidebar">與Trident營運者一起部署</block>
  <block id="6a693eb5cd23e4e5743663c7edc37aed" category="sidebar">部署適用於Docker的Astra Trident</block>
  <block id="386307d41b3f4169a1e6e046a727cdd2" category="sidebar">與Trident營運者一起升級</block>
  <block id="eb1f347fa6176ae2c9175df3bc414954" category="sidebar">使用Astra Trident</block>
  <block id="81a123ccab93cd947289b672b0e50348" category="sidebar">示範教學課程</block>
  <block id="28348a71bed382b86fa6de4d3a307715" category="sidebar">Astra Trident影片</block>
  <block id="813011e2103649bb71f124adedcc10ea" category="sidebar">部落格社群</block>
  <block id="6394eceb2639574114b02e6e817eb19a" category="sidebar">Astra部落格</block>
  <block id="874d8a5301794a9ca2aba132ac2460f3" category="sidebar">Kubernetes Hub</block>
  <block id="d59c00abbeaf33a9a094b3a69c563405" category="sidebar">NetApp.IO</block>
  <block id="f14894e4c400a400c02367258a93029a" category="sidebar">適合Docker的Astra Trident</block>
  <block id="e08bfc79c5202517b3814efd6e82fb2c" category="sidebar">升級或解除安裝Trident</block>
  <block id="0460583622f03a52d7693094d6fa2452" category="sidebar">概念</block>
  <block id="cc4a0df2c635530d752308ab5a1c4b89" category="sidebar">設定ANF後端</block>
  <block id="498784627f42c14468b84a1a351bd462" category="sidebar">設定ADS後端</block>
  <block id="58eaebf972358f1cf03d386a4ade1a0f" category="sidebar">接下來呢？</block>
  <block id="a20f982d79c3dd66d244ffe0f7d940ee" category="sidebar">最佳實務做法與建議</block>
  <block id="c91cf7abea9584bc1edbc8ff4948ada0" category="sidebar">Astra Trident整合</block>
  <block id="c949166d6970748c0094c800daa3324a" category="sidebar">管理Astra Trident</block>
  <block id="63d5049791d9d79d86e9a108b0a999ca" category="sidebar">參考資料</block>
  <block id="324fb1352ffffb105d10013810c42896" category="sidebar">Kubernetes和Astra Trident物件</block>
  <block id="67b47f9232c8507cb74ec2668b3bb75d" category="list-text">建立Volume快照需要建立外部快照控制器和自訂資源定義（CRD）。這是正在使用的Kubernetes Orchestrator的責任（例如：Kubeadm、GKE、OpenShift）。</block>
  <block id="9c87569b835a8f66b7490390d350d9a4" category="paragraph">如果您的Kubernetes發佈版本未包含快照控制器和客戶需求日、您可以依照下列方式進行部署。</block>
  <block id="469f7ca16938508b5dcb777767828b70" category="list-text">建立Volume Snapshot客戶需求日。</block>
  <block id="2f30b620baa463b151147c434eb1c308" category="paragraph">對於Kubernetes 1.20及更新版本、請使用v1 Snapshot CRD搭配v5.0或更新版本的Snapshot元件。對於Kubernetes 1.17-1.19版、請使用v1beta1搭配v3.0.3快照元件。</block>
  <block id="351d6da9c87ca81d91cd4755e4730d82" category="open-title">V5.0元件</block>
  <block id="3d5442333756ee7fdf64adf51439d855" category="open-title">v3.0.3元件</block>
  <block id="65b146df7d5c27b212f54a7c9980960b" category="list-text">在所需的命名空間中建立Snapshot控制器。編輯下方的Yaml清單以修改命名空間。</block>
  <block id="c99740d72de1d916747c317140dc330d" category="paragraph">對於Kubernetes 1.20及更新版本、請使用5.0版或更新版本。對於Kubernetes 1.17-1.19版、請使用v3.0.3</block>
  <block id="1cfbd89d099907d91122529e677f1c71" category="admonition">如果在GKE環境中設定隨需磁碟區快照、請勿建立快照控制器。GKE使用內建的隱藏式快照控制器。</block>
  <block id="5e393c0ca8392e0c84201770c8b544ca" category="open-title">V5.0控制器</block>
  <block id="ea567d0d1a58b120efa89893cae2966a" category="open-title">v3.0.3控制器</block>
  <block id="086e6c16e3fe8e13c336612ef636aa02" category="sidebar">Astra Trident</block>
  <block id="d24bae93d00d821b3a8e7ee57c3bd468" category="section-title">收集記錄以進行故障診斷</block>
  <block id="5a333b18a215ecfd4457ba0e1732654b" category="section-title">是否能在已設定負載共享鏡射的SVM上、對磁碟區進行Trident資源配置？</block>
  <block id="0e7629426b9d7596800cd5d72f558a7f" category="paragraph">您可以為透過NFS提供資料的SVM根磁碟區建立負載共享鏡像。針對Trident所建立的磁碟區、自動更新負載共享鏡像。ONTAP這可能會導致掛載磁碟區延遲。使用Trident建立多個磁碟區時、資源配置磁碟區會仰賴ONTAP 於更新負載共享鏡像。</block>
</blocks>